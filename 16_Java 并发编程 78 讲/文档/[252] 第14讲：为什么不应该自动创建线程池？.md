<p data-nodeid="149" class="">åœ¨æœ¬è¯¾æ—¶æˆ‘ä»¬ä¸»è¦å­¦ä¹ ä¸ºä»€ä¹ˆä¸åº”è¯¥è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± ï¼Œæ‰€è°“çš„è‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± å°±æ˜¯ç›´æ¥è°ƒç”¨ Executors çš„å„ç§æ–¹æ³•æ¥ç”Ÿæˆå‰é¢å­¦è¿‡çš„å¸¸è§çš„çº¿ç¨‹æ± ï¼Œä¾‹å¦‚&nbsp;Executors.newCachedThreadPool()ã€‚ä½†è¿™æ ·åšæ˜¯æœ‰ä¸€å®šé£é™©çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥é€ä¸€åˆ†æè‡ªåŠ¨åˆ›å»ºçº¿ç¨‹æ± å¯èƒ½å¸¦æ¥å“ªäº›é—®é¢˜ã€‚</p>
<h3 data-nodeid="150">FixedThreadPool</h3>
<p data-nodeid="151">é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€ç§çº¿ç¨‹æ±  FixedThreadPoolï¼Œ å®ƒæ˜¯çº¿ç¨‹æ•°é‡å›ºå®šçš„çº¿ç¨‹æ± ï¼Œå¦‚æºç æ‰€ç¤ºï¼ŒnewFixedThreadPool å†…éƒ¨å®é™…è¿˜æ˜¯è°ƒç”¨äº† ThreadPoolExecutor æ„é€ å‡½æ•°ã€‚</p>
<pre class="lang-java" data-nodeid="152"><code data-language="java"><span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;ExecutorService&nbsp;<span class="hljs-title">newFixedThreadPool</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&nbsp;nThreads)</span>&nbsp;</span>{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;ThreadPoolExecutor(nThreads,&nbsp;nThreads,<span class="hljs-number">0L</span>,&nbsp;TimeUnit.MILLISECONDS,<span class="hljs-keyword">new</span>&nbsp;LinkedBlockingQueue&lt;Runnable&gt;());
}
</code></pre>
<p data-nodeid="153">é€šè¿‡å¾€æ„é€ å‡½æ•°ä¸­ä¼ å‚ï¼Œåˆ›å»ºäº†ä¸€ä¸ªæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°ç›¸ç­‰çš„çº¿ç¨‹æ± ï¼Œå®ƒä»¬çš„æ•°é‡ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼ å…¥çš„å‚æ•°ï¼Œè¿™é‡Œçš„é‡ç‚¹æ˜¯ä½¿ç”¨çš„é˜Ÿåˆ—æ˜¯å®¹é‡æ²¡æœ‰ä¸Šé™çš„ LinkedBlockingQueueï¼Œå¦‚æœæˆ‘ä»¬å¯¹ä»»åŠ¡çš„å¤„ç†é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œé‚£ä¹ˆéšç€è¯·æ±‚çš„å¢å¤šï¼Œé˜Ÿåˆ—ä¸­å †ç§¯çš„ä»»åŠ¡ä¹Ÿä¼šè¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆå¤§é‡å †ç§¯çš„ä»»åŠ¡ä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œå¹¶å‘ç”Ÿ OOM ï¼Œä¹Ÿå°±æ˜¯OutOfMemoryErrorï¼Œè¿™å‡ ä¹ä¼šå½±å“åˆ°æ•´ä¸ªç¨‹åºï¼Œä¼šé€ æˆå¾ˆä¸¥é‡çš„åæœã€‚</p>
<h3 data-nodeid="154">SingleThreadExecutor</h3>
<p data-nodeid="155">ç¬¬äºŒç§çº¿ç¨‹æ± æ˜¯ SingleThreadExecutorï¼Œæˆ‘ä»¬æ¥åˆ†æä¸‹åˆ›å»ºå®ƒçš„æºç ã€‚</p>
<pre class="lang-java" data-nodeid="156"><code data-language="java"><span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;ExecutorService&nbsp;<span class="hljs-title">newSingleThreadExecutor</span><span class="hljs-params">()</span>&nbsp;</span>{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;FinalizableDelegatedExecutorService&nbsp;(<span class="hljs-keyword">new</span>&nbsp;ThreadPoolExecutor(<span class="hljs-number">1</span>,&nbsp;<span class="hljs-number">1</span>,<span class="hljs-number">0L</span>,&nbsp;TimeUnit.MILLISECONDS,<span class="hljs-keyword">new</span>&nbsp;LinkedBlockingQueue&lt;Runnable&gt;()));
}
</code></pre>
<p data-nodeid="157">ä½ å¯ä»¥çœ‹å‡ºï¼ŒnewSingleThreadExecutor&nbsp;å’Œ newFixedThreadPool çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡æŠŠæ ¸å¿ƒçº¿ç¨‹æ•°å’Œæœ€å¤§çº¿ç¨‹æ•°éƒ½ç›´æ¥è®¾ç½®æˆäº† 1ï¼Œä½†æ˜¯ä»»åŠ¡é˜Ÿåˆ—ä»æ˜¯æ— ç•Œçš„ LinkedBlockingQueueï¼Œæ‰€ä»¥ä¹Ÿä¼šå¯¼è‡´åŒæ ·çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å½“ä»»åŠ¡å †ç§¯æ—¶ï¼Œå¯èƒ½ä¼šå ç”¨å¤§é‡çš„å†…å­˜å¹¶å¯¼è‡´ OOMã€‚</p>
<h3 data-nodeid="158">CachedThreadPool</h3>
<p data-nodeid="159">ç¬¬ä¸‰ç§çº¿ç¨‹æ± æ˜¯ CachedThreadPoolï¼Œåˆ›å»ºå®ƒçš„æºç ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="160"><code data-language="java"><span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;ExecutorService&nbsp;<span class="hljs-title">newCachedThreadPool</span><span class="hljs-params">()</span>&nbsp;</span>{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;ThreadPoolExecutor(<span class="hljs-number">0</span>,&nbsp;Integer.MAX_VALUE,<span class="hljs-number">60L</span>,&nbsp;TimeUnit.SECONDS,<span class="hljs-keyword">new</span>&nbsp;SynchronousQueue&lt;Runnable&gt;());
}
</code></pre>
<p data-nodeid="161">è¿™é‡Œçš„ CachedThreadPool å’Œå‰é¢ä¸¤ç§çº¿ç¨‹æ± ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºä»»åŠ¡é˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯ SynchronousQueueï¼ŒSynchronousQueue æœ¬èº«å¹¶ä¸å­˜å‚¨ä»»åŠ¡ï¼Œè€Œæ˜¯å¯¹ä»»åŠ¡ç›´æ¥è¿›è¡Œè½¬å‘ï¼Œè¿™æœ¬èº«æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œä½†ä½ ä¼šå‘ç°æ„é€ å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°è¢«è®¾ç½®æˆäº†&nbsp;Integer.MAX_VALUEï¼Œè¿™ä¸ªå‚æ•°çš„å«ä¹‰æ˜¯æœ€å¤§çº¿ç¨‹æ•°ï¼Œæ‰€ä»¥ç”±äº CachedThreadPool å¹¶ä¸é™åˆ¶çº¿ç¨‹çš„æ•°é‡ï¼Œå½“ä»»åŠ¡æ•°é‡ç‰¹åˆ«å¤šçš„æ—¶å€™ï¼Œå°±å¯èƒ½ä¼šå¯¼è‡´åˆ›å»ºéå¸¸å¤šçš„çº¿ç¨‹ï¼Œæœ€ç»ˆè¶…è¿‡äº†æ“ä½œç³»ç»Ÿçš„ä¸Šé™è€Œæ— æ³•åˆ›å»ºæ–°çº¿ç¨‹ï¼Œæˆ–è€…å¯¼è‡´å†…å­˜ä¸è¶³ã€‚</p>
<h3 data-nodeid="162">ScheduledThreadPool å’Œ SingleThreadScheduledExecutor</h3>
<p data-nodeid="163">ç¬¬å››ç§çº¿ç¨‹æ±  ScheduledThreadPool å’Œç¬¬äº”ç§çº¿ç¨‹æ±  SingleThreadScheduledExecutor çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œåˆ›å»º ScheduledThreadPool çš„æºç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="164"><code data-language="java"><span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-keyword">static</span>&nbsp;ScheduledExecutorService&nbsp;<span class="hljs-title">newScheduledThreadPool</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&nbsp;corePoolSize)</span>&nbsp;</span>{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">return</span>&nbsp;<span class="hljs-keyword">new</span>&nbsp;ScheduledThreadPoolExecutor(corePoolSize);
}
</code></pre>
<p data-nodeid="165">è€Œè¿™é‡Œçš„ ScheduledThreadPoolExecutor æ˜¯ ThreadPoolExecutor çš„å­ç±»ï¼Œè°ƒç”¨çš„å®ƒçš„æ„é€ æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="166"><code data-language="java"><span class="hljs-function"><span class="hljs-keyword">public</span>&nbsp;<span class="hljs-title">ScheduledThreadPoolExecutor</span><span class="hljs-params">(<span class="hljs-keyword">int</span>&nbsp;corePoolSize)</span>&nbsp;</span>{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword">super</span>(corePoolSize,&nbsp;Integer.MAX_VALUE,&nbsp;<span class="hljs-number">0</span>,&nbsp;NANOSECONDS,<span class="hljs-keyword">new</span>&nbsp;DelayedWorkQueue());
}
</code></pre>
<p data-nodeid="946" class="">æˆ‘ä»¬é€šè¿‡æºç å¯ä»¥çœ‹å‡ºï¼Œå®ƒé‡‡ç”¨çš„ä»»åŠ¡é˜Ÿåˆ—æ˜¯&nbsp;DelayedWorkQueueï¼Œè¿™æ˜¯ä¸€ä¸ªå»¶è¿Ÿé˜Ÿåˆ—ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæ— ç•Œé˜Ÿåˆ—ï¼Œæ‰€ä»¥å’Œ LinkedBlockingQueue ä¸€æ ·ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­å­˜æ”¾è¿‡å¤šçš„ä»»åŠ¡ï¼Œå°±å¯èƒ½å¯¼è‡´ OOMã€‚</p>











<p data-nodeid="168" class="">ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™å‡ ç§è‡ªåŠ¨åˆ›å»ºçš„çº¿ç¨‹æ± éƒ½å­˜åœ¨é£é™©ï¼Œç›¸æ¯”è¾ƒè€Œè¨€ï¼Œæˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨åˆ›å»ºä¼šæ›´å¥½ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥æ›´åŠ æ˜ç¡®çº¿ç¨‹æ± çš„è¿è¡Œè§„åˆ™ï¼Œä¸ä»…å¯ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„çº¿ç¨‹æ•°é‡ï¼Œæ›´å¯ä»¥åœ¨å¿…è¦çš„æ—¶å€™æ‹’ç»æ–°ä»»åŠ¡çš„æäº¤ï¼Œé¿å…èµ„æºè€—å°½çš„é£é™©ã€‚</p>

---

### ç²¾é€‰è¯„è®º

##### **æ™®ï¼š
> æˆ‘ä»¥å‰è¿˜å‚»å‚»çš„ç”¨è‡ªåŠ¨çš„åˆ›å»ºï¼ŒæœçœŸæ˜¯å‚»å‚»çš„ğŸ˜‚

##### *äº®ï¼š
> è¿˜æ˜¯ç”¨çº¿ç¨‹æ± å¥½å•Š,æˆ‘ä¹‹å‰ç›´æ¥new Thread()ä¸€æŠŠæ¢­

##### **æ»”ï¼š
> FixedThreadPoolã€SingleThreadPoolï¼šä½¿ç”¨çš„æ˜¯æ— ç•Œé˜Ÿåˆ—ï¼ˆLinkedBlockingQueueï¼‰ï¼Œå½“ä»»åŠ¡å †ç§¯å¾ˆå¤šæ—¶ï¼Œä¼šå ç”¨å¤§é‡å†…å­˜ï¼Œæœ€ç»ˆå¯¼è‡´OOMã€‚ChachedTheadPoolï¼šå¯ä»¥æ— é™åˆ›å»ºçº¿ç¨‹ï¼ˆInteger.MAX_VALUEï¼‰ï¼Œä»»åŠ¡è¿‡å¤šæ—¶ä¼šå¯¼è‡´åˆ›å»ºçº¿ç¨‹è¾¾åˆ°æ“ä½œç³»ç»Ÿä¸Šçº¿æˆ–è€…å‘ç”ŸOOMã€‚ScheduledThreadPoolã€SingleThreadScheduledPoolï¼šä½¿ç”¨çš„æ˜¯DelayedWorkQueueé˜Ÿåˆ—ï¼Œå®è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§æ— ç•Œé˜Ÿåˆ—ï¼Œä¼šå¯¼è‡´OOMã€‚

##### **æ–½ï¼š
> å…¶å®ç¬¬ä¸€æ¬¡æ¥è§¦çº¿ç¨‹æ± çš„æ—¶å€™å°±å¾ˆä¸æ˜ç™½è¿™ä¸ªé—®é¢˜ï¼Œå¦‚æœä¸é€‚ç”¨ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šå­˜åœ¨è¿™äº›çº¿ç¨‹æ± å‘¢ï¼Ÿé£é™©è‚¯å®šæœ‰ï¼Œä½†æ˜¯æŒ‰éœ€ä½¿ç”¨ä¸å°±å¥½äº†å—ï¼Ÿä¸æ˜¯å¾ˆå¤šæŠ€æœ¯éƒ½æ˜¯â€œé±¼å’Œç†ŠæŒâ€çš„é—®é¢˜å—ï¼Ÿä¸ºä»€ä¹ˆè¿™é‡Œè¦åˆ»æ„å¼ºè°ƒè‡ªå·±æ‰‹åŠ¨åˆ›å»ºï¼Ÿæ‰‹åŠ¨åˆ›å»ºæ ¹æœ¬å¥½å¤„åœ¨äºæ¯ä¸ªå‚æ•°éƒ½å¯ä»¥è‡ªå®šä¹‰å—ï¼Ÿå¯ä»¥é±¼å’Œç†ŠæŒå°½æ”¶å—ï¼ŸçœŸæ­£å¼€å‘çš„æ—¶å®šåˆ¶æœ‰è¿™ä¹ˆä¸¥è‹›å—ï¼Ÿæ²¡æœ‰å¼€å‘ç»éªŒï¼Œæœ›è€å¸ˆæŒ‡æ•™ï¼

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; æ‰‹åŠ¨åˆ›å»ºæ ¹æœ¬å¥½å¤„åœ¨äºæ¯ä¸ªå‚æ•°éƒ½å¯ä»¥è‡ªå®šä¹‰ï¼Œè¿™æ ·è‡³å°‘åœ¨å®šä¹‰å‚æ•°çš„æ—¶å€™ï¼Œèƒ½æ ¹æ®ä¸šåŠ¡æƒ…å†µè¿›è¡Œé€‰æ‹©ï¼Œé¿å…äº†â€œå‹æ ¹ä¸çŸ¥é“è¿™é‡Œæœ‰é£é™©â€ã€‚

##### **3388ï¼š
> æœ¬æ¥è¿˜è§‰å¾—Executorsç‰¹åˆ«å¥½ç”¨â€¦â€¦

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; æ˜¯æŒºå¥½ç”¨çš„ï¼Œå°±æ˜¯ä¸ç®—ååˆ†å®‰å…¨ã€‚

