<p data-nodeid="1522" class="">ä½œä¸º iOS å¼€å‘è€…ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½èŠ±å¤§é‡çš„æ—¶é—´æ¥å¼€å‘å’Œè°ƒè¯• UIï¼Œé‚£æœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¸®åŠ©æˆ‘ä»¬æŠŠç¹æ‚çš„ UI å¼€å‘å·¥ä½œç®€åŒ–æˆæœ‰ç« å¯å¾ªçš„æ­¥éª¤ï¼Œä»è€Œæé«˜å¼€å‘çš„æ•ˆç‡å‘¢ï¼Ÿåœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘å°±å’Œä½ èŠèŠï¼Œå¦‚ä½•æ¶æ„å’Œå¼€å‘ä¸€å¥—çµæ´»çš„ UI æ¡†æ¶ã€‚</p>
<h3 data-nodeid="1523">é€šç”¨åˆ—è¡¨ UI æ¨¡å—çš„æ¶æ„ä¸å®ç°</h3>
<p data-nodeid="1524">åˆ—è¡¨ UI æ˜¯ App æœ€ä¸ºå¸¸ç”¨çš„ UI é¡µé¢ï¼Œå®ƒå¯ä»¥å¸®æˆ‘ä»¬é€šè¿‡æ»šåŠ¨çš„æ–¹å¼æ”¯æŒæ— é™çš„å†…å®¹ã€‚ä¸ºäº†ç®€åŒ–å¤§é‡çš„é‡å¤æ€§åŠ³åŠ¨ï¼Œæˆ‘åœ¨ Moments App æ¶æ„å®ç°äº†ä¸€ä¸ªé€šç”¨çš„åˆ—è¡¨ UI æ¨¡å—ã€‚ä¸‹é¢æ˜¯è¿™ä¸ªæ¨¡å—çš„æ¶æ„å›¾ã€‚</p>
<p data-nodeid="1525"><img src="https://s0.lgstatic.com/i/image6/M01/3C/A9/Cgp9HWCL1DiANqbhAAMguDPxTIw094.png" alt="å›¾ç‰‡1.png" data-nodeid="1641"><br>
è¿™ä¸ªæ¡†æ¶ä½¿ç”¨äº†<code data-backticks="1" data-nodeid="1644">UIViewController</code>å’Œ<code data-backticks="1" data-nodeid="1646">UITableView</code>æ¥å°è£…åˆ—è¡¨é¡µé¢ã€‚å…¶æ ¸å¿ƒæ˜¯<code data-backticks="1" data-nodeid="1648">BaseTableViewController</code>ã€‚<code data-backticks="1" data-nodeid="1650">BaseTableViewController</code>ç»§æ‰¿äº<code data-backticks="1" data-nodeid="1652">BaseViewController</code>ï¼Œè€Œ<code data-backticks="1" data-nodeid="1654">BaseViewController</code>ç»§æ‰¿è‡ª<code data-backticks="1" data-nodeid="1656">UIViewController</code>ã€‚</p>
<p data-nodeid="1526">æˆ‘ä»¬å…ˆçœ‹çœ‹<code data-backticks="1" data-nodeid="1659">BaseViewController</code>çš„å…·ä½“å®ç°ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹ã€‚</p>
<pre class="lang-swift" data-nodeid="1527"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseViewController</span>: <span class="hljs-title">UIViewController</span> </span>{
    <span class="hljs-built_in">lazy</span> <span class="hljs-keyword">var</span> disposeBag: <span class="hljs-type">DisposeBag</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-keyword">init</span>() {
      <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(nibName: <span class="hljs-literal">nil</span>, bundle: <span class="hljs-literal">nil</span>)
    }
    <span class="hljs-meta">@available</span>(*, unavailable, message: <span class="hljs-string">"We don't support init view controller from a nib."</span>)
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">init</span>(nibName nibNameOrNil: <span class="hljs-type">String?</span>, bundle nibBundleOrNil: <span class="hljs-type">Bundle?</span>) {
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(nibName: nibNameOrNil, bundle: nibBundleOrNil)
    }
    <span class="hljs-meta">@available</span>(*, unavailable, message: <span class="hljs-string">"We don't support init view controller from a nib."</span>)
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>?(coder: <span class="hljs-type">NSCoder</span>) {
        <span class="hljs-built_in">fatalError</span>(<span class="hljs-type">L10n</span>.<span class="hljs-type">Development</span>.fatalErrorInitCoderNotImplemented)
    }
}
</code></pre>
<p data-nodeid="1528">å› ä¸º Moments App æ˜¯ä½¿ç”¨çº¯ä»£ç çš„æ–¹å¼æ¥ç¼–å†™ UIï¼Œæ‰€ä»¥<code data-backticks="1" data-nodeid="1662">BaseViewController</code>é‡å†™äº†<code data-backticks="1" data-nodeid="1664">init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: Bundle?)</code>å’Œ<code data-backticks="1" data-nodeid="1666">init?(coder: NSCoder)</code>ä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ç›´æ¥æŠ›å‡ºå¼‚å¸¸ã€‚è¿™æ ·åšä½¿å¾—æ‰€æœ‰ç»§æ‰¿<code data-backticks="1" data-nodeid="1668">BaseViewController</code>çš„å­ç±»ï¼Œéƒ½æ²¡åŠæ³•é€šè¿‡ Storyboard æˆ–è€… Xib æ–‡ä»¶æ¥ç”Ÿæˆ ViewController çš„å®ä¾‹ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨ RxSwiftï¼Œ<code data-backticks="1" data-nodeid="1670">BaseViewController</code>è¿˜å®šä¹‰äº†ä¸€ä¸ª<code data-backticks="1" data-nodeid="1672">disposeBag</code>å±æ€§æ¥æ–¹ä¾¿ç®¡ç†æ‰€æœ‰ Obervable åºåˆ—çš„è®¢é˜…ã€‚</p>
<p data-nodeid="1529"><code data-backticks="1" data-nodeid="1674">BaseTableViewController</code>ç»§æ‰¿äº†<code data-backticks="1" data-nodeid="1676">BaseViewController</code>ï¼Œå¹¶ä½¿ç”¨<code data-backticks="1" data-nodeid="1678">UITableView</code>æ¥å°è£…ä¸€ä¸ªé€šç”¨çš„åˆ—è¡¨é¡µé¢ã€‚æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹å®ƒæ˜¯æ€æ ·å®ç°çš„ã€‚</p>
<p data-nodeid="1530">åœ¨ MVVM æ¨¡å¼é‡Œï¼ŒView ä¾èµ–äº ViewModelã€‚ä½œä¸º View çš„<code data-backticks="1" data-nodeid="1681">BaseTableViewController</code>ä¾èµ–äº ViewModel å±‚çš„<code data-backticks="1" data-nodeid="1683">ListViewModel</code>åè®®ï¼Œè¿™ä½¿å¾—<code data-backticks="1" data-nodeid="1685">BaseTableViewController</code>åªä¾èµ–äºæ¥å£è€Œä¸æ˜¯å…·ä½“çš„ç±»å‹ï¼Œä»è€Œæé«˜äº†ç¨‹åºçš„å¯æ‰©å±•æ€§ã€‚</p>
<p data-nodeid="1531">åŒæ—¶ï¼Œ<code data-backticks="1" data-nodeid="1688">BaseTableViewController</code>è¿˜å®šä¹‰äº†ä¸‰ä¸ªå±æ€§æ¥æ˜¾ç¤º UI æ§ä»¶ï¼š</p>
<ul data-nodeid="1532">
<li data-nodeid="1533">
<p data-nodeid="1534"><code data-backticks="1" data-nodeid="1690">tableView</code>å±æ€§ç”¨äºæ˜¾ç¤ºä¸€ä¸ª TableViewï¼›</p>
</li>
<li data-nodeid="1535">
<p data-nodeid="1536"><code data-backticks="1" data-nodeid="1692">activityIndicatorView</code>å±æ€§ç”¨äºæ˜¾ç¤ºä¿—ç§°å°èŠèŠ±çš„åŠ è½½å™¨ï¼›</p>
</li>
<li data-nodeid="1537">
<p data-nodeid="1538"><code data-backticks="1" data-nodeid="1694">errorLabel</code>ç”¨äºæ˜¾ç¤ºå‡ºé”™ä¿¡æ¯çš„æ ‡ç­¾æ§ä»¶ã€‚</p>
</li>
</ul>
<p data-nodeid="1539">ä»¥ä¸‹æ˜¯å±æ€§å®šä¹‰çš„ä»£ç ç¤ºä¾‹ã€‚</p>
<pre class="lang-swift" data-nodeid="1540"><code data-language="swift"><span class="hljs-keyword">var</span> viewModel: <span class="hljs-type">ListViewModel!</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> tableView: <span class="hljs-type">UITableView</span> = configure(.<span class="hljs-keyword">init</span>()) {
    $<span class="hljs-number">0</span>.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal">false</span>
    $<span class="hljs-number">0</span>.separatorStyle = .<span class="hljs-keyword">none</span>
    $<span class="hljs-number">0</span>.rowHeight = <span class="hljs-type">UITableView</span>.automaticDimension
    $<span class="hljs-number">0</span>.estimatedRowHeight = <span class="hljs-number">100</span>
    $<span class="hljs-number">0</span>.contentInsetAdjustmentBehavior = .never
    $<span class="hljs-number">0</span>.backgroundColor = <span class="hljs-type">UIColor</span>.designKit.background
}
<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> activityIndicatorView: <span class="hljs-type">UIActivityIndicatorView</span> = configure(.<span class="hljs-keyword">init</span>(style: .large)) {
    $<span class="hljs-number">0</span>.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal">false</span>
}
<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> errorLabel: <span class="hljs-type">UILabel</span> = configure(.<span class="hljs-keyword">init</span>()) {
    $<span class="hljs-number">0</span>.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal">false</span>
    $<span class="hljs-number">0</span>.isHidden = <span class="hljs-literal">true</span>
    $<span class="hljs-number">0</span>.textColor = <span class="hljs-type">UIColor</span>.designKit.primaryText
    $<span class="hljs-number">0</span>.text = <span class="hljs-type">L10n</span>.<span class="hljs-type">MomentsList</span>.errorMessage
}
</code></pre>
<p data-nodeid="1541">ä¸ºäº†æ–¹ä¾¿åˆå§‹åŒ– UIKit çš„æ§ä»¶ï¼Œæˆ‘å†™äº†ä¸€ä¸ªå…¬å…±çš„<code data-backticks="1" data-nodeid="1698">configure()</code>æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1542"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">configure</span>&lt;T: AnyObject&gt;<span class="hljs-params">(<span class="hljs-number">_</span> object: T, closure: <span class="hljs-params">(T)</span></span></span> -&gt; <span class="hljs-type">Void</span>) -&gt; <span class="hljs-type">T</span> {
    closure(object)
    <span class="hljs-keyword">return</span> object
}
</code></pre>
<p data-nodeid="1543">æœ‰äº†è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å°±å¯ä»¥æŠŠæ‰€æœ‰åˆå§‹åŒ–æ“ä½œéƒ½æ”¾åœ¨ä¸€ä¸ªé—­åŒ…ï¼ˆClosureï¼‰é‡Œé¢ï¼Œæ–¹ä¾¿ä»£ç çš„ç»´æŠ¤ã€‚</p>
<p data-nodeid="1544">æ¥ç€æˆ‘ä»¬çœ‹ä¸€ä¸‹<code data-backticks="1" data-nodeid="1702">setupUI()</code>æ–¹æ³•çš„ä»£ç å®ç°ã€‚</p>
<pre class="lang-swift" data-nodeid="1545"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupUI</span><span class="hljs-params">()</span></span> {
    view.backgroundColor = <span class="hljs-type">UIColor</span>.designKit.background
    tableViewCellsToRegister.forEach {
        tableView.register($<span class="hljs-number">0</span>.value, forCellReuseIdentifier: $<span class="hljs-number">0</span>.key)
    }
    [tableView, activityIndicatorView, errorLabel].forEach {
        view.addSubview($<span class="hljs-number">0</span>)
    }
}
</code></pre>
<p data-nodeid="1546">è¯¥æ–¹æ³•è´Ÿè´£è®¾ç½® UI çš„æ ·å¼ï¼Œä¾‹å¦‚è®¾ç½®èƒŒæ™¯é¢œè‰²ï¼Œæ³¨å†Œ TableView Cell å’Œæ·»åŠ å­æ§ä»¶ã€‚</p>
<p data-nodeid="1547">é…ç½®å®Œ UI çš„æ ·å¼ä»¥åï¼Œä¸‹ä¸€æ­¥æ˜¯é…ç½®è‡ªåŠ¨å¸ƒå±€çš„çº¦æŸï¼ˆAuto Layout Constraintï¼‰ã€‚å½“ä½¿ç”¨ UIKit ä½œä¸º View å±‚çš„æ—¶å€™ï¼Œæˆ‘æ¨èä½¿ç”¨è‹¹æœå…¬å¸æ‰€æ¨èçš„<strong data-nodeid="1710">è‡ªåŠ¨å¸ƒå±€</strong>æ¥æ’ç‰ˆ UI é¡µé¢ã€‚</p>
<p data-nodeid="1548">è‡ªåŠ¨å¸ƒå±€èƒ½å¸®åŠ©æˆ‘ä»¬æ”¯æŒä¸åŒåˆ†è¾¨ç‡å’Œå±å¹•å¯¹æ¯”ç‡çš„é¡µé¢ï¼Œè€Œä¸”è‹¹æœå…¬å¸æ¯å¹´éƒ½åœ¨ä¸æ–­ä¼˜åŒ–è‡ªåŠ¨å¸ƒå±€å¼•æ“çš„æ€§èƒ½ã€‚ä¸è¿‡ï¼Œå®ƒä¹Ÿæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œé‚£å°±æ˜¯æ‰‹å†™è‡ªåŠ¨å¸ƒå±€çš„çº¦æŸä»£ç ä¼šååˆ†å†—é•¿ï¼Œä¸ºæ­¤æˆ‘ä½¿ç”¨ä¸€ä¸ªåå«<strong data-nodeid="1718">SnapKit çš„åº“</strong>æ¥è¿›è¡Œç®€åŒ–ã€‚ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡<code data-backticks="1" data-nodeid="1716">setupConstraints()</code>çš„ä»£ç ï¼Œæ¥çœ‹çœ‹ SnapKit çš„å¨åŠ›ã€‚</p>
<pre class="lang-swift" data-nodeid="1549"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupConstraints</span><span class="hljs-params">()</span></span> {
    tableView.snp.makeConstraints {
        $<span class="hljs-number">0</span>.edges.equalToSuperview()
    }
    activityIndicatorView.snp.makeConstraints {
        $<span class="hljs-number">0</span>.center.equalToSuperview()
    }
    errorLabel.snp.makeConstraints {
        $<span class="hljs-number">0</span>.center.equalToSuperview()
    }
}
</code></pre>
<p data-nodeid="1550">å¦‚ä¸Šè¿°ä»£ç æ‰€ç¤ºï¼Œå½“ä½¿ç”¨ SnapKit æ¥é…ç½®è‡ªåŠ¨å¸ƒå±€çš„çº¦æŸæ—¶ï¼Œæˆ‘ä»¬éœ€è¦è°ƒç”¨å®ƒçš„æ‰©å±•æ–¹æ³•<code data-backticks="1" data-nodeid="1720">makeConstraints</code>ï¼Œç„¶åæŠŠæ‰€æœ‰çº¦æŸçš„é…ç½®éƒ½æ”¾åˆ°é—­åŒ…é‡Œé¢ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘æ˜¯é€šè¿‡<code data-backticks="1" data-nodeid="1722">edges.equalToSuperview()</code>æŠŠ<code data-backticks="1" data-nodeid="1724">tableView</code>å»¶ä¼¸åˆ°å®ƒçš„çˆ¶ç»„ä»¶ï¼ˆä¹Ÿå°±æ˜¯<code data-backticks="1" data-nodeid="1726">BaseTableViewController</code>çš„<code data-backticks="1" data-nodeid="1728">view</code>ï¼‰ä¸­ï¼Œç„¶åé€šè¿‡<code data-backticks="1" data-nodeid="1730">center.equalToSuperview()</code>æ–¹æ³•æŠŠ<code data-backticks="1" data-nodeid="1732">activityIndicatorView</code>å’Œ<code data-backticks="1" data-nodeid="1734">errorLabel</code>éƒ½åˆ†åˆ«å±…ä¸­ã€‚</p>
<p data-nodeid="1551">å‡å¦‚ä¸ä½¿ç”¨ SnapKitï¼Œè¦å®Œæˆå»¶ä¼¸<code data-backticks="1" data-nodeid="1737">tableView</code>çš„æ“ä½œï¼Œå°±éœ€è¦ä»¥ä¸‹çš„ä»£ç ã€‚</p>
<pre class="lang-swift" data-nodeid="1552"><code data-language="swift"><span class="hljs-type">NSLayoutConstraint</span>.activate([
    tableView.leadingAnchor.constraint(equalTo: view.leadingAnchor),
    tableView.trailingAnchor.constraint(equalTo: view.trailingAnchor),
    tableView.topAnchor.constraint(equalTo: view.topAnchor),
    tableView.bottomAnchor.constraint(equalTo: view.bottomAnchor)
])
</code></pre>
<p data-nodeid="1553">æˆ‘ä»¬ä¸å¾—ä¸åˆ†åˆ«é…ç½®æ¯ä¸€ä¸ªçº¦æŸï¼Œå¹¶æ”¾è¿›ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œç„¶åä¼ é€’ç»™é™æ€æ–¹æ³•<code data-backticks="1" data-nodeid="1740">NSLayoutConstraint.activate</code>ã€‚ æ‰€ä»¥ä½ çœ‹ï¼Œä½¿ç”¨ SnapKit å¤šä¹ˆæ–¹ä¾¿ã€‚</p>
<p data-nodeid="1554">å®Œæˆäº† UI çš„å¸ƒå±€ä»¥åï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æ•°æ®ç»‘å®šã€‚Moments App ä½¿ç”¨äº† RxSwift æŠŠ ViewModel å±‚å’Œ View å±‚è¿›è¡Œç»‘å®šï¼Œç»‘å®šçš„ä»£ç åœ¨<code data-backticks="1" data-nodeid="1743">setupBindings()</code>å‡½æ•°é‡Œï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p>
<pre class="lang-swift" data-nodeid="1555"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupBindings</span><span class="hljs-params">()</span></span> {
    tableView.refreshControl = configure(<span class="hljs-type">UIRefreshControl</span>()) {
        <span class="hljs-keyword">let</span> refreshControl = $<span class="hljs-number">0</span>
        $<span class="hljs-number">0</span>.rx.controlEvent(.valueChanged)
            .<span class="hljs-built_in">filter</span> { refreshControl.isRefreshing }
            .bind { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-number">_</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">self</span>?.loadItems() }
            .disposed(by: disposeBag)
    }
    <span class="hljs-keyword">let</span> dataSource = <span class="hljs-type">RxTableViewSectionedReloadDataSource</span>&lt;<span class="hljs-type">SectionModel</span>&lt;<span class="hljs-type">String</span>, <span class="hljs-type">ListItemViewModel</span>&gt;&gt;(configureCell: { <span class="hljs-number">_</span>, tableView, indexPath, item <span class="hljs-keyword">in</span>
        <span class="hljs-keyword">let</span> cell = tableView.dequeueReusableCell(withIdentifier: <span class="hljs-type">String</span>(describing: type(of: item)), <span class="hljs-keyword">for</span>: indexPath)
        (cell <span class="hljs-keyword">as</span>? <span class="hljs-type">ListItemCell</span>)?.update(with: item)
        <span class="hljs-keyword">return</span> cell
    })
    viewModel.listItems
        .bind(to: tableView.rx.items(dataSource: dataSource))
        .disposed(by: disposeBag)
    viewModel.hasError
        .<span class="hljs-built_in">map</span> { !$<span class="hljs-number">0</span> }
        .bind(to: errorLabel.rx.isHidden)
        .disposed(by: disposeBag)
}
</code></pre>
<p data-nodeid="1556">è¿™ä¸ªå‡½æ•°ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯é€šè¿‡ RxSwift å’Œ RxCocoa ï¼ŒæŠŠ<code data-backticks="1" data-nodeid="1746">UIRefreshControl</code>æ§ä»¶é‡Œçš„<code data-backticks="1" data-nodeid="1748">isRefreshing</code>äº‹ä»¶å’Œ<code data-backticks="1" data-nodeid="1750">loadItems()</code>å‡½æ•°ç»‘å®šèµ·æ¥ã€‚å½“ç”¨æˆ·ä¸‹æ‹‰åˆ·æ–°æ§ä»¶çš„æ—¶å€™ä¼šè°ƒç”¨<code data-backticks="1" data-nodeid="1752">loadItems()</code>å‡½æ•°æ¥åˆ·æ–°åˆ—è¡¨çš„æ•°æ®ã€‚</p>
<p data-nodeid="1557">ç¬¬äºŒéƒ¨åˆ†æ˜¯æŠŠ TableView Cell æ§ä»¶ä¸ ViewModel çš„<code data-backticks="1" data-nodeid="1755">listItems</code>Subject å±æ€§ç»‘å®šèµ·æ¥ï¼Œå½“<code data-backticks="1" data-nodeid="1757">listItems</code>å‘å‡ºæ–°çš„äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨<code data-backticks="1" data-nodeid="1759">ListItemCell</code>çš„<code data-backticks="1" data-nodeid="1761">update(with viewModel: ListItemViewModel)</code>æ–¹æ³•æ¥æ›´æ–° UIã€‚<strong data-nodeid="1766">ç»è¿‡äº†è¿™ä¸€ç»‘å®šï¼ŒUI å°±èƒ½éšç€ ViewModel çš„æ•°æ®å˜åŒ–è€Œè‡ªåŠ¨æ›´æ–°ã€‚</strong></p>
<p data-nodeid="1558">ç¬¬ä¸‰éƒ¨åˆ†ä¸ç¬¬äºŒéƒ¨åˆ†ç±»ä¼¼ï¼Œéƒ½æ˜¯æŠŠ ViewModel ä¸ View å±‚çš„æ§ä»¶è¿›è¡Œç»‘å®šã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æŠŠ ViewModel çš„<code data-backticks="1" data-nodeid="1768">hasError</code>Subject å±æ€§ç»‘å®šåˆ°<code data-backticks="1" data-nodeid="1770">errorLabel.rx.isHidden</code>å±æ€§æ¥æ§åˆ¶<code data-backticks="1" data-nodeid="1772">errorLabel</code>æ˜¯å¦å¯è§ã€‚</p>
<p data-nodeid="1559">ä½ å¯èƒ½æ³¨æ„åˆ°åœ¨<code data-backticks="1" data-nodeid="1775">errorLabel</code>åé¢æœ‰<code data-backticks="1" data-nodeid="1777">.rx</code>å±æ€§ï¼Œè¿™æ˜¯ RxCocoa ä¸º<code data-backticks="1" data-nodeid="1779">UILabel</code>æ§ä»¶æ‰€æä¾›çš„ä¸€ä¸ªæ‰©å±•ï¼Œå®ƒä¸º<code data-backticks="1" data-nodeid="1781">isHidden</code>å±æ€§æä¾›äº†å“åº”å¼ç¼–ç¨‹çš„åŠŸèƒ½ã€‚æœ‰äº†è¿™ä¸€åŠŸèƒ½ï¼Œå®ƒå°±å¯ä»¥ä¸ ViewModel çš„ Subject å±æ€§è¿›è¡Œç»‘å®šï¼Œä»è€Œå®ç°è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p data-nodeid="1560">æ•°æ®ç»‘å®šä»¥åï¼Œæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹<code data-backticks="1" data-nodeid="1784">loadItems()</code>å‡½æ•°çš„å®ç°ã€‚</p>
<pre class="lang-swift" data-nodeid="1561"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">loadItems</span><span class="hljs-params">()</span></span> {
    viewModel.hasError.onNext(<span class="hljs-literal">false</span>)
    viewModel.loadItems()
        .observeOn(<span class="hljs-type">MainScheduler</span>.instance)
        .<span class="hljs-keyword">do</span>(onDispose: { [<span class="hljs-keyword">weak</span> <span class="hljs-keyword">self</span>] <span class="hljs-keyword">in</span>
            <span class="hljs-keyword">self</span>?.activityIndicatorView.rx.isAnimating.onNext(<span class="hljs-literal">false</span>)
            <span class="hljs-keyword">self</span>?.tableView.refreshControl?.endRefreshing()
        })
        .<span class="hljs-built_in">map</span> { <span class="hljs-literal">false</span> }
        .startWith(<span class="hljs-literal">true</span>)
        .distinctUntilChanged()
        .bind(to: activityIndicatorView.rx.isAnimating)
        .disposed(by: disposeBag)
}
</code></pre>
<p data-nodeid="1562"><code data-backticks="1" data-nodeid="1786">loadItems()</code>æ–¹æ³•ç”¨äºåŠ è½½æ•°æ®ã€‚å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è¿›å…¥æœ‹å‹åœˆé¡µé¢çš„æ—¶å€™ï¼Œæˆ–è€…ç”¨æˆ·ä¸‹æ‹‰åˆ·æ–°æ§ä»¶çš„æ—¶å€™ï¼Œå°±ä¼šè°ƒç”¨è¯¥æ–¹æ³•æ¥é‡æ–°åŠ è½½æ•°æ®ã€‚</p>
<p data-nodeid="1563">è¯¥æ–¹æ³•ä¸»è¦åšä¸¤é¡¹å·¥ä½œï¼Œç¬¬ä¸€é¡¹æ˜¯è°ƒç”¨<code data-backticks="1" data-nodeid="1789">viewModel.hasError.onNext(false)</code>æ¥æ›´æ–° ViewModel çš„<code data-backticks="1" data-nodeid="1791">hasError</code>å±æ€§ï¼Œ å®ƒèƒ½è®© UI ä¸Šçš„é”™è¯¯æ ‡ç­¾ä¿¡æ¯æ¶ˆå¤±ã€‚</p>
<p data-nodeid="1564">ä»ä»£ç ä¸­ä½ å¯ä»¥çœ‹åˆ°ï¼Œå°½ç®¡æˆ‘ä»¬æƒ³æ›´æ–° UI å±‚çš„<code data-backticks="1" data-nodeid="1794">errorLabel</code>æ§ä»¶ï¼Œå´æ²¡æœ‰ç›´æ¥é€šè¿‡<code data-backticks="1" data-nodeid="1796">errorLabel.isHidden = true</code>çš„æ–¹å¼æ¥æ›´æ–°ï¼Œè€Œæ˜¯é€šè¿‡ ViewModel çš„<code data-backticks="1" data-nodeid="1798">hasError</code>å±æ€§æ¥å®Œæˆã€‚è¿™æ˜¯å› ä¸ºæˆ‘è¦ä¿è¯ View/UI å±‚éƒ½æ˜¯ç”± ViewModel é©±åŠ¨ï¼Œé€šè¿‡å•æ–¹å‘çš„æ•°æ®æµæ¥å‡å°‘ Bug ï¼Œä»è€Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚</p>
<p data-nodeid="1565"><code data-backticks="1" data-nodeid="1800">loadItems()</code>æ–¹æ³•çš„ç¬¬äºŒé¡¹å·¥ä½œï¼Œæ˜¯è®© ViewModel å»åŠ è½½æ•°æ®å¹¶ç»‘å®šåˆ°<code data-backticks="1" data-nodeid="1802">activityIndicatorView</code>æ§ä»¶çš„<code data-backticks="1" data-nodeid="1804">isAnimating</code>å±æ€§ä¸Šã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨ä¸»æ’ç¨‹å™¨ä¸Šæ‰§è¡Œ UI ä»»åŠ¡ï¼Œå› æ­¤è°ƒç”¨äº†<code data-backticks="1" data-nodeid="1806">.observeOn(MainScheduler.instance)</code>ï¼ŒæŠŠæ‰€æœ‰ä»»åŠ¡éƒ½å®‰æ’åˆ°ä¸»æ’ç¨‹å™¨ä¸Šã€‚</p>
<p data-nodeid="1566">å½“ ViewModel çš„<code data-backticks="1" data-nodeid="1809">loadItems()</code>æ–¹æ³•å¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œå…ˆé€šè¿‡<code data-backticks="1" data-nodeid="1811">.startWith(true)</code>æ¥è®©<code data-backticks="1" data-nodeid="1813">activityIndicatorView</code>å¯åŠ¨åŠ¨ç”»æ•ˆæœã€‚å½“ ViewModel çš„<code data-backticks="1" data-nodeid="1815">loadItems()</code>æ–¹æ³•è¿”å›æ•°æ®æ—¶ï¼ŒæŠŠç»“æœæ•°æ®é€šè¿‡<code data-backticks="1" data-nodeid="1817">.map { false }</code>æ–¹æ³•æ¥è¿”å›<code data-backticks="1" data-nodeid="1819">false</code>ï¼Œä»è€Œä½¿å¾—<code data-backticks="1" data-nodeid="1821">activityIndicatorView</code>åœæ­¢åŠ¨ç”»æ•ˆæœã€‚</p>
<p data-nodeid="1567">å‡å¦‚ç”¨æˆ·åœ¨è°ƒç”¨ ViewModel çš„<code data-backticks="1" data-nodeid="1824">loadItems()</code>æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œé€€å‡ºåˆ—è¡¨é¡µé¢ï¼Œæˆ‘ä»¬é€šè¿‡<code data-backticks="1" data-nodeid="1826">.do(onDispose:{})</code>æ–¹æ³•æ¥åœæ­¢<code data-backticks="1" data-nodeid="1828">activityIndicatorView</code>å’Œ<code data-backticks="1" data-nodeid="1830">refreshControl</code>ä¸¤ä¸ªæ§ä»¶çš„åˆ·æ–°åŠ¨ç”»ã€‚</p>
<p data-nodeid="1568">åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“<code data-backticks="1" data-nodeid="1833">BaseTableViewController</code>æ˜¯å¦‚ä½•é€šè¿‡ TableView æ¥å®ç°åˆ—è¡¨ UI çš„äº†ã€‚</p>
<p data-nodeid="1569">ä¸ºäº†æ˜¾ç°ä¸åŒçš„ TableView Cellï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬äº†è§£ä¸‹é€šç”¨çš„ Cell æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<p data-nodeid="1570">è¿™éƒ¨åˆ†ç”±å››ä¸ªç±»å‹æ‰€ç»„æˆï¼Œåˆ†åˆ«æ˜¯<code data-backticks="1" data-nodeid="1837">ListItemCell</code>åè®®åŠå…¶å­ç»“æ„ä½“<code data-backticks="1" data-nodeid="1839">BaseTableViewCell</code>ï¼Œä»¥åŠ<code data-backticks="1" data-nodeid="1841">ListItemView</code>åè®®åŠå…¶å­ç»“æ„ä½“<code data-backticks="1" data-nodeid="1843">BaseListItemView</code>ã€‚</p>
<p data-nodeid="1571"><code data-backticks="1" data-nodeid="1845">ListItemCell</code>åè®®çš„å®šä¹‰éå¸¸ç®€å•ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-swift" data-nodeid="1572"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ListItemCell</span>: <span class="hljs-title">class</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(with viewModel: ListItemViewModel)</span></span>
}
</code></pre>
<p data-nodeid="1573">è¯¥åè®®åªåŒ…å«äº†ä¸€ä¸ª<code data-backticks="1" data-nodeid="1848">update(with viewModel: ListItemViewModel)</code>æ–¹æ³•æ¥è®©å…¶å­ç±»å‹æ ¹æ®<code data-backticks="1" data-nodeid="1850">ListItemViewModel</code>çš„æ•°æ®è¿›è¡Œæ›´æ–°ã€‚</p>
<p data-nodeid="1574">å…¶å­ç±»å‹<code data-backticks="1" data-nodeid="1853">BaseTableViewCell</code>çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1575"><code data-language="swift"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseTableViewCell</span>&lt;<span class="hljs-title">V</span>: <span class="hljs-title">BaseListItemView</span>&gt;: <span class="hljs-title">UITableViewCell</span>, <span class="hljs-title">ListItemCell</span> </span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> view: <span class="hljs-type">V</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">init</span>(style: <span class="hljs-type">UITableViewCell</span>.<span class="hljs-type">CellStyle</span>, reuseIdentifier: <span class="hljs-type">String?</span>) {
        view = .<span class="hljs-keyword">init</span>()
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>(style: style, reuseIdentifier: reuseIdentifier)
        selectionStyle = .<span class="hljs-keyword">none</span>
        contentView.addSubview(view)
        view.snp.makeConstraints {
            $<span class="hljs-number">0</span>.edges.equalToSuperview()
        }
    }
    <span class="hljs-keyword">required</span> <span class="hljs-keyword">init</span>?(coder: <span class="hljs-type">NSCoder</span>) {
        <span class="hljs-built_in">fatalError</span>(<span class="hljs-type">L10n</span>.<span class="hljs-type">Development</span>.fatalErrorInitCoderNotImplemented)
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(with viewModel: ListItemViewModel)</span></span> {
        view.update(with: viewModel)
    }
}
</code></pre>
<p data-nodeid="1576"><code data-backticks="1" data-nodeid="1855">BaseTableViewCell</code>æ˜¯ä¸€ä¸ª<code data-backticks="1" data-nodeid="1857">UITableViewCell</code>çš„å­ç±»ï¼Œå¹¶éµå¾ªäº†<code data-backticks="1" data-nodeid="1859">ListItemCell</code>åè®®ï¼Œå› æ­¤å®ƒéœ€è¦å®ç°<code data-backticks="1" data-nodeid="1861">update(with viewModel: ListItemViewModel)</code>æ–¹æ³•ã€‚åœ¨è¯¥æ–¹æ³•é‡Œé¢ï¼Œå®ƒç›´æ¥è°ƒç”¨<code data-backticks="1" data-nodeid="1863">view</code>å±æ€§çš„<code data-backticks="1" data-nodeid="1865">update(with viewModel: ListItemViewModel)</code>æ¥æ›´æ–°<code data-backticks="1" data-nodeid="1867">BaseListItemView</code>ç»„ä»¶çš„ UIã€‚</p>
<p data-nodeid="1577">é‚£ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸æŠŠæ‰€æœ‰ UI å­æ§ä»¶éƒ½ç›´æ¥å†™åœ¨ Cell é‡Œï¼Œè€Œä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„<code data-backticks="1" data-nodeid="1870">BaseListItemView</code>å‘¢ï¼Ÿå› ä¸ºè¿™æ ·åšå¯ä»¥æŠŠ<code data-backticks="1" data-nodeid="1872">BaseListItemView</code>å¤ç”¨åˆ°<code data-backticks="1" data-nodeid="1874">UICollectionView</code>ç­‰å…¶ä»–å®¹å™¨ä¸­ã€‚</p>
<p data-nodeid="1578">æ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹<code data-backticks="1" data-nodeid="1877">BaseListItemView</code>åŠå…¶æ‰€éµå¾ªçš„<code data-backticks="1" data-nodeid="1879">ListItemView</code>åè®®çš„ä»£ç ã€‚</p>
<pre class="lang-swift" data-nodeid="1579"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">ListItemView</span>: <span class="hljs-title">class</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(with viewModel: ListItemViewModel)</span></span>
}
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseListItemView</span>: <span class="hljs-title">UIView</span>, <span class="hljs-title">ListItemView</span> </span>{
    <span class="hljs-built_in">lazy</span> <span class="hljs-keyword">var</span> disposeBag: <span class="hljs-type">DisposeBag</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(with viewModel: ListItemViewModel)</span></span> {
        <span class="hljs-built_in">fatalError</span>(<span class="hljs-type">L10n</span>.<span class="hljs-type">Development</span>.fatalErrorSubclassToImplement)
    }
}
</code></pre>
<p data-nodeid="1580"><code data-backticks="1" data-nodeid="1881">ListItemView</code>åè®®åªå®šä¹‰äº†<code data-backticks="1" data-nodeid="1883">update(with viewModel: ListItemViewModel)</code>æ¥å£æ¥é€šè¿‡ ViewModel æ›´æ–° UIã€‚å› ä¸ºæ¯ä¸ª UI ç»„ä»¶çš„å¸ƒå±€ä¸å‘ˆç°éƒ½å¯èƒ½ä¸ä¸€æ ·ï¼Œå› æ­¤ï¼Œ<code data-backticks="1" data-nodeid="1885">BaseListItemView</code>åœ¨å®ç°<code data-backticks="1" data-nodeid="1887">update(with viewModel: ListItemViewModel)</code>æ–¹æ³•æ—¶ï¼Œç›´æ¥æŠ›å‡ºäº†å¼‚å¸¸ï¼Œè¿™æ ·èƒ½è¿«ä½¿å…¶å­ç±»é‡å†™è¯¥æ–¹æ³•ã€‚</p>
<p data-nodeid="1581">ä¸Šé¢å°±æ˜¯é€šç”¨åˆ—è¡¨ UI æ¨¡å—çš„æ¶æ„ä¸å®ç°ï¼Œæœ‰äº†è¿™ä¸€ä¸ªæ¡†æ¶ï¼Œæˆ‘ä»¬å°±èƒ½å¿«é€Ÿå®ç°ä¸åŒçš„åˆ—è¡¨é¡µé¢ï¼Œä¸‹é¢ä»¥æœ‹å‹åœˆåŠŸèƒ½ä½œä¸ºä¾‹å­æ¥çœ‹çœ‹å¦‚ä½•å®ç°ä¸€ä¸ªæœ‹å‹åœˆæ—¶é—´è½´é¡µé¢ã€‚</p>
<h3 data-nodeid="1582">æœ‹å‹åœˆæ—¶é—´è½´é¡µé¢çš„å®ç°</h3>
<p data-nodeid="1583">é¦–å…ˆæˆ‘ä»¬ä¸€èµ·çœ‹çœ‹æœ‹å‹åœˆæ—¶é—´è½´é¡µé¢çš„æ¶æ„å›¾ã€‚</p>
<p data-nodeid="1584"><img src="https://s0.lgstatic.com/i/image6/M00/3C/B1/CioPOWCL09mAbIiFAAIX3-W1eco290.png" alt="å›¾ç‰‡2.png" data-nodeid="1894"><br>
<code data-backticks="1" data-nodeid="1896">MomentsTimelineViewController</code>ç”¨äºæ˜¾ç¤ºæœ‹å‹åœˆæ—¶é—´è½´é¡µé¢ï¼Œå…¶å…·ä½“ä»£ç å¦‚ä¸‹ã€‚</p>
<pre class="lang-swift" data-nodeid="1585"><code data-language="swift"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MomentsTimelineViewController</span>: <span class="hljs-title">BaseTableViewController</span> </span>{
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">init</span>() {
        <span class="hljs-keyword">super</span>.<span class="hljs-keyword">init</span>()
        viewModel = <span class="hljs-type">MomentsTimelineViewModel</span>(userID: <span class="hljs-type">UserDataStore</span>.current.userID)
    }
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidAppear</span><span class="hljs-params">(<span class="hljs-number">_</span> animated: Bool)</span></span> {
        <span class="hljs-keyword">super</span>.viewDidAppear(animated)
        viewModel.trackScreenviews()
    }
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">var</span> tableViewCellsToRegister: [<span class="hljs-type">String</span> : <span class="hljs-type">UITableViewCell</span>.<span class="hljs-type">Type</span>] {
        <span class="hljs-keyword">return</span> [
            <span class="hljs-type">UserProfileListItemViewModel</span>.reuseIdentifier: <span class="hljs-type">BaseTableViewCell</span>&lt;<span class="hljs-type">UserProfileListItemView</span>&gt;.<span class="hljs-keyword">self</span>,
            <span class="hljs-type">MomentListItemViewModel</span>.reuseIdentifier: <span class="hljs-type">BaseTableViewCell</span>&lt;<span class="hljs-type">MomentListItemView</span>&gt;.<span class="hljs-keyword">self</span>
        ]
    }
}
</code></pre>
<p data-nodeid="1586">å› ä¸º<code data-backticks="1" data-nodeid="1899">BaseViewController</code>å·²ç»å°è£…å¥½ç»å¤§éƒ¨åˆ†çš„ UI å¤„ç†é€»è¾‘ï¼Œä½œä¸ºå­ç±»ï¼Œ<code data-backticks="1" data-nodeid="1901">MomentsTimelineViewController</code>çš„å®ç°å˜å¾—éå¸¸ç®€å•ï¼Œåªéœ€ä¸‰éƒ¨åˆ†ã€‚</p>
<p data-nodeid="3060" class="">é¦–å…ˆæ˜¯åˆå§‹åŒ–<code data-backticks="1" data-nodeid="3062">viewModel</code>ã€‚å› ä¸º<code data-backticks="1" data-nodeid="3064">BaseViewController</code>é€šè¿‡<code data-backticks="1" data-nodeid="3066">var viewModel: ListViewModel!</code>æ¥å®šä¹‰<code data-backticks="1" data-nodeid="3068">viewModel</code>å±æ€§ï¼Œä½œä¸ºå­ç±»çš„<code data-backticks="1" data-nodeid="3070">MomentsTimelineViewController</code>ä¹Ÿå¿…é¡»åˆå§‹åŒ–<code data-backticks="1" data-nodeid="3072">viewModel</code>å±æ€§ï¼Œå¦åˆ™ç¨‹åºä¼šå´©æºƒã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬åªéœ€åˆ›å»ºä¸€ä¸ª<code data-backticks="1" data-nodeid="3074">MomentsTimelineViewModel</code>å¯¹è±¡æ¥å®Œæˆåˆå§‹åŒ–å³å¯ã€‚å®ƒçš„å®ç°æˆ‘åœ¨ä¸Šä¸€è®²å·²ç»ä»‹ç»è¿‡äº†ï¼Œä½ å¯ä»¥å†ç•™æ„ä¸‹ã€‚</p>



<p data-nodeid="1589">ç„¶åï¼Œæˆ‘åœ¨<code data-backticks="1" data-nodeid="1919">func viewDidAppear(_ animated: Bool)</code>æ–¹æ³•é‡Œé¢è°ƒç”¨<code data-backticks="1" data-nodeid="1921">viewModel.trackScreenviews()</code>æ¥è®© ViewModel å‘é€ç”¨æˆ·è¡Œä¸ºæ•°æ®ã€‚</p>
<p data-nodeid="1590">ä¸ºäº†å¸®<code data-backticks="1" data-nodeid="1924">BaseViewController</code>æä¾›éœ€è¦æ³¨å†Œçš„ TableView Cell ï¼Œæœ€åæˆ‘é‡å†™äº†<code data-backticks="1" data-nodeid="1926">tableViewCellsToRegister</code>å±æ€§ã€‚è¯¥å±æ€§å­˜æ”¾<code data-backticks="1" data-nodeid="1928">BaseTableViewCell</code>çš„å®ä¾‹ã€‚<code data-backticks="1" data-nodeid="1930">BaseTableViewCell</code>ä½¿ç”¨èŒƒå‹ï¼ˆgenericï¼‰æ¥å­˜æ”¾<code data-backticks="1" data-nodeid="1932">BaseListItemView</code>çš„å­ç±»ï¼Œè¿™äº›å­ç±»åŒ…æ‹¬<code data-backticks="1" data-nodeid="1934">UserProfileListItemView</code>å’Œ<code data-backticks="1" data-nodeid="1936">MomentListItemView</code>ã€‚</p>
<p data-nodeid="1591">ä½ å¯ä»¥ä»ä¸‹å›¾ä¸­çœ‹åˆ°å®ƒä»¬æ‰€å‘ˆç°çš„ UI ç»„ä»¶ã€‚</p>
<p data-nodeid="1592"><img src="https://s0.lgstatic.com/i/image6/M01/3C/B3/CioPOWCL3JKAWyl6AAalmHPesaU548.png" alt="å›¾ç‰‡4.png" data-nodeid="1941"></p>
<p data-nodeid="1593"><code data-backticks="1" data-nodeid="1942">MomentsTimelineViewController</code>æˆ‘ä»¬å·²ä»‹ç»å®Œæ¯•äº†ï¼Œä¸‹é¢å’±ä»¬ä»¥<code data-backticks="1" data-nodeid="1944">UserProfileListItemView</code>ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹å¼€å‘å­æ§ä»¶çš„æ­¥éª¤ä¸å®ç°ã€‚</p>
<p data-nodeid="1594"><code data-backticks="1" data-nodeid="1946">UserProfileListItemView</code>ç”¨äºæ˜¾ç¤ºç”¨æˆ·è‡ªå·±çš„èµ„æ–™ï¼Œä¾‹å¦‚ç”¨æˆ·åå­—ï¼Œå¤´åƒå’ŒèƒŒæ™¯å›¾ã€‚å› ä¸ºæœ‰äº†é€šç”¨å’Œç»Ÿä¸€çš„ UI å¼€å‘æ¡†æ¶ï¼Œæ¯æ¬¡å¼€å‘ UI é¡µé¢çš„æ­¥éª¤éƒ½æ˜¯ä¸€è‡´çš„ï¼Œå…·ä½“æˆ‘åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥å®Œæˆï¼š</p>
<ol data-nodeid="1595">
<li data-nodeid="1596">
<p data-nodeid="1597">åˆå§‹åŒ– UI æ§ä»¶çš„å±æ€§ï¼›</p>
</li>
<li data-nodeid="1598">
<p data-nodeid="1599">é…ç½® UI æ§ä»¶çš„æ ·å¼ï¼›</p>
</li>
<li data-nodeid="1600">
<p data-nodeid="1601">è®¾ç½®è‡ªåŠ¨å¸ƒå±€çš„çº¦æŸï¼›</p>
</li>
<li data-nodeid="1602">
<p data-nodeid="1603">é‡å†™<code data-backticks="1" data-nodeid="1952">update(with viewModel: ListItemViewModel)</code>æ–¹æ³•ï¼Œæ ¹æ® ViewModel çš„æ•°æ®æ¥æ›´æ–° UIã€‚</p>
</li>
</ol>
<p data-nodeid="1604">å…ˆçœ‹ä¸€ä¸‹åˆå§‹åŒ– UI æ§ä»¶å±æ€§çš„ä»£ç ã€‚</p>
<pre class="lang-swift" data-nodeid="1605"><code data-language="swift"><span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> backgroundImageView: <span class="hljs-type">UIImageView</span> = configure(.<span class="hljs-keyword">init</span>()) {
    $<span class="hljs-number">0</span>.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal">false</span>
    $<span class="hljs-number">0</span>.contentMode = .scaleAspectFill
    $<span class="hljs-number">0</span>.accessibilityIgnoresInvertColors = <span class="hljs-literal">true</span>
}
<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> avatarImageView: <span class="hljs-type">UIImageView</span> = configure(.<span class="hljs-keyword">init</span>()) {
    $<span class="hljs-number">0</span>.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal">false</span>
    $<span class="hljs-number">0</span>.asAvatar(cornerRadius: <span class="hljs-number">8</span>)
    $<span class="hljs-number">0</span>.contentMode = .scaleAspectFill
    $<span class="hljs-number">0</span>.accessibilityIgnoresInvertColors = <span class="hljs-literal">true</span>
}
<span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> nameLabel: <span class="hljs-type">UILabel</span> = configure(.<span class="hljs-keyword">init</span>()) {
    $<span class="hljs-number">0</span>.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal">false</span>
    $<span class="hljs-number">0</span>.font = <span class="hljs-type">UIFont</span>.designKit.title3
    $<span class="hljs-number">0</span>.textColor = .white
    $<span class="hljs-number">0</span>.numberOfLines = <span class="hljs-number">1</span>
}
</code></pre>
<p data-nodeid="1606">æˆ‘ä»¬åˆ†åˆ«è°ƒç”¨<code data-backticks="1" data-nodeid="1956">configure()</code>å‡½æ•°æ¥åˆå§‹åŒ–ä¸‰ä¸ª UI æ§ä»¶çš„å±æ€§ï¼Œ<code data-backticks="1" data-nodeid="1958">backgroundImageView</code>ç”¨äºæ˜¾ç¤ºèƒŒæ™¯å›¾ï¼Œ<code data-backticks="1" data-nodeid="1960">avatarImageView</code>ç”¨äºæ˜¾ç¤ºç”¨æˆ·å¤´åƒï¼Œè€Œ<code data-backticks="1" data-nodeid="1962">nameLabel</code>ç”¨äºæ˜¾ç¤ºç”¨æˆ·åå­—ã€‚</p>
<p data-nodeid="1607">ä½ å¯ä»¥æ ¹æ®ä¸‹å›¾ï¼Œçœ‹åˆ°å®ƒä»¬åˆ†åˆ«ä½¿ç”¨åœ¨å“ªé‡Œã€‚</p>
<p data-nodeid="1608"><img src="https://s0.lgstatic.com/i/image6/M01/3C/B3/CioPOWCL3LGAfuNrABZKzpfsijg925.png" alt="å›¾ç‰‡5.png" data-nodeid="1967"></p>
<p data-nodeid="1609">æ¥ç€æ¥çœ‹åœ¨ç¬¬äºŒæ­¥ä¸­å¦‚ä½•é…ç½® UI æ§ä»¶çš„æ ·å¼ï¼Œæˆ‘ç”¨<code data-backticks="1" data-nodeid="1969">setupUI()</code>æ–¹æ³•æ¥å®ç°ã€‚</p>
<pre class="lang-swift" data-nodeid="1610"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupUI</span><span class="hljs-params">()</span></span> {
    backgroundColor = <span class="hljs-type">UIColor</span>.designKit.background
    [backgroundImageView, avatarImageView, nameLabel].forEach {
        addSubview($<span class="hljs-number">0</span>)
    }
}
</code></pre>
<p data-nodeid="1611">åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨äº† DesignKit æ¥è®¾ç½®äº†èƒŒæ™¯é¢œè‰²ï¼Œå¹¶æŠŠå­æ§ä»¶æ·»åŠ åˆ°å½“å‰ View é‡Œé¢ã€‚</p>
<p data-nodeid="1612">ç„¶åçœ‹ç¬¬ä¸‰æ­¥å¦‚ä½•è®¾ç½®è‡ªåŠ¨å¸ƒå±€çš„çº¦æŸï¼Œå…¶å®ç°ä»£ç å¦‚ä¸‹ã€‚</p>
<pre class="lang-swift" data-nodeid="1613"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">setupConstraints</span><span class="hljs-params">()</span></span> {
    backgroundImageView.snp.makeConstraints {
        $<span class="hljs-number">0</span>.top.leading.trailing.equalToSuperview()
        $<span class="hljs-number">0</span>.bottom.equalToSuperview().offset(-<span class="hljs-type">Spacing</span>.medium)
        $<span class="hljs-number">0</span>.height.equalTo(backgroundImageView.snp.width).multipliedBy(<span class="hljs-number">0.8</span>).priority(<span class="hljs-number">999</span>)
    }
    avatarImageView.snp.makeConstraints {
        $<span class="hljs-number">0</span>.<span class="hljs-keyword">right</span>.equalToSuperview().offset(-<span class="hljs-type">Spacing</span>.medium)
        $<span class="hljs-number">0</span>.bottom.equalToSuperview()
        $<span class="hljs-number">0</span>.height.equalTo(<span class="hljs-number">80</span>)
        $<span class="hljs-number">0</span>.width.equalTo(<span class="hljs-number">80</span>)
    }
    nameLabel.snp.makeConstraints {
        $<span class="hljs-number">0</span>.<span class="hljs-keyword">right</span>.equalTo(<span class="hljs-keyword">self</span>.avatarImageView.snp.<span class="hljs-keyword">left</span>).offset(-<span class="hljs-type">Spacing</span>.medium)
        $<span class="hljs-number">0</span>.centerY.equalTo(<span class="hljs-keyword">self</span>.avatarImageView.snp.centerY)
    }
}
</code></pre>
<p data-nodeid="1614">å…¶ä¸­<code data-backticks="1" data-nodeid="1974">backgroundImageView</code>çš„é¡¶éƒ¨å’Œä¸¤è¾¹éƒ½å»¶å±•åˆ°çˆ¶æ§ä»¶ï¼Œå› ä¸ºåº•éƒ¨éœ€è¦ç•™ç™½æ¥æ˜¾ç¤ºç”¨æˆ·å¤´åƒï¼Œå› æ­¤æ·»åŠ äº†<code data-backticks="1" data-nodeid="1976">medium</code>ä½œä¸ºé—´è·ã€‚èƒŒæ™¯å›¾ç‰‡çš„é•¿å®½æ¯”æ˜¯ 5:4ã€‚</p>
<p data-nodeid="1615"><code data-backticks="1" data-nodeid="1978">avatarImageView</code>ä½äºçˆ¶æ§ä»¶çš„å³ä¸‹è§’ï¼Œå¹¶è®¾å®šé•¿åº¦å’Œå®½åº¦éƒ½ä¸º 80ptã€‚<code data-backticks="1" data-nodeid="1980">nameLabel</code>ä½äº<code data-backticks="1" data-nodeid="1982">avatarImageView</code>çš„å·¦è¾¹ï¼Œå¹¶ä¸ä¹‹æ°´å¹³ã€‚è¿™æ ·æˆ‘ä»¬å°±ä½¿ç”¨ SnapKit å®Œæˆç”¨æˆ·èµ„æ–™ UI çš„å¸ƒå±€äº†ã€‚<br>
æœ€åä¸€éƒ¨åˆ†æ˜¯è°ƒç”¨<code data-backticks="1" data-nodeid="1986">update()</code>æ–¹æ³•æ¥æ›´æ–° UIï¼Œå…¶ä»£ç å¦‚ä¸‹ã€‚</p>
<pre class="lang-swift" data-nodeid="1616"><code data-language="swift"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">update</span><span class="hljs-params">(with viewModel: ListItemViewModel)</span></span> {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> viewModel = viewModel <span class="hljs-keyword">as</span>? <span class="hljs-type">UserProfileListItemViewModel</span> <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span>
    }
    backgroundImageView.kf.setImage(with: viewModel.backgroundImageURL)
    avatarImageView.kf.setImage(with: viewModel.avatarURL)
    nameLabel.text = viewModel.name
}
</code></pre>
<p data-nodeid="4088">å› ä¸º<code data-backticks="1" data-nodeid="4091">UserProfileListItemViewModel</code>å·²ç»ä¸º<code data-backticks="1" data-nodeid="4093">UserProfileListItemView</code>å‡†å¤‡å¥½å‘ˆç°æ‰€éœ€çš„æ‰€æœ‰æ•°æ®ï¼Œå› æ­¤ï¼Œåªè¦ç®€å•çš„èµ‹å€¼å°±å¯ä»¥æ›´æ–° UI äº†ã€‚</p>
<p data-nodeid="4089"><code data-backticks="1" data-nodeid="4095">MomentListItemView</code>çš„ä»£ç ç»“æ„å’Œ<code data-backticks="1" data-nodeid="4097">UserProfileListItemView</code>åŸºæœ¬ä¸€æ ·ï¼Œä½ å¯ä»¥åˆ°æ‹‰å‹¾æ•™è‚²çš„ä»£ç ä»“åº“è¿›è¡ŒæŸ¥çœ‹ã€‚</p>

<h3 data-nodeid="1618">æ€»ç»“</h3>
<p data-nodeid="1619">åœ¨è¿™ä¸€è®²ä¸­ï¼Œæˆ‘ä¸ºä½ ä»‹ç»äº†å¦‚ä½•æ¶æ„å’Œå®ç°ä¸€ä¸ªé€šç”¨çš„åˆ—è¡¨ UI æ¨¡å—ï¼Œæœ‰äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬æŒ‰ç…§ä»¥ä¸‹è¿™å‡ ä¸ªæ­¥éª¤å°±å¯ä»¥å®Œæˆ UI çš„å¼€å‘äº†ã€‚</p>
<ol data-nodeid="1620">
<li data-nodeid="1621">
<p data-nodeid="1622">åˆå§‹åŒ– UI æ§ä»¶çš„å±æ€§ï¼ŒæŠŠ UI åˆ†è§£æˆä¸åŒçš„å­æ§ä»¶ï¼Œç„¶åé€šè¿‡<code data-backticks="1" data-nodeid="2001">configure()</code>æ¥åˆå§‹åŒ–å„ä¸ªæ§ä»¶å±æ€§ã€‚</p>
</li>
<li data-nodeid="1623">
<p data-nodeid="1624">é…ç½® UI æ§ä»¶çš„æ ·å¼ï¼Œå¦‚é…ç½®èƒŒæ™¯é¢œè‰²ç­‰ï¼Œå¹¶æŠŠå„ä¸ªå­æ§ä»¶æ·»åŠ åˆ°çˆ¶æ§ä»¶é‡Œé¢ã€‚</p>
</li>
<li data-nodeid="1625">
<p data-nodeid="1626">è®¾ç½®è‡ªåŠ¨å¸ƒå±€çš„çº¦æŸï¼Œæ¨èä½¿ç”¨ SnapKit æ¥ç®€åŒ–é…ç½®çº¦æŸçš„å·¥ä½œã€‚</p>
</li>
<li data-nodeid="1627">
<p data-nodeid="1628">é‡å†™<code data-backticks="1" data-nodeid="2006">update(with viewModel: ListItemViewModel)</code>æ–¹æ³•ï¼Œæ ¹æ® ViewModel çš„æ•°æ®æ¥æ›´æ–° UIã€‚å¦‚æœæœ‰æ•°æ®ç»‘å®šï¼Œé‚£ä¹ˆä½¿ç”¨ RxSwift å’Œ RxCocoa æŠŠ ViewModel çš„ Subject å±æ€§ç»‘å®šåˆ° UI æ§ä»¶ä¸Šã€‚å¦‚æœä¸éœ€è¦æ•°æ®ç»‘å®šï¼Œåªéœ€æŠŠ ViewModel å‡†å¤‡å¥½çš„å€¼èµ‹ç»™ UI æ§ä»¶å³å¯ã€‚</p>
</li>
</ol>
<p data-nodeid="1629"><strong data-nodeid="2011">æ€è€ƒé¢˜</strong></p>
<blockquote data-nodeid="1630">
<p data-nodeid="1631">è¯·é—®ä½ ä»¬ä½¿ç”¨è‹¹æœæä¾›çš„è‡ªåŠ¨å¸ƒå±€å—ï¼Ÿå¦‚æœæ˜¯ï¼Œæ˜¯ä½¿ç”¨åŸç”Ÿè¯­æ³•è¿˜æ˜¯ç±»ä¼¼ SnapKit é‚£ç§åº“å‘¢ï¼Ÿæˆ–è€…è¯´ä½¿ç”¨ Texture ç­‰å…¶ä»–éè‹¹æœçš„æ¡†æ¶è¿›è¡Œå¸ƒå±€ï¼Ÿèƒ½åˆ†äº«ä½ çš„ä½¿ç”¨ç»éªŒå—ï¼Ÿ</p>
</blockquote>
<p data-nodeid="1632">å¯ä»¥æŠŠä½ çš„æ€è€ƒå†™åˆ°ç•™è¨€åŒºå“¦ï¼Œä¸‹ä¸€è®²ï¼Œæˆ‘ä¼šä»‹ç»å¦‚ä½•ä½¿ç”¨ç°æœ‰æ¶æ„æ·»åŠ ç‚¹èµåŠŸèƒ½ã€‚</p>
<p data-nodeid="1633"><strong data-nodeid="2017">æºç åœ°å€</strong></p>
<blockquote data-nodeid="1634">
<p data-nodeid="1635" class="">é€šç”¨åˆ—è¡¨ UI çš„æºç åœ°å€ï¼š<br>
<a href="https://github.com/lagoueduCol/iOS-linyongjian/tree/main/Moments/Moments/Foundations/Views?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="2022">https://github.com/lagoueduCol/iOS-linyongjian/tree/main/Moments/Moments/Foundations/Views</a><br>
æœ‹å‹åœˆæ—¶é—´è½´é¡µé¢å®ç°çš„æºç åœ°å€ï¼š<br>
<a href="https://github.com/lagoueduCol/iOS-linyongjian/tree/main/Moments/Moments/Features/Moments/Views?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="2028">https://github.com/lagoueduCol/iOS-linyongjian/tree/main/Moments/Moments/Features/Moments/Views</a></p>
</blockquote>

---

### ç²¾é€‰è¯„è®º

##### **é‘«ï¼š
> æ‚¨å¥½ã€‚æˆ‘æœ‰ä¸ªç–‘é—®ğŸ¤”ï¸ã€‚func setupBindings() { tableView.refreshControl = configure(UIRefreshControl()) { let refreshControl = $0 $0.rx.controlEvent(.valueChanged) .filter { refreshControl.isRefreshing } .bind { [weak self] _ in self?.loadItems() } .disposed(by: disposeBag) }(configureCell: { _, tableView, indexPath, item in let cell = tableView.dequeueReusableCell(withIdentifier: String(describing: type(of: item)), for: indexPath) (cell as? ListItemCell)?.update(with: item) return cell }) viewModel.listItems .bind(to: tableView.rx.items(dataSource: dataSource)) .disposed(by: disposeBag) viewModel.hasError .map { !$0 } .bind(to: errorLabel.rx.isHidden) .disposed(by: disposeBag)}è¿™æ®µä»£ç æ˜¯æ”¾åœ¨BaseTableViewControllerã€‚é‚£å¦‚æœcellä¸­å­˜åœ¨æŸä¸ªbuttonã€‚é‚£è¿™ä¸ªbuttonçš„å“åº”äº‹ä»¶åº”è¯¥å¦‚ä½•å†™ï¼Ÿ

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; Cell é‡Œé¢å­˜åœ¨ button çš„ä¾‹å­å¯ä»¥çœ‹çœ‹ ã€Šç¬¬ 22 è®²| åŠŸèƒ½å®æˆ˜ï¼šå¦‚ä½•ä½¿ç”¨ç°æœ‰æ¶æ„æ·»åŠ ç‚¹èµåŠŸèƒ½ï¼Ÿã€‹é‡Œé¢çš„ç‚¹ç¼€æŒ‰é’®ã€‚

##### **ä¸€ï¼š
> æä¸€äº›å¯ä»¥æ”¹è¿›çš„å§ï¼š1. SnapKit ä¼šè‡ªåŠ¨å¤„ç†translatesAutoresizingMaskIntoConstraintsï¼Œä¸éœ€è¦å•ç‹¬è®¾ç½®ï¼›2. `update(with viewModel: ListItemViewModel)` å¯ä»¥ä½¿ç”¨associatedtype æ¥é¿å…å­ç±» castã€‚

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; è°¢è°¢ä½ çš„å»ºè®®ï¼Œæˆ‘åœ¨ configure é‡Œé¢ä½¿ç”¨äº† translatesAutoresizingMaskIntoConstraints æ˜¯å› ä¸ºåœ¨è¿™ä¸ªæ—¶å€™å¤„ç†çš„æ˜¯ View çš„åˆå§‹åŒ–è¿‡ç¨‹ï¼Œæˆ‘ä¸æƒ³è®©è¿™ä¸ªè¿‡ç¨‹å’Œé…ç½®çº¦æŸçš„è¿‡ç¨‹è¿›è¡Œè€¦åˆï¼Œå› ä¸º View åˆå§‹åŒ–çš„æ—¶å€™å¹¶ä¸çŸ¥é“åé¢ä¼šä½¿ç”¨ SanpKit æ¥é…ç½®çº¦æŸã€‚æˆ‘åœ¨å†™ä»£ç çš„æ—¶å€™åå‘äºæ‰€æœ‰æ¨¡å—éƒ½è§£è€¦åˆï¼Œä¸ç›¸äº’ä¾èµ–ã€‚ä½†æ˜¯å¦‚æœæ•´ä¸ªé¡¹ç›®éƒ½è§„å®šå¥½ä½¿ç”¨ SnapKitï¼Œé‚£ä¹ˆè¿™ä¸€å¥ç¡®å®å¯ä»¥çœæ‰çš„ã€‚ç¬¬äºŒä¸ªå»ºè®®å¾ˆå®ç”¨å‘€ï¼Œæˆ‘æœ‰ç©ºå†è¯•è¯•ï¼Œå¦‚æœä½ å·²ç»æœ‰å®ä¾‹ä»£ç ï¼Œéº»çƒ¦æäº¤ä¸ª PR è®©æˆ‘çœ‹çœ‹ï¼Œè°¢è°¢å•¦ã€‚

##### *æ²»ï¼š
> æˆ‘ä»¬ç°åœ¨ä½¿ç”¨Yogaï¼Œæ„Ÿè§‰æ€§èƒ½ä¸Šä¼šæ¯”snapkitå¥½é‚£ä¹ˆç‚¹

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; éå¸¸æ„Ÿè°¢ä½ çš„åˆ†äº«~

##### **æ³½ï¼š
> è€å¸ˆï¼Œ åœ¨swiftä¸­ï¼Œä½¿ç”¨structå’Œclassçš„åœºæ™¯æ˜¯ä»€ä¹ˆ

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; è¿™ä¸ªé—®é¢˜æœ‰ç‚¹å¤§å‘€ï¼Œæˆ‘å»ºè®®ä½ å¤šçœ‹çœ‹ä¸åŒçš„æ–‡ç« æ¥æ·±å…¥äº†è§£ã€‚åœ¨è¿™é‡Œæˆ‘åªèƒ½ç»™ä¸€äº›ç®€å•çš„å»ºè®®ï¼Œä¾‹å¦‚ Struct éå¸¸æ—¶å€™ç”¨æ¥å­˜æ”¾ç®€å•ç±»å‹çš„æ•°æ®ï¼Œè€Œä¸”çº¿ç¨‹å®‰å…¨çš„ï¼Œä¸éœ€è¦å†è¢«ç»§æ‰¿çš„æ•°æ®ã€‚å‡å¦‚ä½ ä¸€æ—¶å€™æ— æ³•é€‰æ‹©ï¼Œé‚£å¯ä»¥é€‰é€‰æ‹© structï¼Œæœ‰éœ€è¦çš„æ—¶å€™å†æ”¹æˆ classï¼Œä¾‹å¦‚ä½ ä¸æƒ³ä½¿ç”¨ mutatingã€‚

##### **0520ï¼š
> ä¸ºä»€ä¹ˆTableViewæ¯ä¸€é¡¹cellä¸ç”¨rxswiftç»‘å®šå‘¢

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; æœ‰çš„å‘€ï¼Œå°è£…åœ¨ BaseTableViewController çš„ setupBindings() æ–¹æ³•

