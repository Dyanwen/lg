<p data-nodeid="1147" class="">App ä¸Šæ¶æ˜¯äº§å“å‘å±•çš„ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼ŒåŒæ—¶ä¹Ÿæ˜¯äº§å“é•¿è¿œå‘å±•çš„èµ·ç‚¹ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆæ–¹æ³•èƒ½å¸®åŠ©æˆ‘ä»¬æŒç»­åœ°æ”¹å–„äº§å“åŠŸèƒ½ä¸ç”¨æˆ·ä½“éªŒï¼Œå¹¶åˆ¶å®šäº§å“å‘å±•çš„æ–¹å‘ä¸ç›®æ ‡å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç»Ÿè®¡åˆ†ææœåŠ¡ï¼ˆAnalyticsï¼‰ã€‚</p>
<p data-nodeid="1148"><strong data-nodeid="1256">ç»Ÿè®¡åˆ†ææœåŠ¡èƒ½ä¸ºæˆ‘ä»¬æä¾›ç”¨æˆ·äº¤äº’åº¦æŒ‡æ ‡ï¼ˆEngagement Metricsï¼‰ï¼Œè¿™äº›æŒ‡æ ‡åŒ…æ‹¬ç”¨æˆ·ä¼šè¯çš„æ´»è·ƒåº¦ã€æ´»è·ƒçš„è®¾å¤‡ç±»å‹ä»¥åŠç”¨æˆ·ç•™å­˜ç‡ç­‰ã€‚</strong> æœ‰äº†è¿™äº›æŒ‡æ ‡ï¼Œæˆ‘ä»¬å°±èƒ½è¡¡é‡æ¯æ¬¡å‘å¸ƒçš„æ–°åŠŸèƒ½æ˜¯å¦èƒ½æœ‰æ•ˆæé«˜ç”¨æˆ·çš„äº¤äº’é¢‘ç‡ï¼Œä»è€ŒåŠæ—¶è°ƒæ•´äº§å“å‘å±•çš„æ–¹å‘ã€‚</p>
<p data-nodeid="1149">å¸‚é¢ä¸Šæœ‰è®¸å¤šç»Ÿè®¡åˆ†ææœåŠ¡ï¼Œä¸ºäº†æ–¹ä¾¿ä½¿ç”¨å„ç§ä¸åŒçš„æœåŠ¡ï¼Œæˆ‘ä»¬ä¸º Moments App æ¶æ„äº†ä¸€å¥—çµæ´»çš„ç»Ÿè®¡åˆ†ææ¨¡å—ï¼ŒåŒæ—¶ä½¿ç”¨ Firebase ä½œä¸ºä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•æ”¯æŒä¸€ç§ç»Ÿè®¡åˆ†ææœåŠ¡ã€‚ä¹‹æ‰€ä»¥é€‰æ‹© Firebaseï¼Œå…¶ä¸»è¦åŸå› æœ‰å¦‚ä¸‹ä¸‰ä¸ªï¼š</p>
<ol data-nodeid="1150">
<li data-nodeid="1151">
<p data-nodeid="1152">Firebase åŠŸèƒ½é½å…¨ï¼Œé™¤äº†ç»Ÿè®¡åˆ†ææœåŠ¡ä»¥å¤–ï¼Œå‡ ä¹åŒ…å«äº†æˆ‘ä»¬ä¼˜åŒ– App æ‰€éœ€çš„å„ç§æœåŠ¡ï¼Œä¾‹å¦‚å´©æºƒæŠ¥å‘Šã€è¿œç¨‹é…ç½®ä¸é¥æ§åŠŸèƒ½å¼€å…³ã€App åˆ†å‘æœåŠ¡ã€A/B æµ‹è¯•ç­‰ï¼›</p>
</li>
<li data-nodeid="1153">
<p data-nodeid="1154">å…è´¹ç‰ˆçš„ Firebase è¶³å¤Ÿä½¿ç”¨ï¼Œä¸åŠŸèƒ½ç›¸å½“çš„æ”¶è´¹äº§å“ç›¸æ¯”ï¼Œèƒ½çœä¸‹ä¸å°‘é’±ï¼›</p>
</li>
<li data-nodeid="1155">
<p data-nodeid="1156">Firebase é…ç½®æ–¹ä¾¿ï¼Œåªéœ€æ­å»ºä¸€æ¬¡å°±èƒ½é•¿ä¹…ä½¿ç”¨ã€‚</p>
</li>
</ol>
<h3 data-nodeid="1157">é…ç½® Firebase æœåŠ¡</h3>
<p data-nodeid="1158">åœ¨è®²è¿°å¦‚ä½•ä½¿ç”¨ Firebase çš„ç»Ÿè®¡åˆ†ææœåŠ¡å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹å¦‚ä½•ä¸º Moments App é…ç½® Firebase çš„æœåŠ¡ã€‚</p>
<h4 data-nodeid="1159">1. åˆ›å»ºé¡¹ç›®</h4>
<p data-nodeid="1160">é¦–å…ˆï¼Œæˆ‘ä»¬ç™»å½•åˆ° Firebase ç½‘ç«™æ¥æ–°å»ºä¸€ä¸ªé¡¹ç›®ã€‚è¯·æ³¨æ„ï¼Œåœ¨æ–°å»ºçš„æ—¶å€™å¿…é¡»é€‰æ‹©â€œEnable Google Analytics for this projectâ€ï¼ˆä¸ºè¯¥é¡¹ç›®å¯åŠ¨ç»Ÿè®¡åˆ†ææœåŠ¡ï¼‰é€‰é¡¹ï¼Œå¦åˆ™å°†æ²¡åŠæ³•ä½¿ç”¨ A/B æµ‹è¯•ç­‰ä¸€ç³»åˆ—çš„æœåŠ¡ã€‚</p>
<p data-nodeid="1161">ç„¶ååœ¨æ–°é¡¹ç›®é‡Œæ·»åŠ  Appï¼Œæˆ‘çš„åšæ³•æ˜¯ä¸ºå¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒå„è‡ªæ·»åŠ ä¸åŒçš„ Appã€‚ä¸‹å›¾æ¼”ç¤ºäº†å¦‚ä½•æ·»åŠ æµ‹è¯•ç¯å¢ƒçš„ Internal Appã€‚</p>
<p data-nodeid="1162"><img src="https://s0.lgstatic.com/i/image6/M00/41/51/Cgp9HWCrgiGAUFjAAAD2MmgiiDs166.png" alt="Drawing 1.png" data-nodeid="1270"></p>
<p data-nodeid="1163">è¿™é‡Œå…³é”®æ˜¯è¦å¡«å†™æ­£ç¡®çš„ Bundle IDã€‚ä½ å¯ä»¥åˆ°å„ä¸ª Target çš„ xcconfig æ–‡ä»¶é‡Œé¢åˆ†åˆ«æ‰¾åˆ°å®ƒä»¬çš„ Bundle IDï¼Œä¾‹å¦‚åœ¨ InternalTarget.xcconfig æ–‡ä»¶é‡Œé¢æœ‰å¦‚ä¸‹çš„å®šä¹‰ï¼š</p>
<pre class="lang-java" data-nodeid="1164"><code data-language="java">PRODUCT_BUNDLE_IDENTIFIER = com.ibanimatable.moments.internal
</code></pre>
<h4 data-nodeid="1165">2. ä¸‹è½½ Firebase é…ç½®æ–‡ä»¶</h4>
<p data-nodeid="1166">ç¬¬äºŒæ­¥æ˜¯ä¸ºä¸‰ä¸ªç¯å¢ƒçš„ App åˆ†åˆ«ä¸‹è½½ Firebase çš„é…ç½®æ–‡ä»¶ã€‚å½“æˆ‘ä»¬æŠŠä¸‰ä¸ªé…ç½®æ–‡ä»¶ä¸‹è½½å®Œæ¯•åï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¯ä»¥ä½¿ç”¨â€œGoogleService-Info-&lt;ç¯å¢ƒåç§°&gt;.plistâ€çš„å‘½åæ–¹å¼æ¥æ”¹åï¼Œç„¶åæŠŠæ‰€æœ‰çš„é…ç½®æ–‡ä»¶éƒ½æ‹–åˆ° Moments é¡¹ç›®é‡Œé¢ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="1167"><img src="https://s0.lgstatic.com/i/image6/M00/41/51/Cgp9HWCrgi6ACes3AA-s5YKaXBk146.png" alt="Drawing 3.png" data-nodeid="1280"></p>
<p data-nodeid="1168">åŒæ—¶åœ¨å„ä¸ª Target çš„ xcconfig æ–‡ä»¶åˆ†åˆ«æ·»åŠ åå«<code data-backticks="1" data-nodeid="1282">FIREBASE_CONFIG_FILENAME</code>çš„ Build Settingï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre class="lang-java" data-nodeid="1169"><code data-language="java">FIREBASE_CONFIG_FILENAME = GoogleService-Info-Development
</code></pre>
<p data-nodeid="1170">æ¥ç€åœ¨ Build Phases ä¸Šæ·»åŠ â€œCopy Firebase Config Fileâ€æ­¥éª¤çš„é…ç½®ä¿¡æ¯ï¼Œå¹¶è¾“å…¥ä¸‹é¢çš„è„šæœ¬ï¼š</p>
<pre class="lang-java" data-nodeid="1171"><code data-language="java">cp <span class="hljs-string">"${PROJECT_DIR}/Moments/Configurations/Firebase/${FIREBASE_CONFIG_FILENAME}.plist"</span> <span class="hljs-string">"${BUILT_PRODUCTS_DIR}/${FULL_PRODUCT_NAME}/GoogleService-Info.plist"</span>
</code></pre>
<p data-nodeid="1172">å…·ä½“é…ç½®å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="1173"><img src="https://s0.lgstatic.com/i/image6/M00/41/51/Cgp9HWCrgjaAcJ61AA15f4d4K2M666.png" alt="Drawing 4.png" data-nodeid="1288"></p>
<p data-nodeid="1174">æœ‰äº†è¿™ä¸ªæ­¥éª¤çš„é…ç½®ï¼ŒXcode åœ¨æ„å»ºçš„è¿‡ç¨‹ä¸­å°±ä¼šæ‰§è¡Œã€‚å› ä¸ºæ­¥éª¤é…ç½®é‡Œçš„ Shell è„šæœ¬ä¸­ä½¿ç”¨äº† xcconfig é‡Œé¢çš„<code data-backticks="1" data-nodeid="1290">FIREBASE_CONFIG_FILENAME</code>å˜é‡ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æ„å»ºä¸åŒç¯å¢ƒçš„ App æ—¶ï¼ŒXcode ä¼šè‡ªåŠ¨æ‹·è´å¯¹åº”çš„ Firebase é…ç½®æ–‡ä»¶åˆ°ä¸åŒçš„ App é‡Œé¢ï¼Œè¿™æ ·å°±ä½¿å¾—ä¸åŒçš„ App èƒ½æŠŠç”¨æˆ·äº‹ä»¶å‘é€åˆ°ä¸åŒçš„ç»Ÿè®¡åˆ†ææ•°æ®æœåŠ¡ï¼Œè¿›è€Œä¿è¯ç”Ÿäº§ç¯å¢ƒçš„æ•°æ®ä¸ä¼šå—åˆ°æ±¡æŸ“ã€‚</p>
<h4 data-nodeid="1175">3. å®‰è£… Firebase SDK</h4>
<p data-nodeid="1176">ä¸‹è½½å®Œé…ç½®æ–‡ä»¶ä»¥åï¼Œä¸‹ä¸€æ­¥æ˜¯å®‰è£… Firebase SDKã€‚<strong data-nodeid="1300">å®˜æ–¹æ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨ CocoaPods æ¥å®‰è£… Firebase SDK</strong>ã€‚æˆ‘ä»¬åªéœ€è¦æŠŠ Firebase æ·»åŠ åˆ° Podfile å³å¯ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="1177"><code data-language="java">def thirdparty_pods
  pod <span class="hljs-string">'Firebase/Analytics'</span>, <span class="hljs-string">'= 7.0.0'</span>
end
target <span class="hljs-string">'Moments'</span> <span class="hljs-keyword">do</span>
  ...
  thirdparty_pods
  ...
end
</code></pre>
<p data-nodeid="1178">æˆ‘ä»¬é€šè¿‡<code data-backticks="1" data-nodeid="1302">pod</code>å‘½ä»¤æ¥æ·»åŠ ç»Ÿè®¡åˆ†ææœåŠ¡ï¼Œç„¶åæŠŠè¿™äº› Pod é€šè¿‡<code data-backticks="1" data-nodeid="1304">thirdparty_pods</code>å‡½æ•°æ·»åŠ åˆ° Moments target é‡Œé¢ï¼Œæœ€åé‡æ–°æ‰§è¡Œ<code data-backticks="1" data-nodeid="1306">bundle exec pod install</code>å‘½ä»¤å°±èƒ½å®Œæˆ Firebase SDK çš„å®‰è£…äº†ã€‚</p>
<h4 data-nodeid="1179">4. åˆå§‹åŒ– Firebase æœåŠ¡</h4>
<p data-nodeid="1180">å®‰è£…å®Œ Firebase SDK åï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨ App é‡Œé¢è¿›è¡Œåˆå§‹åŒ– Firebase æœåŠ¡ï¼Œåªéœ€è¦ä¸¤æ­¥ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1181"><code data-language="swift"><span class="hljs-keyword">import</span> Firebase <span class="hljs-comment">// 1</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AppDelegate</span>: <span class="hljs-title">UIResponder</span>, <span class="hljs-title">UIApplicationDelegate</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">application</span><span class="hljs-params">(<span class="hljs-number">_</span> application: UIApplication,
                     didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: <span class="hljs-keyword">Any</span>]?)</span></span> -&gt; <span class="hljs-type">Bool</span> {
        <span class="hljs-type">FirebaseApp</span>.configure() <span class="hljs-comment">// 2</span>
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p data-nodeid="1182">ç¬¬ä¸€æ­¥æ˜¯é€šè¿‡<code data-backticks="1" data-nodeid="1313">import Firebase</code>è¯­å¥æ¥å¼•å…¥ Firebase åº“ï¼Œç¬¬äºŒæ­¥æ˜¯åœ¨<code data-backticks="1" data-nodeid="1315">application(_:didFinishLaunchingWithOptions:)</code>å‡½æ•°é‡Œè°ƒç”¨<code data-backticks="1" data-nodeid="1317">FirebaseApp.configure()</code> å‡½æ•°æ¥å¯åŠ¨ Firebase æœåŠ¡ã€‚</p>
<p data-nodeid="1183">å¥½äº†ï¼Œè‡³æ­¤æˆ‘ä»¬å°±ä¸º Moments App é…ç½®å¥½ Firebase æœåŠ¡äº†ã€‚</p>
<h3 data-nodeid="1184">ç»Ÿè®¡åˆ†ææ¨¡å—</h3>
<p data-nodeid="1185">ä¸‹é¢æˆ‘ä»¬ä»¥ Moments App ä¸ºä¾‹å­ï¼Œçœ‹çœ‹å¦‚ä½•æ¶æ„ä¸å®ç°ä¸€ä¸ªçµæ´»çš„ç»Ÿè®¡åˆ†ææ¨¡å—ä»¥åŠå¦‚ä½•ä½¿ç”¨è¯¥æ¨¡å—ã€‚</p>
<h4 data-nodeid="1186">1. ç»Ÿè®¡åˆ†ææ¨¡å—çš„æ¶æ„ä¸å®ç°</h4>
<p data-nodeid="1187">é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹ç»Ÿè®¡åˆ†ææ¨¡å—çš„æ¶æ„å›¾ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p data-nodeid="1188"><img src="https://s0.lgstatic.com/i/image6/M00/41/51/Cgp9HWCrglCAZTKOAAM0NmFucJo862.png" alt="Drawing 6.png" data-nodeid="1328"></p>
<p data-nodeid="1189">è¿™é‡Œæˆ‘ä»¬ä»å³å¾€å·¦çœ‹ï¼Œæ ¹æ®ä¾èµ–å…³ç³»ï¼Œ<strong data-nodeid="1334">ç»Ÿè®¡åˆ†ææ¨¡å—ç”±ç”¨æˆ·æ´»åŠ¨äº‹ä»¶ï¼ˆEventï¼‰ã€äº‹ä»¶è·Ÿè¸ªæä¾›è€…ï¼ˆProviderï¼‰å’Œäº‹ä»¶è·Ÿè¸ªæ•°æ®ä»“åº“ï¼ˆRepoï¼‰è¿™ä¸‰éƒ¨åˆ†ç»„æˆ</strong>ã€‚</p>
<p data-nodeid="1190">ä¸‹é¢æˆ‘ä»¬åˆ†åˆ«çœ‹ä¸€ä¸‹å®ƒä»¬çš„å®ç°ã€‚</p>
<p data-nodeid="1191">æ‰€æœ‰çš„äº‹ä»¶ç±»å‹éƒ½éµå¾ªäº†ä¸€ä¸ªåå«<code data-backticks="1" data-nodeid="1337">TrackingEventType</code>çš„ç©ºåè®®ï¼ˆProtocolï¼‰ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1192"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">TrackingEventType</span> </span>{ }
</code></pre>
<p data-nodeid="1193">ç„¶åå°±å¯ä»¥å®šä¹‰è¯¥åè®®çš„å­—ç±»å‹ã€‚æ ¹æ®ç”¨é€”çš„ä¸åŒï¼Œæˆ‘ä»¬æŠŠäº‹ä»¶åˆ†æˆä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul data-nodeid="1194">
<li data-nodeid="1195">
<p data-nodeid="1196"><code data-backticks="1" data-nodeid="1340">ScreenviewsTrackingEvent</code>ï¼Œç”¨äºè®°å½•é¡µé¢äº‹ä»¶ï¼›</p>
</li>
<li data-nodeid="1197">
<p data-nodeid="1198"><code data-backticks="1" data-nodeid="1342">ActionTrackingEventType</code>ï¼Œç”¨äºè®°å½•è¡Œä¸ºäº‹ä»¶ï¼Œä¾‹å¦‚ç‚¹å‡»äº†æŸä¸ªæŒ‰é’®ï¼›</p>
</li>
<li data-nodeid="1199">
<p data-nodeid="1200"><code data-backticks="1" data-nodeid="1344">TrackingEvent</code>ï¼Œç”¨äºè®°å½•é€šç”¨çš„äº‹ä»¶ã€‚</p>
</li>
</ul>
<p data-nodeid="1201">æ¥ç€æˆ‘ä»¬å®šä¹‰äº†<code data-backticks="1" data-nodeid="1347">TrackingProvider</code>åè®®æ¥å‘é€äº‹ä»¶ã€‚è¯¥åè®®å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•æ¥åˆ†åˆ«å‘é€ä¸åŒçš„äº‹ä»¶ï¼Œå…·ä½“å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1202"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">TrackingProvider</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackScreenviews</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackAction</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackEvent</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span>
}
</code></pre>
<p data-nodeid="1203">å…¶ä¸­ï¼Œ<code data-backticks="1" data-nodeid="1350">trackScreenviews()</code>ç”¨äºå‘é€é¡µé¢äº‹ä»¶ï¼Œ<code data-backticks="1" data-nodeid="1352">trackAction()</code>è´Ÿè´£å‘é€è¡Œä¸ºäº‹ä»¶ï¼Œè€Œ<code data-backticks="1" data-nodeid="1354">trackEvent()</code>ç”¨äºå‘é€é€šç”¨çš„äº‹ä»¶ã€‚</p>
<p data-nodeid="1204">å½“è¦æ”¯æŒæŸç§ç»Ÿè®¡åˆ†ææœåŠ¡ï¼ˆä¾‹å¦‚ Firebaseï¼‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸º<code data-backticks="1" data-nodeid="1357">TrackingProvider</code>æä¾›ä¸€ä¸ªå…·ä½“çš„å®ç°ç±»å‹ï¼Œæ¯”å¦‚ï¼Œä¸‹é¢å°±æ˜¯<code data-backticks="1" data-nodeid="1359">FirebaseTrackingProvider</code>çš„å…·ä½“å®ç°ï¼š</p>
<pre class="lang-swift" data-nodeid="1205"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">FirebaseTrackingProvider</span>: <span class="hljs-title">TrackingProvider</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackScreenviews</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> event = event <span class="hljs-keyword">as</span>? <span class="hljs-type">ScreenviewsTrackingEvent</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }
        <span class="hljs-type">Analytics</span>.logEvent(<span class="hljs-type">AnalyticsEventSelectContent</span>, parameters: [
                            <span class="hljs-type">AnalyticsParameterScreenName</span>: event.screenName,
                            <span class="hljs-type">AnalyticsParameterScreenClass</span>: event.screenClass])
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackAction</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> event = event <span class="hljs-keyword">as</span>? <span class="hljs-type">FirebaseActionTrackingEvent</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }
        <span class="hljs-type">Analytics</span>.logEvent(<span class="hljs-type">AnalyticsEventSelectContent</span>, parameters: event.parameters)
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackEvent</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
        <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> event = event <span class="hljs-keyword">as</span>? <span class="hljs-type">TrackingEvent</span> <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span>
        }
        <span class="hljs-type">Analytics</span>.logEvent(event.name, parameters: event.parameters)
    }
}
</code></pre>
<p data-nodeid="1206"><code data-backticks="1" data-nodeid="1361">FirebaseTrackingProvider</code>éµå¾ªäº†<code data-backticks="1" data-nodeid="1363">TrackingProvider</code>åè®®ï¼Œå¹¶å®ç°äº†<code data-backticks="1" data-nodeid="1365">trackScreenviews()</code>ã€<code data-backticks="1" data-nodeid="1367">trackAction()</code>å’Œ<code data-backticks="1" data-nodeid="1369">trackEvent()</code>ä¸‰ä¸ªæ–¹æ³•ã€‚åœ¨è¿™äº›æ–¹æ³•é‡Œé¢ï¼Œéƒ½æ˜¯é€šè¿‡<code data-backticks="1" data-nodeid="1371">guard</code>è¯­å¥æ¥æ£€æŸ¥è¾“å…¥ç±»å‹æ˜¯å¦æ­£ç¡®ï¼Œå¹¶é€šè¿‡ Firebase SDK æ‰€æä¾›çš„<code data-backticks="1" data-nodeid="1373">Analytics.logEvent()</code>æ–¹æ³•æ¥å‘é€äº‹ä»¶ã€‚</p>
<p data-nodeid="1207">å‡å¦‚æˆ‘ä»¬éœ€è¦æ”¯æŒæ–°çš„ç»Ÿè®¡åˆ†ææœåŠ¡æ—¶ï¼Œå°±å¯ä»¥ä¸ºè¯¥æœåŠ¡æä¾›ä¸€ä¸ªéµå¾ª<code data-backticks="1" data-nodeid="1376">TrackingProvider</code>åè®®çš„å®ç°ç±»å‹ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬æ”¯æŒ Mixpanel æ—¶ï¼Œå°±å¯å®ç°ä¸€ä¸ªåå«<code data-backticks="1" data-nodeid="1378">MixpanelTrackingProvider</code>çš„ç»“æ„ä½“ã€‚</p>
<p data-nodeid="1208">æœ‰äº†<code data-backticks="1" data-nodeid="1381">TrackingProvider</code>çš„å®ä¾‹ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ Repo æ¥ç®¡ç†å®ƒä»¬ã€‚è¿™é‡Œæˆ‘ä»¬ä¸€èµ·çœ‹ä¸€ä¸‹<code data-backticks="1" data-nodeid="1383">TrackingRepoType</code>åè®®å’Œå®ƒçš„å®ç°ç±»å‹<code data-backticks="1" data-nodeid="1385">TrackingRepo</code>ã€‚</p>
<p data-nodeid="1209"><code data-backticks="1" data-nodeid="1387">TrackingRepoType</code>çš„å®ç°å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1210"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">TrackingRepoType</span> </span>{
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">register</span><span class="hljs-params">(trackingProvider: TrackingProvider)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackScreenviews</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackAction</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span>
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackEvent</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span>
}
</code></pre>
<p data-nodeid="1529">è¯¥åè®®å®šä¹‰äº†<code data-backticks="1" data-nodeid="1532">register(trackingProvider:)</code>æ–¹æ³•æ¥æ³¨å†Œå„ç§<code data-backticks="1" data-nodeid="1534">TrackingProvider</code>ï¼Œç„¶åè¿˜å®šä¹‰äº†ä¸‰ä¸ªæ–¹æ³•æ¥å‘é€ä¸åŒç±»å‹çš„äº‹ä»¶ã€‚</p>
<p data-nodeid="1530"><code data-backticks="1" data-nodeid="1536">TrackingRepo</code>çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>

<pre class="lang-swift" data-nodeid="1212"><code data-language="swift"><span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TrackingRepo</span>: <span class="hljs-title">TrackingRepoType</span> </span>{
    <span class="hljs-keyword">static</span> <span class="hljs-keyword">let</span> shared: <span class="hljs-type">TrackingRepo</span> = .<span class="hljs-keyword">init</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> providers = [<span class="hljs-type">TrackingProvider</span>]()
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">init</span>() { }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">register</span><span class="hljs-params">(trackingProvider: TrackingProvider)</span></span> {
        providers.append(trackingProvider)
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackScreenviews</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
        providers.forEach { $<span class="hljs-number">0</span>.trackScreenviews(event) }
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackAction</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
        providers.forEach { $<span class="hljs-number">0</span>.trackAction(event) }
    }
    <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackEvent</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
        providers.forEach { $<span class="hljs-number">0</span>.trackEvent(event) }
    }
}
</code></pre>
<p data-nodeid="1213"><code data-backticks="1" data-nodeid="1397">TrackingRepo</code>å®ç°äº†<code data-backticks="1" data-nodeid="1399">TrackingRepoType</code>åè®®çš„æ‰€æœ‰æ–¹æ³•ï¼Œå…¶ä¸­<code data-backticks="1" data-nodeid="1401">register(trackingProvider:)</code>æ–¹æ³•æŠŠå„ä¸ªæ³¨å†Œçš„<code data-backticks="1" data-nodeid="1403">TrackingProvider</code>çš„å®ä¾‹éƒ½ä¿å­˜åœ¨<code data-backticks="1" data-nodeid="1405">providers</code>å±æ€§é‡Œé¢ï¼Œè€Œ<code data-backticks="1" data-nodeid="1407">trackScreenviews()</code>ã€<code data-backticks="1" data-nodeid="1409">trackAction()</code>å’Œ<code data-backticks="1" data-nodeid="1411">trackEvent()</code>ä¸‰ä¸ªæ–¹æ³•åˆ™åˆ†åˆ«è°ƒç”¨äº†<code data-backticks="1" data-nodeid="1413">providers</code>å±æ€§æ‰€å¯¹åº”çš„æ–¹æ³•ã€‚ä½ å¯ä»¥çœ‹åˆ°ï¼Œå‡å¦‚æˆ‘ä»¬æ³¨å†Œäº†å¤šä¸ªç»Ÿè®¡åˆ†ææœåŠ¡çš„ Providerï¼Œ<code data-backticks="1" data-nodeid="1415">TrackingRepo</code>ä¼šæŠŠæ¯ä¸ªäº‹ä»¶ä¾æ¬¡å‘é€ç»™å„ä¸ªåå°æœåŠ¡ã€‚</p>
<p data-nodeid="1214">åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å®ç°äº†ä¸€å¥—çµæ´»çš„ç»Ÿè®¡åˆ†ææ¨¡å—ã€‚æœ‰äº†å®ƒï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆä¾¿æ·åœ°æ·»åŠ æˆ–è€…æ›¿æ¢ä¸åŒçš„ç»Ÿè®¡åˆ†ææœåŠ¡ã€‚</p>
<h4 data-nodeid="1215">2. ç»Ÿè®¡åˆ†ææ¨¡å—çš„ä½¿ç”¨</h4>
<p data-nodeid="1216">è¦ä½¿ç”¨ç»Ÿè®¡åˆ†ææ¨¡å—ï¼Œéœ€è¦ä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥æ˜¯æ³¨å†Œ<code data-backticks="1" data-nodeid="1422">TrackingProvider</code>çš„å®ä¾‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1217"><code data-language="swift">[<span class="hljs-type">FirebaseTrackingProvider</span>()].forEach {
    <span class="hljs-type">TrackingRepo</span>.shared.register(trackingProvider: $<span class="hljs-number">0</span>)
}
</code></pre>
<p data-nodeid="2302">æˆ‘ä»¬é€šè¿‡è°ƒç”¨<code data-backticks="1" data-nodeid="2305">TrackingRepo</code>çš„<code data-backticks="1" data-nodeid="2307">register</code>æ–¹æ³•æ¥æ³¨å†Œ<code data-backticks="1" data-nodeid="2309">FirebaseTrackingProvider</code>çš„å®ä¾‹ï¼Œè¿™æ ·å°±èƒ½æŠŠäº‹ä»¶å‘é€åˆ° Firebase ç»Ÿè®¡åˆ†ææœåŠ¡äº†ã€‚å¦‚æœæœ‰éœ€è¦ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åŒæ—¶æ³¨å†Œå¤šä¸ªç»Ÿè®¡åˆ†ææœåŠ¡çš„ Providerã€‚</p>
<p data-nodeid="2303">ç¬¬äºŒæ­¥æ˜¯ä½¿ç”¨<code data-backticks="1" data-nodeid="2312">TrackingRepo</code>çš„å®ä¾‹æ¥å‘é€äº‹ä»¶ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†å¦‚ä½•å‘é€é¡µé¢äº‹ä»¶ï¼š</p>

<pre class="lang-swift" data-nodeid="1219"><code data-language="swift">trackingRepo.trackScreenviews(<span class="hljs-type">ScreenviewsTrackingEvent</span>(screenName: <span class="hljs-type">L10n</span>.<span class="hljs-type">Tracking</span>.momentsScreen, screenClass: <span class="hljs-type">String</span>(describing: <span class="hljs-keyword">self</span>)))
</code></pre>
<p data-nodeid="1220">æˆ‘ä»¬é€šè¿‡è°ƒç”¨<code data-backticks="1" data-nodeid="1436">trackingRepo</code>çš„<code data-backticks="1" data-nodeid="1438">trackScreenviews()</code>æ–¹æ³•æ¥å‘é€è¿›å…¥æœ‹å‹åœˆé¡µé¢çš„äº‹ä»¶ã€‚</p>
<h4 data-nodeid="1221">3. ä¸ºä¸åŒç»Ÿè®¡åˆ†ææœåŠ¡è‡ªå®šä¹‰äº‹ä»¶å†…å®¹</h4>
<p data-nodeid="1222">ä¸åŒçš„ç»Ÿè®¡åˆ†ææœåŠ¡æ‰€æ¥æ”¶çš„äº‹ä»¶å†…å®¹å¯èƒ½ä¸ä¸€æ ·ã€‚è¿™é‡Œæˆ‘ä»¬ä»¥ç‚¹èµæŒ‰é’®äº‹ä»¶ä¸ºä¾‹å­çœ‹çœ‹å¦‚ä½•ä¸º Firebase æœåŠ¡è‡ªå®šä¹‰äº‹ä»¶ã€‚</p>
<p data-nodeid="1223">é¦–å…ˆæˆ‘ä»¬çœ‹ä¸€ä¸‹<code data-backticks="1" data-nodeid="1445">LikeActionTrackingEvent</code>çš„å®šä¹‰ï¼š</p>
<pre class="lang-swift" data-nodeid="1224"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">LikeActionTrackingEvent</span>: <span class="hljs-title">ActionTrackingEventType</span> </span>{
    <span class="hljs-keyword">let</span> momentID: <span class="hljs-type">String</span>
    <span class="hljs-keyword">let</span> userID: <span class="hljs-type">String</span>
}
</code></pre>
<p data-nodeid="1225">è¯¥äº‹ä»¶åªæœ‰ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­<code data-backticks="1" data-nodeid="1448">momentID</code>è¡¨ç¤ºç‚¹èµçš„æœ‹å‹åœˆä¿¡æ¯çš„ IDï¼Œè€Œ<code data-backticks="1" data-nodeid="1450">userID</code>è¡¨ç¤ºç‚¹èµç”¨æˆ·çš„ IDã€‚ä¸ºäº†ç‰¹å®šç»™ Firebase ç»Ÿè®¡åˆ†ææœåŠ¡å®šåˆ¶äº‹ä»¶çš„å†…å®¹ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåå«<code data-backticks="1" data-nodeid="1452">FirebaseActionTrackingEvent</code>çš„ç©ºåè®®ï¼š</p>
<pre class="lang-swift" data-nodeid="1226"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">protocol</span> <span class="hljs-title">FirebaseActionTrackingEvent</span>: <span class="hljs-title">ActionTrackingEventType</span> </span>{ }
</code></pre>
<p data-nodeid="1227">ç„¶åç»™<code data-backticks="1" data-nodeid="1455">LikeActionTrackingEvent</code>æä¾›äº†ä¸€ä¸ªç±»å‹æ‰©å±•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<pre class="lang-swift" data-nodeid="1228"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">LikeActionTrackingEvent</span>: <span class="hljs-title">FirebaseActionTrackingEvent</span> </span>{
    <span class="hljs-keyword">var</span> parameters: [<span class="hljs-type">String</span> : <span class="hljs-type">Any</span>] {
        <span class="hljs-keyword">return</span> [
            <span class="hljs-type">AnalyticsParameterItemID</span>: <span class="hljs-string">"moment-id-\(momentID)-user-id-\(userID)"</span>,
            <span class="hljs-type">AnalyticsParameterItemName</span>: <span class="hljs-string">"moment-like"</span>
        ]
    }
}
</code></pre>
<p data-nodeid="1229">è¯¥ç±»å‹æ‰©å±•ä½¿å¾—<code data-backticks="1" data-nodeid="1458">LikeActionTrackingEvent</code>éµå¾ªäº†<code data-backticks="1" data-nodeid="1460">FirebaseActionTrackingEvent</code>åè®®ï¼Œå¹¶ä¸º<code data-backticks="1" data-nodeid="1462">parameters</code>å±æ€§æä¾›äº†ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œåœ¨å®ç°é‡Œé¢ä½¿ç”¨äº†åœ¨ Firebase SDK é‡Œé¢å®šä¹‰çš„ä¸¤ä¸ªå¸¸é‡ï¼š<code data-backticks="1" data-nodeid="1464">AnalyticsParameterItemID</code>å’Œ<code data-backticks="1" data-nodeid="1466">AnalyticsParameterItemName</code>ã€‚å½“æˆ‘ä»¬ä½¿ç”¨äº†è¿™äº›å¸¸é‡æ—¶ï¼ŒFirebase ç»Ÿè®¡åˆ†æåå°å°±ä¼šæŠŠäº‹ä»¶è‡ªåŠ¨æ˜ å°„æˆé€‰æ‹©å†…å®¹çš„ Item ID å’Œåå­—ã€‚</p>
<p data-nodeid="1230">é‚£æä¾›è¿™æ ·ä¸€ä¸ªç±»å‹æ‰©å±•åˆ°åº•æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæˆ‘ä»¬å†çœ‹ä¸€ä¸‹<code data-backticks="1" data-nodeid="1469">FirebaseTrackingProvider</code>é‡Œ<code data-backticks="1" data-nodeid="1471">trackAction</code>æ–¹æ³•çš„å®ç°ã€‚</p>
<pre class="lang-swift" data-nodeid="1231"><code data-language="swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">trackAction</span><span class="hljs-params">(<span class="hljs-number">_</span> event: TrackingEventType)</span></span> {
    <span class="hljs-keyword">guard</span> <span class="hljs-keyword">let</span> event = event <span class="hljs-keyword">as</span>? <span class="hljs-type">FirebaseActionTrackingEvent</span> <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">return</span>
    }
    <span class="hljs-type">Analytics</span>.logEvent(<span class="hljs-type">AnalyticsEventSelectContent</span>, parameters: event.parameters)
}
</code></pre>
<p data-nodeid="1232">åœ¨è¯¥æ–¹æ³•é‡Œé¢ï¼Œæˆ‘ä»¬é€šè¿‡<code data-backticks="1" data-nodeid="1474">guard</code>è¯­å¥æ£€æŸ¥ä¼ é€’è¿›æ¥çš„äº‹ä»¶æ˜¯å¦ä¸º<code data-backticks="1" data-nodeid="1476">FirebaseActionTrackingEvent</code>ç±»å‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œç¨‹åºå°±ç›´æ¥é€€å‡ºäº†ã€‚å¦‚æœæ˜¯ï¼Œå°±è°ƒç”¨<code data-backticks="1" data-nodeid="1478">event.parameters</code>å±æ€§æ¥è·å–äº‹ä»¶çš„å†…å®¹ï¼Œè¿™æ—¶å€™å°±ä¼šè°ƒç”¨ç±»å‹æ‰©å±•é‡Œ<code data-backticks="1" data-nodeid="1480">parameters</code>å±æ€§çš„é»˜è®¤å®ç°ï¼Œç±»å‹æ‰©å±•æ–¹æ³•èƒ½ä¿è¯<code data-backticks="1" data-nodeid="1482">FirebaseTrackingProvider</code>åªå‘é€éµå¾ªäº†<code data-backticks="1" data-nodeid="1484">FirebaseActionTrackingEvent</code>åè®®çš„äº‹ä»¶ç±»å‹ã€‚</p>
<p data-nodeid="1233">å‡å¦‚æˆ‘ä»¬éœ€è¦ä¸ºå…¶ä»–ç»Ÿè®¡åˆ†ææœåŠ¡è‡ªå®šä¹‰äº‹ä»¶çš„å†…å®¹æ—¶ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿä¾‹å¦‚ï¼Œä¸º Mixpanel è‡ªå®šä¹‰äº‹ä»¶ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç å®ç°ï¼š</p>
<pre class="lang-swift" data-nodeid="1234"><code data-language="swift"><span class="hljs-class"><span class="hljs-keyword">extension</span> <span class="hljs-title">LikeActionTrackingEvent</span>: <span class="hljs-title">MixpanelActionTrackingEvent</span> </span>{
    <span class="hljs-keyword">var</span> parameters: [<span class="hljs-type">String</span> : <span class="hljs-type">Any</span>] {
        <span class="hljs-keyword">return</span> [
            <span class="hljs-type">MixPanelEventKey</span>: <span class="hljs-string">"moment-id-\(momentID)-user-id-\(userID)"</span>,
            <span class="hljs-type">MixPanelEventName</span>: <span class="hljs-string">"moment-like"</span>
        ]
    }
}
</code></pre>
<p data-nodeid="3078">é€šè¿‡ç±»å‹æ‰©å±•æ¥éµå¾ªä¸åŒçš„äº‹ä»¶åè®®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆçµæ´»åœ°ä¸ºå„ä¸ªç»Ÿè®¡åˆ†ææœåŠ¡å‘é€ä¸åŒå†…å®¹çš„äº‹ä»¶äº†ã€‚</p>
<p data-nodeid="3079">æœ€åï¼Œæˆ‘ä»¬å†çœ‹ä¸€ä¸‹å¦‚ä½•å‘é€<code data-backticks="1" data-nodeid="3082">LikeActionTrackingEvent</code>äº‹ä»¶ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>

<pre class="lang-swift" data-nodeid="1236"><code data-language="swift">trackingRepo.trackAction(<span class="hljs-type">LikeActionTrackingEvent</span>(momentID: momentID, userID: userID))
</code></pre>
<p data-nodeid="1237"><code data-backticks="1" data-nodeid="1492">trackingRepo</code>ä¼šè‡ªåŠ¨æŠŠäº‹ä»¶å‘é€åˆ°å„ä¸ªæ³¨å†Œçš„ç»Ÿè®¡åˆ†ææœåŠ¡ä¸­ï¼Œå¹¶ä¸”æ ¹æ®<code data-backticks="1" data-nodeid="1494">LikeActionTrackingEvent</code>çš„ç±»å‹æ‰©å±•æ¥å‡†å¤‡ä¸åŒçš„äº‹ä»¶å†…å®¹ã€‚</p>
<h4 data-nodeid="1238">4. Firebase ç»Ÿè®¡åˆ†ææŠ¥å‘Š</h4>
<p data-nodeid="1239">å®Œæˆäº†ä¸Šè¿°çš„å¼€å‘å·¥ä½œåï¼Œæˆ‘ä»¬å°±èƒ½æ”¶é›†ç”¨æˆ·è¡Œä¸ºæ•°æ®äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥åœ¨ Firebase çš„ç»Ÿè®¡åˆ†ææœåŠ¡ä¸ŠæŸ¥çœ‹ç›¸å…³çš„æŠ¥å‘Šã€‚ä¸‹å›¾æ˜¯ Moments App çš„ç»Ÿè®¡åˆ†ææŠ¥å‘Šï¼š<br>
<img src="https://s0.lgstatic.com/i/image6/M00/41/59/CioPOWCrgm-ACTRxAAUh4NIuWcI675.png" alt="Drawing 8.png" data-nodeid="1503"></p>
<p data-nodeid="1240">æˆ‘ä»¬å¯ä»¥åœ¨ Analyics èœå•ä¸‹çœ‹åˆ°å„ç§å„æ ·çš„æŠ¥å‘Šï¼Œå¦‚äº‹ä»¶ç»Ÿè®¡ã€è®¾å¤‡ç±»å‹ä»¥åŠç”¨æˆ·ç•™å­˜ç‡ç­‰ã€‚<strong data-nodeid="1509">è¿™äº›æŠ¥å‘Šèƒ½ååŠ©æˆ‘ä»¬æ›´å‡†ç¡®åœ°åšå‡ºäº§å“å†³å®š</strong>ï¼Œæ¯”å¦‚ï¼Œé€šè¿‡ iOS æ´»è·ƒç‰ˆæœ¬çš„æŠ¥å‘Šèƒ½å¸®æˆ‘ä»¬å†³å®š App æ”¯æŒ iOS çš„æœ€ä½ç‰ˆæœ¬å·ï¼Œå‡å¦‚ç»å¤§éƒ¨åˆ†ç”¨æˆ·éƒ½ä½¿ç”¨ iOS 13 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œæˆ‘ä»¬å°±å¼•å…¥ SwiftUI å’Œ Combine ç­‰æ–°æŠ€æœ¯ã€‚</p>
<p data-nodeid="1241">æˆ‘å»ºè®®ä½ ä»”ç»†é˜…è¯»ç»Ÿè®¡åˆ†ææœåŠ¡çš„ç›¸å…³æ–‡æ¡£ï¼Œå¹¶ç†Ÿæ‚‰å„ç§ç»Ÿè®¡æŠ¥å‘Šä»¥åŠæŒ‡æ ‡ï¼Œä»è€ŒåŠ©åŠ›äº§å“çš„å¢é•¿ã€‚</p>
<h3 data-nodeid="1242">æ€»ç»“</h3>
<p data-nodeid="1243">åœ¨è¿™ä¸€è®²ï¼Œæˆ‘ä»¬è®²è¿°äº†å¦‚ä½•æ¶æ„ä¸€ä¸ªçµæ´»çš„ç»Ÿè®¡åˆ†ææ¨¡å—ï¼Œæœ‰äº†è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¯æŒå’Œæ›¿æ¢ä¸åŒçš„ç»Ÿè®¡åˆ†ææœåŠ¡ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜ä»¥ Firebase ä¸ºä¾‹å­è®²è¿°äº†å¦‚ä½•é…ç½® Firebase çš„ç»Ÿè®¡åˆ†ææœåŠ¡ã€‚æ€»ä¹‹ï¼Œæˆ‘å¸Œæœ›ä½ èƒ½å¥½å¥½åœ°åˆ©ç”¨è¿™äº›åˆ†ææŠ¥å‘Šå’ŒæŒ‡æ ‡ï¼Œè¿›è€ŒåŠ©åŠ›äº§å“çš„å¢é•¿ã€‚</p>
<p data-nodeid="1244"><strong data-nodeid="1516">æ€è€ƒé¢˜</strong></p>
<blockquote data-nodeid="1245">
<p data-nodeid="1246">è¯·å‚ç…§ FirebaseTrackingProvider æ¥ç¼–å†™ä¸€ä¸ªéµå¾ª TrackingProvider åè®®çš„ SystemLogTrackingProvider æ¥æ‰“å°æ—¥å¿—ï¼Œåœ¨è¯¥ Provider é‡Œé€šè¿‡ç³»ç»Ÿæä¾›çš„ os_log() æ–¹æ³•æ¥æ‰“å°äº‹ä»¶ã€‚</p>
</blockquote>
<p data-nodeid="1247">è¯·æŠŠä½ çš„ç­”æ¡ˆå†™åˆ°ç•™è¨€åŒºæˆ–è€…æäº¤ä¸€ä¸ª PR å“¦ã€‚ä¸‹ä¸€è®²æˆ‘å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ Firebase çš„å´©æºƒæŠ¥å‘ŠæœåŠ¡å»è§£å†³çº¿ä¸Šçš„ Bugï¼Œè®°å¾—æŒ‰æ—¶æ¥å¬è¯¾ã€‚</p>
<p data-nodeid="1248"><strong data-nodeid="1524">æºç åœ°å€</strong></p>
<blockquote data-nodeid="1249">
<p data-nodeid="1250" class="">ç»Ÿè®¡åˆ†ææ¨¡å—æºç åœ°å€ï¼š<a href="https://github.com/lagoueduCol/iOS-linyongjian/tree/main/Moments/Moments/Foundations/Analytics?fileGuid=xxQTRXtVcqtHK6j8" data-nodeid="1528">https://github.com/lagoueduCol/iOS-linyongjian/tree/main/Moments/Moments/Foundations/Analytics</a></p>
</blockquote>

---

### ç²¾é€‰è¯„è®º

##### **ä¸´ï¼š
> firebase å›½å†…ä½¿ç”¨ä¸å¤š

##### **æ˜Ÿï¼š
> å¾ˆå¥½çš„æ¶æ„ï¼Œå­¦åˆ°äº†ï¼

##### *æœ‹ï¼š
> Firebase å›½å†…ä¸èƒ½ç”¨å§ã€‚ğŸ˜‚

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; åº”è¯¥æ˜¯å¯ä»¥ç”¨çš„ï¼Œä½†æ˜¯ç®¡ç†é¡µé¢å¯èƒ½è¦æ¢¯å­å“¦ã€‚æ–‡ç« é‡Œè®²äº†ä¸€ä¸ªçµæ´»çš„æ¡†æ¶æ¥æ”¯æŒå’Œæ›¿æ¢ä¸åŒçš„ç»Ÿè®¡åˆ†ææœåŠ¡ï¼Œä½ å¯ä»¥æŒ‰éœ€æ±‚ä½¿ç”¨å…¶ä»–çš„æœåŠ¡å“¦ã€‚

##### *å“¥ï¼š
> Firebaseå›½å†…ä½¿ç”¨æœ‰é—®é¢˜å—ï¼ŸğŸ˜…

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; åº”è¯¥æ˜¯å¯ä»¥ç”¨çš„ï¼Œä½†æ˜¯ç®¡ç†é¡µé¢å¯èƒ½è¦æ¢¯å­å“¦ã€‚æ–‡ç« é‡Œè®²äº†ä¸€ä¸ªçµæ´»çš„æ¡†æ¶æ¥æ”¯æŒå’Œæ›¿æ¢ä¸åŒçš„ç»Ÿè®¡åˆ†ææœåŠ¡ï¼Œä½ å¯ä»¥æŒ‰éœ€æ±‚ä½¿ç”¨å…¶ä»–çš„æœåŠ¡å“¦ã€‚

