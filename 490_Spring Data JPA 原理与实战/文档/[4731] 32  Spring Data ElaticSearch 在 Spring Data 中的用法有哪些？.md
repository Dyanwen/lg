<p data-nodeid="4294" class="">è¿™ä¸€è®²æ˜¯è¿™é—¨ä¸“æ çš„æœ€åä¸€è®²äº†ï¼Œæ­å–œä½ ä¸€ç›´åšæŒåˆ°ç°åœ¨ã€‚</p>


<p data-nodeid="3156">ç›¸ä¿¡åˆ°è¿™é‡Œï¼Œä½ å·²ç»å¯¹ Spring Data JPA æœ‰ä¸€å®šçš„è®¤è¯†äº†ï¼Œé‚£ä¹ˆè¿™ä¸€è®²æˆ‘ä¼šä¸ºä½ æ¼”ç¤º Spring Data ElasticSearch å¦‚ä½•ä½¿ç”¨ï¼Œå¸®åŠ©ä½ æ‰“å¼€æ€è·¯ï¼Œæ„Ÿå— Spring Data çš„æŠ½è±¡å°è£…ã€‚</p>
<p data-nodeid="3157">æˆ‘ä»¬è¿˜æ˜¯ä»ä¸€ä¸ªæ¡ˆä¾‹å…¥æ‰‹ã€‚</p>
<h3 data-nodeid="3158">Spring Data ElasticSearch å…¥é—¨æ¡ˆä¾‹</h3>
<p data-nodeid="3159">Spring Data å’Œ Elasticsearch ç»“åˆçš„æ—¶å€™ï¼Œå”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ç‰ˆæœ¬ä¹‹é—´çš„å…¼å®¹æ€§é—®é¢˜ï¼ŒElasticsearch å’Œ Spring Boot æ˜¯åŒæ—¶å‘å‰å‘å±•çš„ï¼Œè€Œ Elasticsearch çš„å¤§ç‰ˆæœ¬ä¹‹é—´è¿˜å­˜åœ¨ä¸€å®šçš„ API å…¼å®¹æ€§é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»è¦çŸ¥é“è¿™äº›ç‰ˆæœ¬ä¹‹é—´çš„å…³ç³»ï¼Œæˆ‘æ•´ç†äº†ä¸€ä¸ªè¡¨æ ¼ï¼Œå¦‚ä¸‹ã€‚</p>
<table data-nodeid="5053">
<thead data-nodeid="5054">
<tr data-nodeid="5055">
<th align="center" data-nodeid="5057"><strong data-nodeid="5099">Spring Data Release Train</strong></th>
<th data-nodeid="5058"><strong data-nodeid="5103">Spring Data Elasticsearch</strong></th>
<th align="center" data-nodeid="5059"><strong data-nodeid="5107">Elasticsearch</strong></th>
<th data-nodeid="5060"><strong data-nodeid="5111">Spring Boot</strong></th>
</tr>
</thead>
<tbody data-nodeid="5065">
<tr data-nodeid="5066">
<td align="center" data-nodeid="5067">2020.0.0[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_1" data-nodeid="5116">1</a>]</td>
<td data-nodeid="5068">4.1.x[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_1" data-nodeid="5122">1</a>]</td>
<td align="center" data-nodeid="5069">7.9.3</td>
<td data-nodeid="5070">2.4.x[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_1" data-nodeid="5129">1</a>]</td>
</tr>
<tr data-nodeid="5071">
<td align="center" data-nodeid="5072">Neumann</td>
<td data-nodeid="5073">4.0.x</td>
<td align="center" data-nodeid="5074">7.6.2</td>
<td data-nodeid="5075">2.3.x</td>
</tr>
<tr data-nodeid="5076">
<td align="center" data-nodeid="5077">Moore</td>
<td data-nodeid="5078">3.2.x</td>
<td align="center" data-nodeid="5079">6.8.12</td>
<td data-nodeid="5080">2.2.x</td>
</tr>
<tr data-nodeid="5081">
<td align="center" data-nodeid="5082">Lovelace</td>
<td data-nodeid="5083">3.1.x</td>
<td align="center" data-nodeid="5084">6.2.2</td>
<td data-nodeid="5085">2.1.x</td>
</tr>
<tr data-nodeid="5086">
<td align="center" data-nodeid="5087">Kay[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_2" data-nodeid="5147">2</a>]</td>
<td data-nodeid="5088">3.0.x[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_2" data-nodeid="5153">2</a>]</td>
<td align="center" data-nodeid="5089">5.5.0</td>
<td data-nodeid="5090">2.0.x[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_2" data-nodeid="5160">2</a>]</td>
</tr>
<tr data-nodeid="5091">
<td align="center" data-nodeid="5092">Ingalls[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_2" data-nodeid="5166">2</a>]</td>
<td data-nodeid="5093">2.1.x[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_2" data-nodeid="5172">2</a>]</td>
<td align="center" data-nodeid="5094">2.4.0</td>
<td data-nodeid="5095">1.5.x[<a href="https://docs.spring.io/spring-data/elasticsearch/docs/current/reference/html/#_footnotedef_2" data-nodeid="5179">2</a>]</td>
</tr>
</tbody>
</table>

<p data-nodeid="3208">ç°åœ¨ä½ å¯¹è¿™äº›ç‰ˆæœ¬ä¹‹é—´çš„å…³è”å…³ç³»æœ‰äº†ä¸€å®šå°è±¡ï¼Œç”±äºç‰ˆæœ¬è¶Šæ–°è¶Šä¾¿åˆ©ï¼Œæ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ç›´æ¥é‡‡ç”¨æœ€æ–°çš„ç‰ˆæœ¬ã€‚</p>
<p data-nodeid="3209">æ¥ä¸‹æ¥çœ‹çœ‹è¿™ä¸ªç‰ˆæœ¬æ˜¯æ€ä¹ˆå®Œæˆ Demo æ¼”ç¤ºçš„ã€‚</p>
<p data-nodeid="3210"><strong data-nodeid="3389">ç¬¬ä¸€æ­¥ï¼šåˆ©ç”¨ Helm Chart å®‰è£…ä¸€ä¸ª Elasticsearch é›†ç¾¤ 7.9.3 ç‰ˆæœ¬</strong>ï¼Œæ‰§è¡Œå‘½ä»¤å¦‚ä¸‹ã€‚</p>
<pre class="lang-java" data-nodeid="3211"><code data-language="java"><span class="hljs-number">1</span>. helm2 repo add elastic https:<span class="hljs-comment">//helm.elastic.co</span>
<span class="hljs-number">2</span>. helm2 install --name myelasticsearch elastic/elasticsearch&nbsp; --set imageTag=<span class="hljs-number">7.9</span><span class="hljs-number">.3</span>
</code></pre>
<p data-nodeid="3212">å®‰è£…å®Œä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ã€‚</p>
<p data-nodeid="5929" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/56/CgpVE1_tdLyAY0UfAAH31rOGV0o472.png" alt="Drawing 0.png" data-nodeid="5932"></p>

<p data-nodeid="3214">è¿™ä»£è¡¨æˆ‘ä»¬å®‰è£…æˆåŠŸã€‚</p>
<p data-nodeid="3215">ç”±äº ElasticSearch æ˜¯å‘å±•å˜åŒ–çš„ï¼Œæ‰€ä»¥å®ƒçš„å®‰è£…æ–¹å¼ä½ å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://github.com/elastic/helm-charts/tree/master/elasticsearch" data-nodeid="3398">https://github.com/elastic/helm-charts/tree/master/elasticsearch</a></p>
<p data-nodeid="3216">ç„¶åæˆ‘ä»¬åˆ©ç”¨ k8s é›†ç¾¤ç«¯å£æ˜ å°„åˆ°æœ¬åœ°ï¼Œå°±å¯ä»¥å¼€å§‹æµ‹è¯•äº†ã€‚</p>
<pre class="lang-java" data-nodeid="3217"><code data-language="java">~ â¯â¯â¯ kubectl port-forward svc/elasticsearch-master <span class="hljs-number">9200</span>:<span class="hljs-number">9200</span> -n my-namespace
Forwarding from <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">9200</span> -&gt; <span class="hljs-number">9200</span>
Forwarding from [::<span class="hljs-number">1</span>]:<span class="hljs-number">9200</span> -&gt; <span class="hljs-number">9200</span>
</code></pre>
<p data-nodeid="3218"><strong data-nodeid="3404">ç¬¬äºŒæ­¥ï¼šåœ¨ gradle.build é‡Œé¢é…ç½® Spring Data ElasticSearch ä¾èµ–çš„ Jar åŒ…</strong>ã€‚</p>
<p data-nodeid="3219">æˆ‘ä»¬ä¾èµ– Spring Boot 2.4.1 ç‰ˆæœ¬ï¼Œå®Œæ•´çš„ gradle.build æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="3220"><code data-language="java">plugins {
   id <span class="hljs-string">'org.springframework.boot'</span> version <span class="hljs-string">'2.4.1'</span>
   id <span class="hljs-string">'io.spring.dependency-management'</span> version <span class="hljs-string">'1.0.10.RELEASE'</span>
   id <span class="hljs-string">'java'</span>
}
group = <span class="hljs-string">'com.example.data.es'</span>
version = <span class="hljs-string">'0.0.1-SNAPSHOT'</span>
sourceCompatibility = <span class="hljs-string">'1.8'</span>
configurations {
   compileOnly {
      extendsFrom annotationProcessor
   }
}
repositories {
   mavenCentral()
}
dependencies {
   implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-actuator'</span>
   implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-data-elasticsearch'</span>
   implementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-web'</span>
   compileOnly <span class="hljs-string">'org.projectlombok:lombok'</span>
   developmentOnly <span class="hljs-string">'org.springframework.boot:spring-boot-devtools'</span>
   runtimeOnly <span class="hljs-string">'io.micrometer:micrometer-registry-prometheus'</span>
   annotationProcessor <span class="hljs-string">'org.projectlombok:lombok'</span>
   testImplementation <span class="hljs-string">'org.springframework.boot:spring-boot-starter-test'</span>
}
test {
   useJUnitPlatform()
}
</code></pre>
<p data-nodeid="3221"><strong data-nodeid="3410">ç¬¬ä¸‰æ­¥ï¼šæ–°å»ºä¸€ä¸ªç›®å½•ï¼Œç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæ–¹ä¾¿æˆ‘ä»¬æµ‹è¯•</strong>ã€‚</p>
<p data-nodeid="6681" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/55/Cip5yF_tdMaAbP03AAD7ix9soGU430.png" alt="Drawing 1.png" data-nodeid="6684"></p>

<p data-nodeid="3223"><strong data-nodeid="3418">ç¬¬å››æ­¥ï¼šåœ¨ application.properties é‡Œé¢æ–°å¢ es çš„è¿æ¥åœ°å€ï¼Œè¿æ¥æœ¬åœ°çš„ Elasticsearch</strong>ã€‚</p>
<pre class="lang-java" data-nodeid="3224"><code data-language="java">spring.data.elasticsearch.client.reactive.endpoints=<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">9200</span>
</code></pre>
<p data-nodeid="3225"><strong data-nodeid="3423">ç¬¬äº”æ­¥ï¼šæ–°å¢ä¸€ä¸ª ElasticSearchConfiguration çš„é…ç½®æ–‡ä»¶ï¼Œä¸»è¦æ˜¯ä¸ºäº†å¼€å¯æ‰«æçš„åŒ…</strong>ã€‚</p>
<pre class="lang-java" data-nodeid="3226"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo.es;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.data.elasticsearch.repository.config.EnableElasticsearchRepositories;
<span class="hljs-comment">//åˆ©ç”¨@EnableElasticsearchRepositoriesæ³¨è§£æŒ‡å®šElasticsearchç›¸å…³çš„Repositoryçš„åŒ…è·¯å¾„åœ¨å“ªé‡Œ</span>
<span class="hljs-meta">@EnableElasticsearchRepositories(basePackages = "com.example.data.es.demo.es")</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElasticSearchConfiguration</span> </span>{
}
</code></pre>
<p data-nodeid="3227"><strong data-nodeid="3428">ç¬¬å…­æ­¥ï¼šæˆ‘ä»¬æ–°å¢ä¸€ä¸ª Topic çš„ Documentï¼Œå®ƒç±»ä¼¼ JPA é‡Œé¢çš„å®ä½“ï¼Œç”¨æ¥ä¿å­˜å’Œè¯»å– Topic çš„æ•°æ®</strong>ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="3228"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo.es;
<span class="hljs-keyword">import</span> lombok.Builder;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> lombok.ToString;
<span class="hljs-keyword">import</span> org.springframework.data.annotation.Id;
<span class="hljs-keyword">import</span> org.springframework.data.elasticsearch.annotations.Document;
<span class="hljs-keyword">import</span> org.springframework.data.elasticsearch.annotations.Field;
<span class="hljs-keyword">import</span> org.springframework.data.elasticsearch.annotations.FieldType;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-meta">@Document(indexName = "topic")</span>
<span class="hljs-meta">@ToString(callSuper = true)</span>
<span class="hljs-comment">//è®ºå›ä¸»é¢˜ä¿¡æ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Topic</span> </span>{
    <span class="hljs-meta">@Id</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String title;
    <span class="hljs-meta">@Field(type = FieldType.Nested, includeInParent = true)</span>
    <span class="hljs-keyword">private</span> List&lt;Author&gt; authors;
}
<span class="hljs-keyword">package</span> com.example.data.es.demo.es;
<span class="hljs-keyword">import</span> lombok.Builder;
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-comment">//ä½œè€…ä¿¡æ¯</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Author</span> </span>{
    <span class="hljs-keyword">private</span> String name;
}
</code></pre>
<p data-nodeid="3229"><strong data-nodeid="3433">ç¬¬ä¸ƒæ­¥ï¼šæ–°å»ºä¸€ä¸ª Elasticsearch çš„ Repositoryï¼Œç”¨æ¥å¯¹ Elasticsearch ç´¢å¼•çš„å¢åˆ æ”¹æŸ¥</strong>ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="3230"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo.es;
<span class="hljs-keyword">import</span> org.springframework.data.elasticsearch.repository.ElasticsearchRepository;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-comment">//ç±»ä¼¼JPAä¸€æ ·ç›´æ¥æ“ä½œTopicç±»å‹çš„ç´¢å¼•</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">TopicRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ElasticsearchRepository</span>&lt;<span class="hljs-title">Topic</span>,<span class="hljs-title">Long</span>&gt; </span>{
    <span class="hljs-function">List&lt;Topic&gt; <span class="hljs-title">findByTitle</span><span class="hljs-params">(String title)</span></span>;
}
</code></pre>
<p data-nodeid="3231"><strong data-nodeid="3437">ç¬¬å…«æ­¥: æ–°å»ºä¸€ä¸ª Controllerï¼Œå¯¹ Topic ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢å’Œæ·»åŠ ã€‚</strong></p>
<pre class="lang-java" data-nodeid="3232"><code data-language="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TopicController</span> </span>{
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TopicRepository topicRepository;
    <span class="hljs-comment">//æŸ¥è¯¢topicçš„æ‰€æœ‰ç´¢å¼•</span>
    <span class="hljs-meta">@GetMapping("topics")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;Topic&gt; <span class="hljs-title">query</span><span class="hljs-params">(<span class="hljs-meta">@Param("title")</span> String title)</span> </span>{
        <span class="hljs-keyword">return</span> topicRepository.findByTitle(title);
    }
    <span class="hljs-comment">//ä¿å­˜ topicç´¢å¼•</span>
    <span class="hljs-meta">@PostMapping("topics")</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Topic <span class="hljs-title">create</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Topic topic)</span> </span>{
        <span class="hljs-keyword">return</span> topicRepository.save(topic);
    }
}
</code></pre>
<p data-nodeid="3233"><strong data-nodeid="3442">ç¬¬ä¹æ­¥ï¼šå‘é€ä¸€ä¸ªæ·»åŠ å’ŒæŸ¥è¯¢çš„è¯·æ±‚æµ‹è¯•ä¸€ä¸‹</strong>ã€‚</p>
<p data-nodeid="3234">æˆ‘ä»¬å‘é€ä¸‰ä¸ª POST è¯·æ±‚ï¼Œæ·»åŠ ä¸‰æ¡ç´¢å¼•ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="3235"><code data-language="java">POST /topics HTTP/<span class="hljs-number">1.1</span>
Host: <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">8080</span>
Content-Type: application/json
Cache-Control: no-cache
Postman-Token: d9cc1f6c-<span class="hljs-number">24</span>dd-<span class="hljs-number">17f</span>f-f2e8-<span class="hljs-number">3063f</span>a6b86fc
{
    <span class="hljs-string">"title"</span>:<span class="hljs-string">"jack"</span>,
    <span class="hljs-string">"id"</span>:<span class="hljs-number">2</span>,
    <span class="hljs-string">"authors"</span>:[{
        <span class="hljs-string">"name"</span>:<span class="hljs-string">"jk1"</span>
        },{
        <span class="hljs-string">"name"</span>:<span class="hljs-string">"jk2"</span>
        }]
}
</code></pre>
<p data-nodeid="3236">ç„¶åå‘é€ä¸€ä¸ª get è¯·æ±‚ï¼Œè·å¾—æ ‡é¢˜æ˜¯ jack çš„ç´¢å¼•ï¼Œå¦‚ä¸‹é¢è¿™è¡Œä»£ç æ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="3237"><code data-language="java">GET http:<span class="hljs-comment">//127.0.0.1:8080/topics?title=jack</span>
</code></pre>
<p data-nodeid="3238">å¾—åˆ°å¦‚ä¸‹ç»“æœã€‚</p>
<pre class="lang-java" data-nodeid="3239"><code data-language="java">GET http:<span class="hljs-comment">//127.0.0.1:8080/topics?title=jack</span>
HTTP/<span class="hljs-number">1.1</span> <span class="hljs-number">200</span>&nbsp;
Content-Type: application/json
Transfer-Encoding: chunked
Date: Wed, <span class="hljs-number">30</span> Dec <span class="hljs-number">2020</span> <span class="hljs-number">15</span>:<span class="hljs-number">12</span>:<span class="hljs-number">16</span> GMT
Keep-Alive: timeout=<span class="hljs-number">60</span>
Connection: keep-alive
[
&nbsp; {
&nbsp; &nbsp; <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
&nbsp; &nbsp; <span class="hljs-string">"title"</span>: <span class="hljs-string">"jack"</span>,
&nbsp; &nbsp; <span class="hljs-string">"authors"</span>: [
&nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-string">"name"</span>: <span class="hljs-string">"jk1"</span>
&nbsp; &nbsp; &nbsp; },
&nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-string">"name"</span>: <span class="hljs-string">"jk2"</span>
&nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; ]
&nbsp; },
&nbsp; {
&nbsp; &nbsp; <span class="hljs-string">"id"</span>: <span class="hljs-number">3</span>,
&nbsp; &nbsp; <span class="hljs-string">"title"</span>: <span class="hljs-string">"jack"</span>,
&nbsp; &nbsp; <span class="hljs-string">"authors"</span>: [
&nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-string">"name"</span>: <span class="hljs-string">"jk1"</span>
&nbsp; &nbsp; &nbsp; },
&nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-string">"name"</span>: <span class="hljs-string">"jk2"</span>
&nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; ]
&nbsp; },
&nbsp; {
&nbsp; &nbsp; <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
&nbsp; &nbsp; <span class="hljs-string">"title"</span>: <span class="hljs-string">"jack"</span>,
&nbsp; &nbsp; <span class="hljs-string">"authors"</span>: [
&nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-string">"name"</span>: <span class="hljs-string">"jk1"</span>
&nbsp; &nbsp; &nbsp; },
&nbsp; &nbsp; &nbsp; {
&nbsp; &nbsp; &nbsp; &nbsp; <span class="hljs-string">"name"</span>: <span class="hljs-string">"jk2"</span>
&nbsp; &nbsp; &nbsp; }
&nbsp; &nbsp; ]
&nbsp; }
]
Response code: <span class="hljs-number">200</span>; Time: <span class="hljs-number">348</span>ms; Content length: <span class="hljs-number">199</span> bytes
Cannot preserve cookies, cookie storage file is included in ignored list:
&gt; /Users/jack/Company/git_hub/spring-data-jpa-guide/<span class="hljs-number">2.3</span>/elasticsearch-data/.idea/httpRequests/http-client.cookies
</code></pre>
<p data-nodeid="3240">è¿™æ—¶ï¼Œä¸€ä¸ªå®Œæ•´çš„ Spring Data Elasticsearch çš„ä¾‹å­å°±æ¼”ç¤ºå®Œäº†ã€‚å…¶å®ä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨ Spring Data Elasticsearch æ¥æ“ä½œ ES ç›¸å…³çš„ API çš„è¯ï¼Œæ¯”æˆ‘ä»¬ç›´æ¥å†™ Http çš„ client è¦ç®€å•å¾ˆå¤šï¼Œå› ä¸ºè¿™é‡Œé¢å¸®æˆ‘ä»¬å°è£…äº†å¾ˆå¤šåŸºç¡€é€»è¾‘ï¼Œçœå»äº†å¾ˆå¤šé‡å¤é€ è½®å­çš„è¿‡ç¨‹ã€‚</p>
<p data-nodeid="3241">å…¶å®æµ‹è¯•ç”¨ä¾‹ä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹ä¸€ä¸‹å†™æ³•ã€‚</p>
<p data-nodeid="3242"><strong data-nodeid="3452">ç¬¬åæ­¥ï¼šElasticsearch Repository çš„æµ‹è¯•ç”¨ä¾‹å†™æ³•</strong>ï¼Œå¦‚ä¸‹é¢çš„ä»£ç å’Œæ³¨é‡Šæ‰€ç¤ºã€‚</p>
<pre class="lang-java" data-nodeid="3243"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo;
<span class="hljs-keyword">import</span> com.example.data.es.demo.es.Author;
<span class="hljs-keyword">import</span> com.example.data.es.demo.es.Topic;
<span class="hljs-keyword">import</span> com.example.data.es.demo.es.TopicRepository;
<span class="hljs-keyword">import</span> org.assertj.core.util.Lists;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.BeforeEach;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.test.context.SpringBootTest;
<span class="hljs-keyword">import</span> org.springframework.test.context.TestPropertySource;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-meta">@SpringBootTest</span>
<span class="hljs-meta">@TestPropertySource(properties = {"logging.level.org.springframework.data.elasticsearch.core=TRACE", "logging.level.org.springframework.data.elasticsearch.client=trace", "logging.level.org.elasticsearch.client=TRACE", "logging.level.org.apache.http=TRACE"})</span><span class="hljs-comment">//æ–°å¢ä¸€äº›é…ç½®ï¼Œ å¼€å¯spring data elastic searchçš„httpçš„è°ƒç”¨è¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹æ—¥å¿—</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ElasticSearchRepositoryTest</span> </span>{
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> TopicRepository topicRepository;
    <span class="hljs-meta">@BeforeEach</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">//        topicRepository.deleteAll(); //å¯ä»¥ç›´æ¥åˆ é™¤æ‰€æœ‰ç´¢å¼•</span>
        Topic topic = Topic.builder().id(<span class="hljs-number">11L</span>).title(<span class="hljs-string">"jacktest"</span>).authors(Lists.newArrayList(Author.builder().name(<span class="hljs-string">"jk1"</span>).build())).build();
        topicRepository.save(topic);<span class="hljs-comment">//é›†æˆæµ‹è¯•ä¿å­˜ç´¢å¼•</span>
        Topic topic1 = Topic.builder().id(<span class="hljs-number">14L</span>).title(<span class="hljs-string">"jacktest"</span>).authors(Lists.newArrayList(Author.builder().name(<span class="hljs-string">"jk1"</span>).build())).build();
        topicRepository.save(topic1);
        Topic topic2 = Topic.builder().id(<span class="hljs-number">15L</span>).title(<span class="hljs-string">"jacktest"</span>).authors(Lists.newArrayList(Author.builder().name(<span class="hljs-string">"jk1"</span>).build())).build();
        topicRepository.save(topic2);<span class="hljs-comment">//ä¿å­˜ç´¢å¼•</span>
    }
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testTopic</span><span class="hljs-params">()</span> </span>{
        Iterable&lt;Topic&gt; topics = topicRepository.findAll();
        topics.forEach(topic1 -&gt; {
            System.out.println(topic1);
        });
        List&lt;Topic&gt; topicList = topicRepository.findByTitle(<span class="hljs-string">"jacktest"</span>);
        topicList.forEach(t -&gt; {
            System.out.println(t);<span class="hljs-comment">//è·å¾—ç´¢å¼•çš„æŸ¥è¯¢ç»“æœ</span>
        });
        List&lt;Topic&gt; topicList2 = topicRepository.findByTitle(<span class="hljs-string">"xxx"</span>);
        topicList2.forEach(t -&gt; {
            System.out.println(t);<span class="hljs-comment">//æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸Šä¸€è®²ä»‹ç»çš„æ–­è¨€æµ‹è¯•</span>
        });
    }
}
</code></pre>
<p data-nodeid="3244">æ¥ç€æˆ‘ä»¬çœ‹ä¸€ä¸‹æµ‹è¯•ç”¨ä¾‹çš„è°ƒç”¨æ—¥å¿—ï¼Œä»æ—¥å¿—å¯ä»¥çœ‹å‡ºï¼Œè°ƒç”¨çš„æ—¶å€™å‘ç”Ÿçš„ Http çš„ PUT è¯·æ±‚ï¼Œæ˜¯ç”¨æ¥åˆ›å»ºå’Œä¿®æ”¹ä¸€ä¸ªç´¢å¼•çš„æ–‡æ¡£çš„ã€‚è¯·çœ‹ä¸‹é¢çš„å›¾ç‰‡ã€‚</p>
<p data-nodeid="7433" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/56/CgpVE1_tdNiAXq0WAAPx9WYUcvE585.png" alt="Drawing 2.png" data-nodeid="7436"></p>

<p data-nodeid="3246" class="">ä»ä¸­ä¹Ÿå¯ä»¥çœ‹å¾—å‡ºæ¥ï¼Œè½¬åŒ–æˆ es çš„ api æŸ¥è¯¢è¯­æ³•ä¹‹åï¼Œå‘é€çš„ post è¯·æ±‚åˆå˜æˆä¸‹å›¾æ˜¾ç¤ºçš„æ ·å­ã€‚</p>
<p data-nodeid="8185" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/55/Cip5yF_tdN6AQ3l9AAPPn8brHa8263.png" alt="Drawing 3.png" data-nodeid="8188"></p>

<p data-nodeid="3248">æ—¥å¿—æ¯”è¾ƒé•¿ï¼Œä½ æœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥æŒ‰ç…§æˆ‘çš„ DEMO å’Œå¼€å¯æ—¥å¿—çš„æ–¹æ³•ï¼Œè‡ªå·±å»åˆ†æä½“ä¼šä¸€ä¸‹ã€‚</p>
<p data-nodeid="3249">ä¸‹é¢æ¥è¯´è¯´ Spring Data ElasticSearch ä¸­å…³é”®çš„å‡ ä¸ªç±»ã€‚</p>
<h3 data-nodeid="3250">Spring Data ElasticSearch å…³é”®çš„ç±»</h3>
<p data-nodeid="3251">é€šè¿‡ä¸Šé¢çš„æ¡ˆä¾‹æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒSpring Data ElasticSearch çš„ç”¨æ³•å…¶å®éå¸¸ç®€å•ï¼Œå¹¶ä¸”æˆ‘ä»¬é€šè¿‡æ—¥å¿—ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œåº•å±‚å®ç°æ˜¯åŸºäº http è¯·æ±‚ï¼Œæ¥æ“ä½œ Elasticsearch çš„ server ä¸­çš„ api è¿›è¡Œçš„ã€‚</p>
<p data-nodeid="3252">é‚£ä¹ˆæˆ‘ä»¬ç®€å•çœ‹ä¸€ä¸‹è¿™ä¸€æ¡†æ¶è¿˜ç»™æˆ‘ä»¬æä¾›äº†å“ªäº› ElasticSearch çš„æ“ä½œæ–¹æ³•ã€‚å’Œåˆ†æ Spring Data JPA ä¸€æ ·ï¼Œçœ‹ä¸€ä¸‹ Repository çš„æ‰€æœ‰å­ç±»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p data-nodeid="8937" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/55/Cip5yF_tdOWAN1p8AAKW4zuYBgc483.png" alt="Drawing 4.png" data-nodeid="8940"></p>

<p data-nodeid="3254">ä»å›¾ä¸­å¯ä»¥çœ‹å¾—å‡ºæ¥ï¼ŒElasticsearchRepository æ˜¯é»˜è®¤çš„ Repository çš„å®ç°ç±»ï¼Œæˆ‘ä»¬å¦‚æœç»§ç»­å¾€ä¸‹é¢çœ‹æºç çš„è¯ï¼Œå°±å¯ä»¥çœ‹åˆ°é‡Œé¢è¿›è¡Œäº†å¾ˆå¤š ES çš„ Http Client æ“ä½œã€‚</p>
<p data-nodeid="3255">åŒæ—¶å†çœ‹ä¸€ä¸‹ Structure è§†å›¾ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<p data-nodeid="9689" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/57/CgpVE1_tdOyAa_qxAARM3eWQpnQ793.png" alt="Drawing 5.png" data-nodeid="9692"></p>

<p data-nodeid="3257">ä»è¿™å¼ å›¾å¯ä»¥çŸ¥é“ï¼ŒElasticsearchRepository é»˜è®¤ç»™æˆ‘ä»¬æä¾›äº† search å’Œ index ç›¸å…³çš„ä¸€äº›æ“ä½œæ–¹æ³•ï¼Œå¹¶ä¸” Spring Data Common é‡Œé¢çš„ä¸€äº›å…¬å…±æ–¹æ³•åŒæ ·é€‚ç”¨ï¼Œè¿™å’Œæˆ‘ä»¬åˆšæ‰æ¼”ç¤ºçš„ Defining Method Query çš„ JPA è¯­æ³•åŒæ ·é€‚ç”¨ï¼Œå¯ä»¥å¤§å¤§å‡è½»æ“ä½œ ES çš„éš¾åº¦ï¼Œæé«˜äº†å¼€å‘çš„æ•ˆç‡ï¼Œç”šè‡³åƒæˆ‘ä»¬æ²¡æœ‰æ¼”ç¤ºåˆ°çš„åˆ†é¡µã€æ’åºã€limit ç­‰åŒæ ·é€‚ç”¨ã€‚</p>
<p data-nodeid="3258">æ‰€ä»¥ä½ ç°åœ¨å­¦åˆ°äº†ä¸€ä¸ªâ€œå¥—è·¯â€ï¼šå’Œ Spring Data JPA ç”¨ç›¸åŒçš„æ€è·¯ï¼Œå°±å¯ä»¥å¾ˆå¿«æŒæ¡ Spring Data Elasticsearch çš„åŸºæœ¬ç”¨æ³•ï¼ŒåŠå…¶å¤§æ¦‚çš„å®ç°æ€è·¯ã€‚</p>
<p data-nodeid="3259">é‚£ä¹ˆå¾ˆå¤šæ—¶å€™åŒä¸€ä¸ªå·¥ç¨‹é‡Œé¢æ—¢æœ‰ JPA åˆæœ‰ Elasticsearchï¼Œåˆè¯¥æ€ä¹ˆå†™å‘¢ï¼Ÿ</p>
<h3 data-nodeid="3260">ESRepository å’Œ JPARepository åŒæ—¶å­˜åœ¨</h3>
<p data-nodeid="3261">è¿™ä¸ªæ—¶å€™åº”è¯¥æ€ä¹ˆåŒºåˆ†ä¸åŒçš„ Repository ç”¨ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p data-nodeid="3262">æˆ‘ä»¬å‡è®¾åˆšæ‰æµ‹è¯•çš„æ ·ä¾‹é‡Œé¢ï¼ŒåŒæ—¶æœ‰å…³äº User ä¿¡æ¯çš„ DB æ“ä½œï¼Œé‚£ä¹ˆçœ‹ä¸€ä¸‹æˆ‘ä»¬çš„é¡¹ç›®åº”è¯¥æ€ä¹ˆå†™ã€‚</p>
<p data-nodeid="3263"><strong data-nodeid="3484">ç¬¬ä¸€æ­¥ï¼šæˆ‘ä»¬å°†å¯¹ Elasticsearch çš„å®ä½“ã€Repository å’Œå¯¹ JPA æ“ä½œçš„å®ä½“ã€Repository æ”¾åˆ°ä¸åŒçš„æ–‡ä»¶é‡Œé¢</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>
<p data-nodeid="10441" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/55/Cip5yF_tdPOAVRMHAACTufgK21A436.png" alt="Drawing 6.png" data-nodeid="10444"></p>

<p data-nodeid="3265"><strong data-nodeid="3492">ç¬¬äºŒæ­¥ï¼šæ–°å¢ JpaConfigurationï¼Œç”¨æ¥æŒ‡å®š Jpa ç›¸å…³çš„ Repository ç›®å½•</strong>ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ã€‚</p>
<pre class="lang-java" data-nodeid="3266"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo.jpa;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.config.EnableJpaRepositories;
<span class="hljs-comment">//åˆ©ç”¨@EnableJpaRepositoriesæŒ‡å®šJPAçš„ç›®å½•æ˜¯"com.example.data.es.demo.jpa"</span>
<span class="hljs-meta">@EnableJpaRepositories(basePackages = "com.example.data.es.demo.jpa")</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JpaConfiguration</span> </span>{
}
</code></pre>
<p data-nodeid="3267"><strong data-nodeid="3497">ç¬¬ä¸‰æ­¥ï¼šæ–°å¢ User å®ä½“ï¼Œç”¨æ¥æ“ä½œç”¨æˆ·åŸºæœ¬ä¿¡æ¯</strong>ã€‚</p>
<pre class="lang-java" data-nodeid="3268"><code data-language="java"><span class="hljs-meta">@Data</span>
<span class="hljs-meta">@Builder</span>
<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@ToString</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy= GenerationType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String email;
}
</code></pre>
<p data-nodeid="3269"><strong data-nodeid="3502">ç¬¬å››æ­¥ï¼šæ–°å¢ UserRepositoryï¼Œç”¨æ¥è¿›è¡Œ DB æ“ä½œ</strong>ã€‚</p>
<pre class="lang-java" data-nodeid="3270"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo.jpa;
<span class="hljs-keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;
<span class="hljs-comment">//å¯¹Userçš„DBæ“ä½œï¼Œæˆ‘ä»¬ç›´æ¥ç»§æ‰¿JpaRepository</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">UserRepository</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">JpaRepository</span>&lt;<span class="hljs-title">User</span>,<span class="hljs-title">Long</span>&gt; </span>{
}
</code></pre>
<p data-nodeid="3271"><strong data-nodeid="3507">ç¬¬äº”æ­¥ï¼šå†™æµ‹è¯•ç”¨ä¾‹è¿›è¡Œæµ‹è¯•</strong>ã€‚</p>
<pre class="lang-java" data-nodeid="3272"><code data-language="java"><span class="hljs-keyword">package</span> com.example.data.es.demo;
<span class="hljs-keyword">import</span> com.example.data.es.demo.jpa.User;
<span class="hljs-keyword">import</span> com.example.data.es.demo.jpa.UserRepository;
<span class="hljs-keyword">import</span> org.junit.jupiter.api.Test;
<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTest;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-comment">//åˆ©ç”¨@DataJpaTestå®Œæˆé›†æˆæµ‹è¯•</span>
<span class="hljs-meta">@DataJpaTest</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserRepositoryTest</span> </span>{
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> UserRepository userRepository;
    <span class="hljs-meta">@Test</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testJpa</span><span class="hljs-params">()</span> </span>{
<span class="hljs-comment">//å¾€æ•°æ®åº“é‡Œé¢ä¿å­˜ä¸€æ¡æ•°æ®ï¼Œå¹¶ä¸”æ‰“å°ä¸€ä¸‹</span>
                userRepository.save(User.builder().id(<span class="hljs-number">1L</span>).name(<span class="hljs-string">"jkdb"</span>).email(<span class="hljs-string">"jack@email.com"</span>).build());
        List&lt;User&gt; users = userRepository.findAll();
        users.forEach(user -&gt; {
            System.out.println(user);
        });
    }
}
</code></pre>
<p data-nodeid="11935">è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹å°±å˜æˆäº†å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ç»“æ„ã€‚</p>
<p data-nodeid="11936" class=""><img src="https://s0.lgstatic.com/i/image2/M01/04/57/CgpVE1_tdQKAAa7zAABNF77hZ_A879.png" alt="Drawing 7.png" data-nodeid="11940"></p>


<p data-nodeid="3274">é‚£ä¹ˆç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼ŒJPA å’Œ Elasticsearch åŒæ—¶å­˜åœ¨ï¼Œå’Œå¯åŠ¨é¡¹ç›®æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œè¿™é‡Œå°±ä¸å†™ Controller äº†ã€‚</p>
<p data-nodeid="3275">æˆ‘ä»¬å†æ•´ä½“è¿è¡Œä¸€ä¸‹è¿™ä¸‰ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¿›è¡Œå®Œæ•´çš„æµ‹è¯•ï¼Œå°±å¯ä»¥çœ‹åˆ°å¦‚ä¸‹ç»“æœã€‚</p>
<p data-nodeid="12689" class="">1.ElasticSearchRepositoryTest æ‰§è¡Œçš„æ—¶å€™ï¼Œé€šè¿‡æ—¥å¿—å¯ä»¥çœ‹åˆ°è¿™æ˜¯å¯¹ ES è¿›è¡Œçš„æ“ä½œï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>

<p data-nodeid="14177" class=""><img src="https://s0.lgstatic.com/i/image/M00/8C/74/Ciqc1F_tdRWABN3HAASErifQeiw553.png" alt="Drawing 8.png" data-nodeid="14180"></p>

<p data-nodeid="13435" class="">2.UserRepositoryTest æ‰§è¡Œçš„æ—¶å€™ï¼Œé€šè¿‡æ—¥å¿—æˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥è¿™æ˜¯å¯¹ DB è¿›è¡Œçš„æ“ä½œï¼Œæ‰€ä»¥è°ä¹Ÿä¸å½±å“è°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p>

<p data-nodeid="14921" class="te-preview-highlight"><img src="https://s0.lgstatic.com/i/image/M00/8C/74/Ciqc1F_tdRyAe_oeAAMw4yV6H4o471.png" alt="Drawing 9.png" data-nodeid="14924"></p>

<p data-nodeid="3284">é€šè¿‡ä¸Šé¢çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒSpring Data å¯¹ JPA ç­‰ SQL å‹çš„ä¼ ç»Ÿæ•°æ®åº“çš„æ”¯æŒæ˜¯éå¸¸å¥½çš„ï¼ŒåŒæ—¶å¯¹ NoSQL å‹çš„éå…³ç³»ç±»æ•°æ®åº“çš„æ”¯æŒä¹Ÿæ¯”è¾ƒå‹å¥½ï¼Œå¤§å¤§é™ä½äº†æ“ä½œä¸åŒæ•°æ®æºçš„éš¾åº¦ï¼Œå¯ä»¥æœ‰æ•ˆæå‡æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-nodeid="3285">æ€»ç»“</h3>
<p data-nodeid="3286">è¿™ä¸€è®²å†…å®¹åˆ°è¿™é‡Œå°±ç»“æŸäº†ï¼Œæˆ‘é€šè¿‡â€œå…¥é—¨å‹â€çš„ Spring Data Elasticsearch æ ·ä¾‹å±•ç¤ºï¼Œè®©ä½ ä½“ä¼šäº† Spring Data å¯¹æ•°æ®æ“ä½œçš„æŠ½è±¡å°è£…çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<p data-nodeid="3287">å¦‚æœä½ ç ”ç©¶å¥½äº†è¿™éƒ¨åˆ†å†…å®¹ï¼Œå…¶å® Spring Data ä¸­çš„å…¶ä»–ç³»åˆ—ä¹Ÿæ˜¯å¯ä»¥é€šç”¨çš„ã€‚è¿™é‡Œæˆ‘åªæ˜¯æœŸæœ›èµ·åˆ°æŠ›ç –å¼•ç‰çš„æ•ˆæœï¼Œå¸Œæœ›ä½ èƒ½æ›´å¥½åœ°æŒæ¡ Spring Data çš„ç²¾é«“ï¼Œå¹¶ä¸”èƒ½æ·±å…¥ç†è§£ JPAã€‚</p>
<p data-nodeid="3288">è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ä¸“æ ä¹Ÿå°†å‘Šä¸€æ®µè½ï¼Œä¸çŸ¥é“è¿™ 32 è®²çš„å†…å®¹å¯¹ä½ æ˜¯å¦æœ‰å¸®åŠ©ï¼Œæˆ‘å¸Œæœ›ä½ å¯ä»¥å›è¿‡å¤´å¥½å¥½å›é¡¾ï¼Œæ›´å¥½åœ°æŒæ¡ Spring Data JPAã€‚</p>
<p data-nodeid="3289">å¦‚æœå¯¹æ­¤æœ‰ä¸æ‡‚çš„åœ°æ–¹ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä»¬ä¸€èµ·æ¢è®¨ï¼Œä¸€èµ·åœ¨è¿™æ¡è·¯ä¸Šä¸æ–­ç²¾è¿›ã€‚å†è§ï¼</p>
<blockquote data-nodeid="3290">
<p data-nodeid="3291">ç‚¹å‡»ä¸‹æ–¹é“¾æ¥æŸ¥çœ‹æºç ï¼ˆä¸å®šæ—¶æ›´æ–°ï¼‰<br>
<a href="https://github.com/zhangzhenhuajack/spring-boot-guide/tree/master/spring-data/spring-data-jpa" data-nodeid="3533">https://github.com/zhangzhenhuajack/spring-boot-guide/tree/master/spring-data/spring-data-jpa</a></p>
</blockquote>

---

### ç²¾é€‰è¯„è®º

##### *ä¸­ï¼š
> ç»ˆäºè¿½å®Œäº†ï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯æ‹‰å‹¾æœ€æœ‰ä»·å€¼çš„è¯¾ã€‚ä½†æ˜¯èƒ½è®²ç‚¹spring-data-commonè®¾è®¡æ€è·¯é‚£æœ€å¥½äº†ğŸ˜€

