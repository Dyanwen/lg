<p data-nodeid="232500">å‰ä¸¤ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬ä» Docker çš„åŸºæœ¬æ“ä½œåˆ° Docker çš„å®ç°åŸç†ï¼Œä¸ºä½ ä¸€æ­¥ä¸€æ­¥æ­å¼€äº† Docker ç¥ç§˜çš„é¢çº±ã€‚ç„¶è€Œç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯å›´ç»•å•ä¸ªå®¹å™¨è¿›è¡Œçš„ï¼Œä½†å½“æˆ‘ä»¬çš„ä¸šåŠ¡è¶Šæ¥è¶Šå¤æ‚æ—¶ï¼Œéœ€è¦å¤šä¸ªå®¹å™¨ç›¸äº’é…åˆï¼Œç”šè‡³éœ€è¦å¤šä¸ªä¸»æœºç»„æˆå®¹å™¨é›†ç¾¤æ‰èƒ½æ»¡è¶³æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ°å®¹å™¨çš„ç¼–æ’å·¥å…·äº†ã€‚å› ä¸ºå®¹å™¨ç¼–æ’å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‰¹é‡åœ°åˆ›å»ºã€è°ƒåº¦å’Œç®¡ç†å®¹å™¨ï¼Œå¸®åŠ©æˆ‘ä»¬è§£å†³è§„æ¨¡åŒ–å®¹å™¨çš„éƒ¨ç½²é—®é¢˜ã€‚</p>



<p data-nodeid="231636">ä»è¿™ä¸€è¯¾æ—¶å¼€å§‹ï¼Œæˆ‘å°†å‘ä½ ä»‹ç» Docker ä¸‰ç§å¸¸ç”¨çš„ç¼–æ’å·¥å…·ï¼šDocker Composeã€Docker Swarm å’Œ Kubernetesã€‚äº†è§£è¿™äº›ç¼–æ’å·¥å…·ï¼Œå¯ä»¥è®©ä½ åœ¨ä¸åŒçš„ç¯å¢ƒä¸­é€‰æ‹©æœ€ä¼˜çš„ç¼–æ’æ¡†æ¶ã€‚</p>
<p data-nodeid="231637">æœ¬è¯¾æ—¶æˆ‘ä»¬å…ˆæ¥å­¦ä¹ ä¸€ä¸ªåœ¨å¼€å‘æ—¶ç»å¸¸ç”¨åˆ°çš„ç¼–æ’å·¥å…·â€”â€”Docker Composeã€‚åˆç†åœ°ä½¿ç”¨ Docker Compose å¯ä»¥æå¤§åœ°å¸®åŠ©æˆ‘ä»¬æå‡å¼€å‘æ•ˆç‡ã€‚é‚£ä¹ˆ Docker Compose ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h3 data-nodeid="231638">Docker Compose çš„å‰ä¸–ä»Šç”Ÿ</h3>
<p data-nodeid="231639">Docker Compose çš„å‰èº«æ˜¯ Orchard å…¬å¸å¼€å‘çš„ Figï¼Œ2014 å¹´ Docker æ”¶è´­äº† Orchard å…¬å¸ï¼Œç„¶åå°† Fig é‡å‘½åä¸º Docker Composeã€‚ç°é˜¶æ®µ Docker Compose æ˜¯ Docker å®˜æ–¹çš„å•æœºå¤šå®¹å™¨ç®¡ç†ç³»ç»Ÿï¼Œå®ƒæœ¬è´¨æ˜¯ä¸€ä¸ª Python è„šæœ¬ï¼Œå®ƒé€šè¿‡è§£æç”¨æˆ·ç¼–å†™çš„ yaml æ–‡ä»¶ï¼Œè°ƒç”¨ Docker API å®ç°åŠ¨æ€çš„åˆ›å»ºå’Œç®¡ç†å¤šä¸ªå®¹å™¨ã€‚</p>
<p data-nodeid="231640">è¦æƒ³ä½¿ç”¨ Docker Composeï¼Œéœ€è¦æˆ‘ä»¬å…ˆå®‰è£…ä¸€ä¸ª Docker Composeã€‚</p>
<h3 data-nodeid="231641">å®‰è£… Docker Compose</h3>
<p data-nodeid="231642">Docker Compose å¯ä»¥å®‰è£…åœ¨ macOSã€ Windows å’Œ Linux ç³»ç»Ÿä¸­ï¼Œå…¶ä¸­åœ¨ macOS å’Œ Windows ç³»ç»Ÿä¸‹ ï¼ŒDocker Compose éƒ½æ˜¯éšç€ Docker çš„å®‰è£…ä¸€èµ·å®‰è£…å¥½çš„ï¼Œè¿™é‡Œå°±ä¸å†è¯¦ç»†ä»‹ç»ã€‚ ä¸‹é¢æˆ‘é‡ç‚¹ä»‹ç»ä¸‹å¦‚ä½•åœ¨ Linux ç³»ç»Ÿä¸‹å®‰è£… Docker Composeã€‚</p>
<h4 data-nodeid="231643">Linux ç³»ç»Ÿä¸‹å®‰è£… Docker Compose</h4>
<p data-nodeid="231644">åœ¨å®‰è£…  Docker Compose ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„æœºå™¨å·²ç»æ­£ç¡®è¿è¡Œäº† Dockerï¼Œå¦‚æœä½ çš„æœºå™¨è¿˜æ²¡æœ‰å®‰è£… Dockerï¼Œè¯·å‚è€ƒ<a href="https://docs.docker.com/engine/install/" data-nodeid="231763">å®˜æ–¹ç½‘ç«™</a>å®‰è£… Dockerã€‚</p>
<p data-nodeid="231645">è¦åœ¨ Linux å¹³å°ä¸Šå®‰è£…  Docker Composeï¼Œæˆ‘ä»¬éœ€è¦åˆ° Compose çš„ Github é¡µé¢ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„å®‰è£…åŒ…ã€‚è¿™é‡Œæˆ‘ä»¥ 1.27.3 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œå¸¦ä½ å®‰è£…ä¸€ä¸ª Docker Composeã€‚</p>
<p data-nodeid="231646">ï¼ˆ1ï¼‰ä½¿ç”¨ curl å‘½ä»¤ï¼ˆä¸€ç§å‘é€ http è¯·æ±‚çš„å‘½ä»¤è¡Œå·¥å…·ï¼‰ä¸‹è½½&nbsp;Docker Compose çš„å®‰è£…åŒ…ï¼š</p>
<pre class="lang-shell" data-nodeid="231647"><code data-language="shell"><span class="hljs-meta">$</span><span class="bash"> sudo curl -L <span class="hljs-string">"https://github.com/docker/compose/releases/download/1.27.3/docker-compose-<span class="hljs-subst">$(uname -s)</span>-<span class="hljs-subst">$(uname -m)</span>"</span> -o /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</span>
</code></pre>
<blockquote data-nodeid="231648">
<p data-nodeid="231649">å¦‚æœä½ æƒ³è¦å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„ Docker Composeï¼Œå°† 1.27.3 æ›¿æ¢ä¸ºä½ æƒ³è¦å®‰è£…çš„ç‰ˆæœ¬å³å¯ã€‚</p>
</blockquote>
<p data-nodeid="231650">ï¼ˆ2ï¼‰ä¿®æ”¹  Docker Compose æ‰§è¡Œæƒé™ï¼š</p>
<pre class="lang-shell" data-nodeid="231651"><code data-language="shell"><span class="hljs-meta">$</span><span class="bash"> sudo chmod +x /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</span>
</code></pre>
<p data-nodeid="231652">ï¼ˆ3ï¼‰æ£€æŸ¥  Docker Compose æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<pre class="lang-plain" data-nodeid="231653"><code data-language="plain">$ docker-compose --version
docker-compose version 1.27.3, build 1110ad01
</code></pre>
<p data-nodeid="233072">å½“æˆ‘ä»¬æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤åï¼Œå¦‚æœ Docker Compose è¾“å‡ºäº†å½“å‰ç‰ˆæœ¬å·ï¼Œå°±è¡¨ç¤ºæˆ‘ä»¬çš„ Docker Compose å·²ç»å®‰è£…æˆåŠŸã€‚ Docker Compose å®‰è£…æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä½¿ç”¨å®ƒäº†ã€‚</p>
<p data-nodeid="233073">åœ¨ä½¿ç”¨  Docker Compose ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦å…ˆç¼–å†™ Docker Compose æ¨¡æ¿æ–‡ä»¶ï¼Œå› ä¸º Docker Compose è¿è¡Œçš„æ—¶å€™æ˜¯æ ¹æ®  Docker Compose æ¨¡æ¿æ–‡ä»¶ä¸­çš„å®šä¹‰æ¥è¿è¡Œçš„ã€‚</p>

<p data-nodeid="231655">ä¸‹é¢æˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ç¼–å†™ä¸€ä¸ª  Docker Compose æ¨¡æ¿æ–‡ä»¶ã€‚</p>
<h3 data-nodeid="231656">ç¼–å†™ Docker Compose æ¨¡æ¿æ–‡ä»¶</h3>
<p data-nodeid="231657">åœ¨ä½¿ç”¨ Docker Compose å¯åŠ¨å®¹å™¨æ—¶ï¼Œ Docker Compose ä¼šé»˜è®¤ä½¿ç”¨ docker-compose.yml æ–‡ä»¶ï¼Œ docker-compose.yml æ–‡ä»¶çš„æ ¼å¼ä¸º yamlï¼ˆç±»ä¼¼äº jsonï¼Œä¸€ç§æ ‡è®°è¯­è¨€ï¼‰ã€‚</p>
<p data-nodeid="231658">Docker Compose æ¨¡æ¿æ–‡ä»¶ä¸€å…±æœ‰ä¸‰ä¸ªç‰ˆæœ¬ï¼š v1ã€v2 å’Œ v3ã€‚ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬ä¸º v3ï¼Œä¹Ÿæ˜¯åŠŸèƒ½æœ€å…¨é¢çš„ä¸€ä¸ªç‰ˆæœ¬ï¼Œä¸‹é¢æˆ‘ä¸»è¦å›´ç»• v3 ç‰ˆæœ¬ä»‹ç»ä¸€ä¸‹å¦‚ä½•ç¼–å†™ Docker Compose æ–‡ä»¶ã€‚</p>
<p data-nodeid="231659">Docker Compose æ–‡ä»¶ä¸»è¦åˆ†ä¸ºä¸‰éƒ¨åˆ†ï¼š servicesï¼ˆæœåŠ¡ï¼‰ã€networksï¼ˆç½‘ç»œï¼‰ å’Œ volumesï¼ˆæ•°æ®å·ï¼‰ã€‚</p>
<ul data-nodeid="231660">
<li data-nodeid="231661">
<p data-nodeid="231662">servicesï¼ˆæœåŠ¡ï¼‰ï¼šæœåŠ¡å®šä¹‰äº†å®¹å™¨å¯åŠ¨çš„å„é¡¹é…ç½®ï¼Œå°±åƒæˆ‘ä»¬æ‰§è¡Œ<code data-backticks="1" data-nodeid="231779">docker run</code>å‘½ä»¤æ—¶ä¼ é€’çš„å®¹å™¨å¯åŠ¨çš„å‚æ•°ä¸€æ ·ï¼ŒæŒ‡å®šäº†å®¹å™¨åº”è¯¥å¦‚ä½•å¯åŠ¨ï¼Œä¾‹å¦‚å®¹å™¨çš„å¯åŠ¨å‚æ•°ï¼Œå®¹å™¨çš„é•œåƒå’Œç¯å¢ƒå˜é‡ç­‰ã€‚</p>
</li>
<li data-nodeid="231663">
<p data-nodeid="231664">networksï¼ˆç½‘ç»œï¼‰ï¼šç½‘ç»œå®šä¹‰äº†å®¹å™¨çš„ç½‘ç»œé…ç½®ï¼Œå°±åƒæˆ‘ä»¬æ‰§è¡Œ<code data-backticks="1" data-nodeid="231782">docker network create</code>å‘½ä»¤åˆ›å»ºç½‘ç»œé…ç½®ä¸€æ ·ã€‚</p>
</li>
<li data-nodeid="231665">
<p data-nodeid="231666">volumesï¼ˆæ•°æ®å·ï¼‰ï¼šæ•°æ®å·å®šä¹‰äº†å®¹å™¨çš„å·é…ç½®ï¼Œå°±åƒæˆ‘ä»¬æ‰§è¡Œ<code data-backticks="1" data-nodeid="231785">docker volume create</code>å‘½ä»¤åˆ›å»ºæ•°æ®å·ä¸€æ ·ã€‚</p>
</li>
</ul>
<p data-nodeid="231667">ä¸€ä¸ªå…¸å‹çš„ Docker Compose æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="231668"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">nginx:</span>
    <span class="hljs-comment">## ... çœç•¥éƒ¨åˆ†é…ç½®</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">frontend:</span>
  <span class="hljs-attr">backend:</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">db-data:</span>
</code></pre>
<p data-nodeid="231669">ä¸‹é¢æˆ‘ä»¬é¦–å…ˆæ¥å­¦ä¹ ä¸€ä¸‹å¦‚ä½•ç¼–å†™ services éƒ¨åˆ†çš„é…ç½®ã€‚</p>
<h4 data-nodeid="231670">ç¼–å†™ Service é…ç½®</h4>
<p data-nodeid="231671">services ä¸‹ï¼Œé¦–å…ˆéœ€è¦å®šä¹‰æœåŠ¡åç§°ï¼Œä¾‹å¦‚ä½ è¿™ä¸ªæœåŠ¡æ˜¯ nginx æœåŠ¡ï¼Œä½ å¯ä»¥å®šä¹‰ service åç§°ä¸º nginxï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="231672"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3.8"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">nginx:</span> 
</code></pre>
<p data-nodeid="234228">æœåŠ¡åç§°å®šä¹‰å®Œæ¯•åï¼Œæˆ‘ä»¬éœ€è¦åœ¨æœåŠ¡åç§°çš„ä¸‹ä¸€çº§å®šä¹‰å½“å‰æœåŠ¡çš„å„é¡¹é…ç½®ï¼Œä½¿å¾—æˆ‘ä»¬çš„æœåŠ¡å¯ä»¥æŒ‰ç…§é…ç½®æ­£å¸¸å¯åŠ¨ã€‚å¸¸ç”¨çš„ 16 ç§ service é…ç½®å¦‚ä¸‹ã€‚å¦‚æœä½ æ¯”è¾ƒäº†è§£ï¼Œå¯ä»¥ç›´æ¥è·³è¿‡çœ‹ Volume é…ç½®å’Œåç»­å®æ“å³å¯ã€‚</p>
<p data-nodeid="234229"><strong data-nodeid="234237">buildï¼š</strong> ç”¨äºæ„å»º Docker é•œåƒï¼Œç±»ä¼¼äº<code data-backticks="1" data-nodeid="234235">docker build</code>å‘½ä»¤ï¼Œbuild å¯ä»¥æŒ‡å®š Dockerfile æ–‡ä»¶è·¯å¾„ï¼Œç„¶åæ ¹æ® Dockerfile å‘½ä»¤æ¥æ„å»ºæ–‡ä»¶ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p>


<pre class="lang-yaml" data-nodeid="231674"><code data-language="yaml"><span class="hljs-attr">build:</span>
  <span class="hljs-comment">## æ„å»ºæ‰§è¡Œçš„ä¸Šä¸‹æ–‡ç›®å½•</span>
  <span class="hljs-attr">context:</span> <span class="hljs-string">.</span>
  <span class="hljs-comment">## Dockerfile åç§°</span>
  <span class="hljs-attr">dockerfile:</span> <span class="hljs-string">Dockerfile-name</span>
</code></pre>
<p data-nodeid="234810" class=""><strong data-nodeid="234892">cap_addã€cap_dropï¼š</strong> æŒ‡å®šå®¹å™¨å¯ä»¥ä½¿ç”¨åˆ°å“ªäº›å†…æ ¸èƒ½åŠ›ï¼ˆcapabilitiesï¼‰ã€‚ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="234811"><code data-language="yaml"><span class="hljs-attr">cap_add:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">NET_ADMIN</span>
<span class="hljs-attr">cap_drop:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">SYS_ADMIN</span>
</code></pre>
<p data-nodeid="235582" class=""><strong data-nodeid="235658">commandï¼š</strong> ç”¨äºè¦†ç›–å®¹å™¨é»˜è®¤çš„å¯åŠ¨å‘½ä»¤ï¼Œå®ƒå’Œ Dockerfile ä¸­çš„ CMD ç”¨æ³•ç±»ä¼¼ï¼Œä¹Ÿæœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre class="lang-yaml" data-nodeid="235583"><code data-language="yaml"><span class="hljs-attr">command:</span> <span class="hljs-string">sleep</span> <span class="hljs-number">3000</span>
</code></pre>
<pre data-nodeid="235584"><code>command: ["sleep", "3000"]
</code></pre>
<p data-nodeid="236346" class=""><strong data-nodeid="236421">container_nameï¼š</strong> ç”¨äºæŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶å®¹å™¨çš„åç§°ã€‚ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="236347"><code data-language="yaml"><span class="hljs-attr">container_name:</span> <span class="hljs-string">nginx</span>
</code></pre>
<p data-nodeid="237105" class=""><strong data-nodeid="237180">depends_onï¼š</strong> ç”¨äºæŒ‡å®šæœåŠ¡é—´çš„ä¾èµ–å…³ç³»ï¼Œè¿™æ ·å¯ä»¥å…ˆå¯åŠ¨è¢«ä¾èµ–çš„æœåŠ¡ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„æœåŠ¡ä¾èµ–æ•°æ®åº“æœåŠ¡ dbï¼Œå¯ä»¥æŒ‡å®š depends_on ä¸º dbã€‚ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="237106"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3.8"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">my-web:</span>
    <span class="hljs-attr">build:</span> <span class="hljs-string">.</span>
    <span class="hljs-attr">depends_on:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">db</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql</span>
</code></pre>
<p data-nodeid="237858" class=""><strong data-nodeid="237927">devicesï¼š</strong> æŒ‚è½½ä¸»æœºçš„è®¾å¤‡åˆ°å®¹å™¨ä¸­ã€‚ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="237859"><code data-language="yaml"><span class="hljs-attr">devices:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"/dev/sba:/dev/sda"</span>
</code></pre>
<p data-nodeid="238603" class=""><strong data-nodeid="238670">dnsï¼š</strong> è‡ªå®šä¹‰å®¹å™¨ä¸­çš„ dns é…ç½®ã€‚</p>
<pre class="lang-yaml" data-nodeid="238604"><code data-language="yaml"><span class="hljs-attr">dns:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-number">8.8</span><span class="hljs-number">.8</span><span class="hljs-number">.8</span>
  <span class="hljs-bullet">-</span> <span class="hljs-number">114.114</span><span class="hljs-number">.114</span><span class="hljs-number">.114</span>
</code></pre>
<p data-nodeid="239344" class=""><strong data-nodeid="239411">dns_searchï¼š</strong> é…ç½® dns çš„æœç´¢åŸŸã€‚</p>
<pre class="lang-yaml" data-nodeid="239345"><code data-language="yaml"><span class="hljs-attr">dns_search:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">svc.cluster.com</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">svc1.cluster.com</span>
</code></pre>
<p data-nodeid="240081" class=""><strong data-nodeid="240144">entrypointï¼š</strong> è¦†ç›–å®¹å™¨çš„ entrypoint å‘½ä»¤ã€‚</p>
<pre class="lang-yaml" data-nodeid="240082"><code data-language="yaml"><span class="hljs-attr">entrypoint:</span> <span class="hljs-string">sleep</span> <span class="hljs-number">3000</span>
</code></pre>
<p data-nodeid="240083">æˆ–</p>
<pre class="lang-yaml" data-nodeid="240084"><code data-language="yaml"><span class="hljs-attr">entrypoint:</span> [<span class="hljs-string">"sleep"</span>, <span class="hljs-string">"3000"</span>]
</code></pre>
<p data-nodeid="240812" class=""><strong data-nodeid="240873">env_fileï¼š</strong> æŒ‡å®šå®¹å™¨çš„ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œå¯åŠ¨æ—¶ä¼šæŠŠè¯¥æ–‡ä»¶ä¸­çš„ç¯å¢ƒå˜é‡å€¼æ³¨å…¥å®¹å™¨ä¸­ã€‚</p>
<pre class="lang-yaml" data-nodeid="240813"><code data-language="yaml"><span class="hljs-attr">env_file:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">./dbs.env</span>
</code></pre>
<p data-nodeid="240814">env æ–‡ä»¶çš„å†…å®¹æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="240815"><code data-language="yaml"><span class="hljs-string">KEY_ENV=values</span>
</code></pre>
<p data-nodeid="241536" class=""><strong data-nodeid="241591">environmentï¼š</strong> æŒ‡å®šå®¹å™¨å¯åŠ¨æ—¶çš„ç¯å¢ƒå˜é‡ã€‚</p>
<pre class="lang-yaml" data-nodeid="241537"><code data-language="yaml"><span class="hljs-attr">environment:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">KEY_ENV=values</span>
</code></pre>
<p data-nodeid="242251" class=""><strong data-nodeid="242304">imageï¼š</strong> æŒ‡å®šå®¹å™¨é•œåƒçš„åœ°å€ã€‚</p>
<pre class="lang-yaml" data-nodeid="242252"><code data-language="yaml"><span class="hljs-attr">image:</span> <span class="hljs-string">busybox:latest</span>
</code></pre>
<p data-nodeid="242962" class=""><strong data-nodeid="243013">pidï¼š</strong> å…±äº«ä¸»æœºçš„è¿›ç¨‹å‘½åç©ºé—´ï¼Œåƒåœ¨ä¸»æœºä¸Šç›´æ¥å¯åŠ¨è¿›ç¨‹ä¸€æ ·ï¼Œå¯ä»¥çœ‹åˆ°ä¸»æœºçš„è¿›ç¨‹ä¿¡æ¯ã€‚</p>
<pre class="lang-yaml" data-nodeid="242963"><code data-language="yaml"><span class="hljs-attr">pid:</span> <span class="hljs-string">"host"</span>
</code></pre>
<p data-nodeid="243669" class=""><strong data-nodeid="243718">portsï¼š</strong> æš´éœ²ç«¯å£ä¿¡æ¯ï¼Œä½¿ç”¨æ ¼å¼ä¸º HOST:CONTAINERï¼Œå‰é¢å¡«å†™è¦æ˜ å°„åˆ°ä¸»æœºä¸Šçš„ç«¯å£ï¼Œåé¢å¡«å†™å¯¹åº”çš„å®¹å™¨å†…çš„ç«¯å£ã€‚</p>
<pre class="lang-yaml" data-nodeid="243670"><code data-language="yaml"><span class="hljs-attr">ports:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"1000"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"1000-1005"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:8080"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"8888-8890:8888-8890"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"2222:22"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"127.0.0.1:9999:9999"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"127.0.0.1:3000-3005:3000-3005"</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">"6789:6789/udp"</span>
</code></pre>
<p data-nodeid="244372" class=""><strong data-nodeid="244419">networksï¼š</strong> è¿™æ˜¯æœåŠ¡è¦ä½¿ç”¨çš„ç½‘ç»œåç§°ï¼Œå¯¹åº”é¡¶çº§çš„ networks ä¸­çš„é…ç½®ã€‚</p>
<pre class="lang-yaml" data-nodeid="244373"><code data-language="yaml"><span class="hljs-attr">services:</span>
  <span class="hljs-attr">my-service:</span>
    <span class="hljs-attr">networks:</span>
     <span class="hljs-bullet">-</span> <span class="hljs-string">hello-network</span>
     <span class="hljs-bullet">-</span> <span class="hljs-string">hello1-network</span>
</code></pre>
<p data-nodeid="245071" class=""><strong data-nodeid="245118">volumesï¼š</strong> ä¸ä»…å¯ä»¥æŒ‚è½½ä¸»æœºæ•°æ®å·åˆ°å®¹å™¨ä¸­ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æŒ‚è½½ä¸»æœºçš„ç›®å½•åˆ°å®¹å™¨ä¸­ï¼Œä½¿ç”¨æ–¹å¼ç±»ä¼¼äºä½¿ç”¨<code data-backticks="1" data-nodeid="245116">docker run</code>å¯åŠ¨å®¹å™¨æ—¶æ·»åŠ  -v å‚æ•°ã€‚</p>
<pre class="lang-yaml" data-nodeid="245072"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.6</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">volume</span>
        <span class="hljs-attr">source:</span> <span class="hljs-string">/var/lib/mysql</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">/var/lib/mysql</span>
</code></pre>
<p data-nodeid="245073">volumes é™¤äº†ä¸Šé¢ä»‹ç»çš„é•¿è¯­æ³•å¤–ï¼Œè¿˜æ”¯æŒçŸ­è¯­æ³•çš„ä¹¦å†™æ–¹å¼ï¼Œä¾‹å¦‚ä¸Šé¢çš„å†™æ³•å¯ä»¥ç²¾ç®€ä¸ºï¼š</p>
<pre class="lang-yaml" data-nodeid="245074"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">db:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.6</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-string">/var/lib/mysql:/var/lib/mysql</span>
</code></pre>
<h4 data-nodeid="245075">ç¼–å†™ Volume é…ç½®</h4>
<p data-nodeid="245076">å¦‚æœä½ æƒ³åœ¨å¤šä¸ªå®¹å™¨é—´å…±äº«æ•°æ®å·ï¼Œåˆ™éœ€è¦åœ¨å¤–éƒ¨å£°æ˜æ•°æ®å·ï¼Œç„¶ååœ¨å®¹å™¨é‡Œå£°æ˜ä½¿ç”¨æ•°æ®å·ã€‚ä¾‹å¦‚æˆ‘æƒ³åœ¨ä¸¤ä¸ªæœåŠ¡é—´å…±äº«æ—¥å¿—ç›®å½•ï¼Œåˆ™ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼š</p>
<pre class="lang-yaml" data-nodeid="245077"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">my-service1:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">service:v1</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">volume</span>
        <span class="hljs-attr">source:</span> <span class="hljs-string">logdata</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">/var/log/mylog</span>
  <span class="hljs-attr">my-service2:</span>
    <span class="hljs-attr">image:</span> <span class="hljs-string">service:v2</span>
    <span class="hljs-attr">volumes:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">volume</span>
        <span class="hljs-attr">source:</span> <span class="hljs-string">logdata</span>
        <span class="hljs-attr">target:</span> <span class="hljs-string">/var/log/mylog</span>
<span class="hljs-attr">volumes:</span>
  <span class="hljs-attr">logdata:</span>
 
</code></pre>
<h4 data-nodeid="245078">ç¼–å†™ Network é…ç½®</h4>
<p data-nodeid="245079">Docker Compose æ–‡ä»¶é¡¶çº§å£°æ˜çš„ networks å…è®¸ä½ åˆ›å»ºè‡ªå®šä¹‰çš„ç½‘ç»œï¼Œç±»ä¼¼äº<code data-backticks="1" data-nodeid="245124">docker network create</code>å‘½ä»¤ã€‚</p>
<p data-nodeid="245080">ä¾‹å¦‚ä½ æƒ³å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰ bridge ç½‘ç»œé…ç½®ï¼Œå¹¶ä¸”åœ¨æœåŠ¡ä¸­ä½¿ç”¨å®ƒï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-yaml" data-nodeid="245081"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">"3"</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-attr">web:</span>
    <span class="hljs-attr">networks:</span>
      <span class="hljs-attr">mybridge:</span> 
        <span class="hljs-attr">ipv4_address:</span> <span class="hljs-number">172.16</span><span class="hljs-number">.1</span><span class="hljs-number">.11</span>
<span class="hljs-attr">networks:</span>
  <span class="hljs-attr">mybridge:</span>
    <span class="hljs-attr">driver:</span> <span class="hljs-string">bridge</span>
    <span class="hljs-attr">ipam:</span> 
      <span class="hljs-attr">driver:</span> <span class="hljs-string">default</span>
      <span class="hljs-attr">config:</span>
        <span class="hljs-attr">subnet:</span> <span class="hljs-number">172.16</span><span class="hljs-number">.1</span><span class="hljs-number">.0</span><span class="hljs-string">/24</span>
      
</code></pre>
<p data-nodeid="245082">ç¼–å†™å®Œ Docker Compose æ¨¡æ¿æ–‡ä»¶åï¼Œéœ€è¦ä½¿ç”¨ docker-compose å‘½ä»¤æ¥è¿è¡Œè¿™äº›æ–‡ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬æ¥å­¦ä¹ ä¸‹ docker-compose éƒ½æœ‰å“ªäº›æ“ä½œå‘½ä»¤ã€‚</p>
<h3 data-nodeid="245083">Docker Compose æ“ä½œå‘½ä»¤</h3>
<p data-nodeid="245084">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code data-backticks="1" data-nodeid="245130">docker-compose -h</code>å‘½ä»¤æ¥æŸ¥çœ‹ docker-compose çš„ç”¨æ³•ï¼Œdocker-compose çš„åŸºæœ¬ä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre class="lang-dart" data-nodeid="247749"><code data-language="dart">docker-compose [-f &lt;arg&gt;...] [options] [--] [COMMAND] [ARGS...]
</code></pre>
<p data-nodeid="247750">å…¶ä¸­ options æ˜¯ docker-compose çš„å‚æ•°ï¼Œæ”¯æŒçš„å‚æ•°å’ŒåŠŸèƒ½è¯´æ˜å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="270124"><code data-language="java">&nbsp; -f, --file FILE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æŒ‡å®š docker-compose æ–‡ä»¶ï¼Œé»˜è®¤ä¸º docker-compose.yml
&nbsp; -p, --project-name NAME&nbsp; &nbsp; &nbsp;æŒ‡å®šé¡¹ç›®åç§°ï¼Œé»˜è®¤ä½¿ç”¨å½“å‰ç›®å½•åç§°ä½œä¸ºé¡¹ç›®åç§°
&nbsp; --verbose&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;è¾“å‡ºè°ƒè¯•ä¿¡æ¯
&nbsp; --log-level LEVEL&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æ—¥å¿—çº§åˆ« (DEBUG, INFO, WARNING, ERROR, CRITICAL)
&nbsp; -v, --version&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;è¾“å‡ºå½“å‰ç‰ˆæœ¬å¹¶é€€å‡º
&nbsp; -H, --host HOST&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æŒ‡å®šè¦è¿æ¥çš„ Docker åœ°å€
&nbsp; --tls&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;å¯ç”¨ TLS è®¤è¯
&nbsp; --tlscacert CA_PATH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;TLS CA è¯ä¹¦è·¯å¾„
&nbsp; --tlscert CLIENT_CERT_PATH&nbsp; TLS å…¬é’¥è¯ä¹¦é—®ä»·
&nbsp; --tlskey TLS_KEY_PATH&nbsp; &nbsp; &nbsp; &nbsp;TLS ç§é’¥è¯ä¹¦æ–‡ä»¶
&nbsp; --tlsverify&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ä½¿ç”¨ TLS æ ¡éªŒå¯¹ç«¯
&nbsp; --skip-hostname-check&nbsp; &nbsp; &nbsp; &nbsp;ä¸æ ¡éªŒä¸»æœºå
&nbsp; --project-directory PATH&nbsp; &nbsp; æŒ‡å®šå·¥ä½œç›®å½•ï¼Œé»˜è®¤æ˜¯ Compose æ–‡ä»¶æ‰€åœ¨è·¯å¾„ã€‚
</code></pre>
<p data-nodeid="270125">COMMAND ä¸º docker-compose æ”¯æŒçš„å‘½ä»¤ã€‚æ”¯æŒçš„å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre class="lang-dart" data-nodeid="279297"><code data-language="dart">&nbsp; build&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; æ„å»ºæœåŠ¡
&nbsp; config&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æ ¡éªŒå’ŒæŸ¥çœ‹ Compose æ–‡ä»¶
&nbsp; create&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åˆ›å»ºæœåŠ¡
&nbsp; down&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åœæ­¢æœåŠ¡ï¼Œå¹¶ä¸”åˆ é™¤ç›¸å…³èµ„æº
&nbsp; events&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;å®æ—¶ç›‘æ§å®¹å™¨çš„æ—¶é—´ä¿¡æ¯
&nbsp; exec&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åœ¨ä¸€ä¸ªè¿è¡Œçš„å®¹å™¨ä¸­è¿è¡ŒæŒ‡å®šå‘½ä»¤
&nbsp; help&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;è·å–å¸®åŠ©
&nbsp; images&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åˆ—å‡ºé•œåƒ
&nbsp; kill&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æ€æ­»å®¹å™¨
&nbsp; logs&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æŸ¥çœ‹å®¹å™¨è¾“å‡º
&nbsp; pause&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; æš‚åœå®¹å™¨
&nbsp; port&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æ‰“å°å®¹å™¨ç«¯å£æ‰€æ˜ å°„å‡ºçš„å…¬å…±ç«¯å£
&nbsp; ps&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åˆ—å‡ºé¡¹ç›®ä¸­çš„å®¹å™¨åˆ—è¡¨
&nbsp; pull&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æ‹‰å–æœåŠ¡ä¸­çš„æ‰€æœ‰é•œåƒ
&nbsp; push&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;æ¨é€æœåŠ¡ä¸­çš„æ‰€æœ‰é•œåƒ
&nbsp; restart&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; é‡å¯æœåŠ¡
&nbsp; rm&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åˆ é™¤é¡¹ç›®ä¸­å·²ç»åœæ­¢çš„å®¹å™¨
&nbsp; run&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; åœ¨æŒ‡å®šæœåŠ¡ä¸Šè¿è¡Œä¸€ä¸ªå‘½ä»¤
&nbsp; scale&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; è®¾ç½®æœåŠ¡è¿è¡Œçš„å®¹å™¨ä¸ªæ•°
&nbsp; start&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; å¯åŠ¨æœåŠ¡
&nbsp; stop&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åœæ­¢æœåŠ¡
&nbsp; top&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; é™åˆ¶æœåŠ¡ä¸­æ­£åœ¨è¿è¡Œä¸­çš„è¿›ç¨‹ä¿¡æ¯
&nbsp; unpause&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; æ¢å¤æš‚åœçš„å®¹å™¨
&nbsp; up&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;åˆ›å»ºå¹¶ä¸”å¯åŠ¨æœåŠ¡
&nbsp; version&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; æ‰“å°ç‰ˆæœ¬ä¿¡æ¯å¹¶é€€å‡º
</code></pre>
<p data-nodeid="279298">å¥½äº†ï¼Œå­¦ä¹ å®Œ Docker Compose æ¨¡æ¿çš„ç¼–å†™å’Œ docker-compose å‘½ä»¤çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸‹é¢æˆ‘ä»¬ç¼–å†™ä¸€ä¸ª Docker Compose æ¨¡æ¿æ–‡ä»¶ï¼Œå®ç°ä¸€é”®å¯åŠ¨ WordPress æœåŠ¡ï¼ˆä¸€ç§åšå®¢ç³»ç»Ÿï¼‰ï¼Œæ¥æ­å»ºä¸€ä¸ªå±äºæˆ‘ä»¬è‡ªå·±çš„åšå®¢ç³»ç»Ÿã€‚</p>
<h3 data-nodeid="279299">ä½¿ç”¨ Docker Compose ç®¡ç† WordPress</h3>
<h4 data-nodeid="279300">å¯åŠ¨ WordPress</h4>
<p data-nodeid="279301">ç¬¬ä¸€æ­¥ï¼Œåˆ›å»ºé¡¹ç›®ç›®å½•ã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ /tmp ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª WordPress çš„ç›®å½•ï¼Œè¿™ä¸ªç›®å½•å°†ä½œä¸ºæˆ‘ä»¬çš„å·¥ä½œç›®å½•ã€‚</p>
<pre class="lang-plain" data-nodeid="279302"><code data-language="plain">$ mkdir /tmp/wordpress
</code></pre>
<p data-nodeid="279303">ç¬¬äºŒæ­¥ï¼Œè¿›å…¥å·¥ä½œç›®å½•ã€‚</p>
<pre class="lang-plain" data-nodeid="279304"><code data-language="plain">$ cd /tmp/wordpress
</code></pre>
<p data-nodeid="279305">ç¬¬ä¸‰æ­¥ï¼Œåˆ›å»º docker-compose.yml æ–‡ä»¶ã€‚</p>
<pre class="lang-plain" data-nodeid="279306"><code data-language="plain">$ touch docker-compose.yml
</code></pre>
<p data-nodeid="279307">ç„¶åå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre class="lang-yaml" data-nodeid="279308"><code data-language="yaml"><span class="hljs-attr">version:</span> <span class="hljs-string">'3'</span>
<span class="hljs-attr">services:</span>
   <span class="hljs-attr">mysql:</span>
     <span class="hljs-attr">image:</span> <span class="hljs-string">mysql:5.7</span>
     <span class="hljs-attr">volumes:</span>
       <span class="hljs-bullet">-</span> <span class="hljs-string">mysql_data:/var/lib/mysql</span>
     <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
     <span class="hljs-attr">environment:</span>
       <span class="hljs-attr">MYSQL_ROOT_PASSWORD:</span> <span class="hljs-string">root</span>
       <span class="hljs-attr">MYSQL_DATABASE:</span> <span class="hljs-string">mywordpress</span>
       <span class="hljs-attr">MYSQL_USER:</span> <span class="hljs-string">mywordpress</span>
       <span class="hljs-attr">MYSQL_PASSWORD:</span> <span class="hljs-string">mywordpress</span>
   <span class="hljs-attr">wordpress:</span>
     <span class="hljs-attr">depends_on:</span>
       <span class="hljs-bullet">-</span> <span class="hljs-string">mysql</span>
     <span class="hljs-attr">image:</span> <span class="hljs-string">wordpress:php7.4</span>
     <span class="hljs-attr">ports:</span>
       <span class="hljs-bullet">-</span> <span class="hljs-string">"8080:80"</span>
     <span class="hljs-attr">restart:</span> <span class="hljs-string">always</span>
     <span class="hljs-attr">environment:</span>
       <span class="hljs-attr">WORDPRESS_DB_HOST:</span> <span class="hljs-string">mysql:3306</span>
       <span class="hljs-attr">WORDPRESS_DB_USER:</span> <span class="hljs-string">mywordpress</span>
       <span class="hljs-attr">WORDPRESS_DB_PASSWORD:</span> <span class="hljs-string">mywordpress</span>
       <span class="hljs-attr">WORDPRESS_DB_NAME:</span> <span class="hljs-string">mywordpress</span>
<span class="hljs-attr">volumes:</span>
    <span class="hljs-attr">mysql_data:</span> {}
</code></pre>
<p data-nodeid="279309">ç¬¬å››æ­¥ï¼Œå¯åŠ¨ MySQL æ•°æ®åº“å’Œ WordPress æœåŠ¡ã€‚</p>
<pre class="lang-plain" data-nodeid="279310"><code data-language="plain">$ docker-compose up -d
Starting wordpress_mysql_1 ... done
Starting wordpress_wordpress_1 ... done
</code></pre>
<p data-nodeid="281778">æ‰§è¡Œå®Œä»¥ä¸Šå‘½ä»¤åï¼ŒDocker Compose é¦–å…ˆä¼šä¸ºæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ª MySQL æ•°æ®åº“ï¼ŒæŒ‰ç…§ MySQL æœåŠ¡ä¸­å£°æ˜çš„ç¯å¢ƒå˜é‡æ¥è®¾ç½® MySQL æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ã€‚ç„¶åç­‰å¾… MySQL æ•°æ®åº“å¯åŠ¨åï¼Œå†å¯åŠ¨ WordPress æœåŠ¡ã€‚WordPress æœåŠ¡å¯åŠ¨åï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <a href="http://localhost:8080" data-nodeid="281783">http://localhost:8080</a> è®¿é—®å®ƒäº†ï¼Œè®¿é—®æˆåŠŸåï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä»¥ä¸‹ç•Œé¢ï¼Œç„¶åæŒ‰ç…§æç¤ºä¸€æ­¥ä¸€æ­¥è®¾ç½®å°±å¯ä»¥æ‹¥æœ‰å±äºè‡ªå·±çš„ä¸“å±åšå®¢ç³»ç»Ÿäº†ã€‚</p>
<p data-nodeid="282392"><img src="https://s0.lgstatic.com/i/image/M00/63/AF/Ciqc1F-WuHqAMc6gAAGSco9Zyvc339.png" alt="image.png" data-nodeid="282396"></p>
<div data-nodeid="282393" class=""><p style="text-align:center">å›¾ 1 WordPress å¯åŠ¨ç•Œé¢</p></div>







<h4 data-nodeid="279313">åœæ­¢ WordPress</h4>
<p data-nodeid="279314">å¦‚æœä½ ä¸å†éœ€è¦ WordPress æœåŠ¡äº†ï¼Œå¯ä»¥ä½¿ç”¨<code data-backticks="1" data-nodeid="279340">docker-compose stop</code>å‘½ä»¤æ¥åœæ­¢å·²å¯åŠ¨çš„æœåŠ¡ã€‚</p>
<pre class="lang-plain" data-nodeid="279315"><code data-language="plain">$ docker-compose stop
Stopping wordpress_wordpress_1 ... done
Stopping wordpress_mysql_1&nbsp; &nbsp; &nbsp;... done
</code></pre>
<h3 data-nodeid="279316">ç»“è¯­</h3>
<p data-nodeid="279317">Docker Compose æ˜¯ä¸€ä¸ªç”¨æ¥å®šä¹‰å¤æ‚åº”ç”¨çš„å•æœºç¼–æ’å·¥å…·ï¼Œé€šå¸¸ç”¨äºæœåŠ¡ä¾èµ–å…³ç³»å¤æ‚çš„å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œå¦‚æœä½ è¿˜åœ¨ä¸ºé…ç½®å¤æ‚çš„å¼€å‘ç¯å¢ƒè€Œçƒ¦æ¼ï¼ŒDocker Compose å¯ä»¥è½»æ¾å¸®ä½ æå®šå¤æ‚çš„å¼€å‘ç¯å¢ƒã€‚ä½ åªéœ€è¦æŠŠå¤æ‚çš„å¼€å‘ç¯å¢ƒä½¿ç”¨ Docker Compose æ¨¡æ¿æ–‡ä»¶æè¿°å‡ºæ¥ï¼Œä¹‹åæ— è®ºä½ åœ¨å“ªé‡Œå¯ä»¥è½»æ¾çš„ä¸€é”®å¯åŠ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒï¼Œæå¤§åœ°æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†æ±¡æŸ“æˆ‘ä»¬å¼€å‘æœºå™¨çš„é…ç½®ã€‚</p>
<p data-nodeid="285409" class="">é‚£ä¹ˆï¼Œå­¦å®Œæœ¬è¯¾æ—¶çš„è¯¾ç¨‹ï¼Œä½ å¯ä»¥è¯•ç€ä½¿ç”¨ Docker Compose ä¸€é”®å¯åŠ¨ä¸€ä¸ª <a href="https://baike.baidu.com/item/LNMP" data-nodeid="285413">LNMP</a> å¼€å‘ç¯å¢ƒå—ï¼Ÿ</p>


<p data-nodeid="284201" class="">ä¸‹ä¸€è¯¾æ—¶ï¼Œæˆ‘å°†ä¸ºä½ è®²è§£å®¹å™¨çš„å¦ä¸€ä¸ªç¼–æ’ç³»ç»Ÿ Docker Swarmã€‚</p>

---

### ç²¾é€‰è¯„è®º

##### *ç­–ï¼š
> è€å¸ˆï¼Œæˆ‘é—®ä¸€ä¸‹ï¼Œçº¿ä¸Šæ˜¯ä¸æ˜¯ä¹Ÿå¯ä»¥ç”¨docker composeå‘€ï¼Œè¿˜æ˜¯æœ‰æ›´å¥½çš„è§£å†³æ–¹æ¡ˆå‘¢ğŸ˜€

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; çº¿ä¸Šå•æœºéƒ¨ç½²ä¹Ÿå¯ä»¥ä½¿ç”¨ docker-composeï¼Œä½†æ˜¯ docker-compose æ— æ³•åšåˆ°é›†ç¾¤è°ƒåº¦ï¼Œæƒ³è¦æŠŠå¤šå°æœåŠ¡ç»„æˆå®¹å™¨é›†ç¾¤ï¼Œæ¨èä½¿ç”¨ kubernetes

##### *å†²ï¼š
> åœ¨å¯åŠ¨WordPressçš„æ—¶å€™">docker-compose up -dæŠ¥é”™/var/lib/docker/tmp/GetImageBlob105292471: no space left on device...æœ€åä¸€è„šdf -h æŸ¥çœ‹ç£ç›˜ç©ºé—´å¹¶æ²¡æœ‰æ»¡

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; åº”è¯¥æ˜¯/var/lib/docker/ è¿™ä¸ªç›®å½•æ»¡äº†ï¼Œè¯·æ£€æŸ¥

##### *ç‘ï¼š
> docker compose åœ¨éé›†ç¾¤æƒ…å†µä¸‹å¯ä»¥æ§åˆ¶CPUå’Œå†…å­˜çš„ä½¿ç”¨é‡å—ï¼Ÿ

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; ä½¿ç”¨  deploy:
      resources:
        limits:
          cpus: '0.001'
          memory: 50M  å³å¯é™åˆ¶ CPU å’Œå†…å­˜ä½¿ç”¨é‡

##### **å‡ï¼š
> æ‰“å¡

