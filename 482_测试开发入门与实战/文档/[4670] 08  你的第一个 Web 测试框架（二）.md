<p data-nodeid="5463">é€šè¿‡ä¸Šä¸€è¯¾æ—¶çš„å­¦ä¹ ï¼Œä½ å¯¹ unittest å·²ç»æœ‰äº†ä¸€å®šçš„è®¤çŸ¥ï¼Œè¿™èŠ‚è¯¾æˆ‘å°†æ­£å¼å¸¦ä½ æ­å»º Web æµ‹è¯•æ¡†æ¶ã€‚</p>
<p data-nodeid="37353" class="">ä½ å¯ä»¥é€šè¿‡ä¸‹å›¾ï¼Œå¯¹ä¸ŠèŠ‚è¯¾å†…å®¹è¿›è¡Œæ›´æ¸…æ™°çš„å›é¡¾ã€‚<br>
<img src="https://s0.lgstatic.com/i/image/M00/5A/8A/CgqCHl94a_yAEfCPAADAcDmUSmw177.png" alt="ç™½åº•è„‘å›¾.png" data-nodeid="37358"></p>








































































































<h3 data-nodeid="881">å®è·µå‡ºçœŸçŸ¥â€”â€”åˆ›å»º Web æµ‹è¯•æ¡†æ¶é›å½¢</h3>


<p data-nodeid="707">Web è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œç”±äºå…¶å¯¹åº”äºæµ‹è¯•é‡‘å­—å¡”çš„ UI å±‚ï¼Œæ‰€ä»¥ä¹Ÿå¸¸è¢«ç§°ä¸º UI è‡ªåŠ¨åŒ–æµ‹è¯•ï¼ŒæŒ‡çš„æ˜¯ä½¿ç”¨ä»£ç æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è§†è§’ï¼Œä»¥è‡ªåŠ¨åŒ–çš„æ–¹å¼å»æ‰§è¡Œä¸šåŠ¡æ“ä½œï¼Œä»¥åŠè¿›è¡Œæ“ä½œåçš„æ£€æŸ¥è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚</p>
<p data-nodeid="708">æ—¢ç„¶æ˜¯ Web è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå¿…ç„¶è¦ä¾æ‰˜æµè§ˆå™¨æ‰§è¡Œã€‚å½“å‰åœ¨ Web è‡ªåŠ¨åŒ–æµ‹è¯•é¢†åŸŸï¼ŒSelenium/WebDriver ä»ç„¶æ˜¯å¸‚åœºå æœ‰ç‡æœ€é«˜çš„çš„ä¸€æ¬¾ UI è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ‰€ä»¥æœ¬èŠ‚è¯¾æˆ‘ä»¬å°±é‡‡ç”¨ Selenium/WebDriver æ¥ä½œä¸ºæˆ‘ä»¬ Web è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ä¸­ä¸æµè§ˆå™¨æ‰“äº¤é“çš„å·¥å…·ã€‚</p>
<blockquote data-nodeid="709">
<p data-nodeid="710">å…¶å® Cypress å·²ä¸¥é‡æŒ‘æˆ˜äº† Selenium/WebDriver çš„å¸‚åœºéœ¸ä¸»åœ°ä½ï¼Œå¹¶å¤§æœ‰åæ¥è€…å±…ä¸Šè¶‹åŠ¿ï¼Œæƒ³è¦æ›´å¤šåœ°äº†è§£ Cypress æ¡†æ¶ï¼Œä½ å¯ä»¥å‚è€ƒæˆ‘çš„ä¹¦<a href="https://item.jd.com/12647091.html" data-nodeid="773">ã€Šå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ -- Cypressä»å…¥é—¨åˆ°ç²¾é€šã€‹</a>ã€‚</p>
</blockquote>
<p data-nodeid="711">è€Œ unittest æ¡†æ¶æ˜¯ä¸€ä¸ªç›¸å¯¹å®Œæ•´çš„æ¡†æ¶ï¼Œå¯ä»¥åº”å¯¹æµ‹è¯•ç”¨ä¾‹/æµ‹è¯•ç”¨ä¾‹é›†çš„ç”Ÿæˆã€æµ‹è¯•ç”¨ä¾‹çš„æ‰§è¡Œã€æµ‹è¯•æ‰§è¡Œåçš„æ¸…ç†åŠæµ‹è¯•æŠ¥å‘Šï¼Œæ‰€ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸¤è€…ç»“åˆæˆ‘ä»¬å°±æœ‰äº† Web è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„é›å½¢ï¼š</p>
<p data-nodeid="712"><img src="https://s0.lgstatic.com/i/image/M00/5A/32/CgqCHl90JvqAJ9cEAAA0xAZJW7Y126.png" alt="Screen Shot 2020-09-03 at 11.53.46 PM.png" data-nodeid="778"></p>
<div data-nodeid="713"><p style="text-align:center">Web è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶é›å½¢å›¾</p></div>
<p data-nodeid="714">ä¸‹é¢æˆ‘ä»¬æŒ‰ç…§ä¸Šä¸€è¯¾æ—¶æåŠçš„â€œä½¿ç”¨ unittest æ¡†æ¶åˆ›å»ºæµ‹è¯•ç”¨ä¾‹çš„æ­¥éª¤â€æŠŠè¿™ä¸ªæ¡†æ¶åˆ›å»ºèµ·æ¥ã€‚</p>
<p data-nodeid="715">1.é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆç»™å®šé¡¹ç›®çš„æ–‡ä»¶ç»“æ„ï¼š</p>
<pre class="lang-python" data-nodeid="716"><code data-language="python">|--lagouTest
    |--tests
        |--test_baidu.py
        |--__init__.py
    |--main.py
    |--__init__.py
</code></pre>
<p data-nodeid="717">2.æµ‹è¯•ç±» test_baidu.py çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="lang-python" data-nodeid="718"><code data-language="python"><span class="hljs-comment"># coding=utf-8</span>
<span class="hljs-keyword">from</span> selenium <span class="hljs-keyword">import</span> webdriver
<span class="hljs-keyword">import</span> unittest
<span class="hljs-keyword">import</span> time

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Baidu</span>(<span class="hljs-params">unittest.TestCase</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">setUp</span>(<span class="hljs-params">self</span>):</span>
        self.driver = webdriver.Chrome()
        self.driver.implicitly_wait(<span class="hljs-number">30</span>)
        self.base_url = <span class="hljs-string">"http://www.baidu.com/"</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_baidu_search</span>(<span class="hljs-params">self</span>):</span>
        driver = self.driver
        driver.get(self.base_url + <span class="hljs-string">"/"</span>)
        driver.find_element_by_id(<span class="hljs-string">"kw"</span>).send_keys(<span class="hljs-string">"iTesting"</span>)
        driver.find_element_by_id(<span class="hljs-string">"su"</span>).click()
        time.sleep(<span class="hljs-number">2</span>)
        search_results = driver.find_element_by_xpath(<span class="hljs-string">'//*[@id="1"]/h3/a'</span>).get_attribute(<span class="hljs-string">'innerHTML'</span>)
        self.assertEqual(<span class="hljs-string">'iTesting'</span> <span class="hljs-keyword">in</span> search_results, <span class="hljs-literal">True</span>)
<span class="hljs-meta">    @unittest.skip('i want to skip')</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_baidu_set</span>(<span class="hljs-params">self</span>):</span>
        driver = self.driver
        driver.get(self.base_url + <span class="hljs-string">"/gaoji/preferences.html"</span>)
        m = driver.find_element_by_xpath(<span class="hljs-string">".//*[@id='nr']"</span>)
        m.find_element_by_xpath(<span class="hljs-string">"//option[@value='10']"</span>).click()
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">tearDown</span>(<span class="hljs-params">self</span>):</span>
        self.driver.quit()

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    unittest.main(verbosity=<span class="hljs-number">2</span>)
</code></pre>
<p data-nodeid="719">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦æƒ³æ­£ç¡®è¿è¡Œ Seleniumï¼Œéœ€è¦å®‰è£…ç›¸åº”çš„ä¾èµ–ï¼ŒåŒ…æ‹¬ Selenium å’Œå¯¹åº”çš„ WebDriverï¼Œæˆ‘ä»¥ Win10 ä¸‹è¿è¡Œ Chrome ä¸ºä¾‹ï¼š</p>
<pre class="lang-python" data-nodeid="720"><code data-language="python"><span class="hljs-comment"># 1.å®‰è£…Seleniumï¼Œå‡è®¾lagouTesté¡¹ç›®åœ¨Dç›˜çš„_Automationæ–‡ä»¶å¤¹ä¸‹</span>
<span class="hljs-comment"># D:\_Automation\lagouTest&gt;pip install selenium</span>
<span class="hljs-comment"># 2. å®‰è£…Chrome Driver</span>
<span class="hljs-comment"># ä»å¦‚ä¸‹åœ°å€é€‰æ‹©è·Ÿä½ æµè§ˆå™¨ç‰ˆæœ¬ä¸€è‡´çš„chrome Driverä¸‹è½½ï¼š</span>
<span class="hljs-comment"># http://npm.taobao.org/mirrors/chromedriver</span>
<span class="hljs-comment"># å¹¶å°†è§£å‹åçš„chromedriver.exeæ”¾åˆ°pythonå®‰è£…ç›®å½•ä¸‹çš„scriptsæ–‡ä»¶å¤¹ä¸‹ã€‚</span>
<span class="hljs-comment"># Win10ä¸‹é»˜è®¤è·¯å¾„ä¸ºç”¨æˆ·ç›®å½•ä¸‹çš„AppDataï¼š</span>
<span class="hljs-comment"># C:\Users\Admin\AppData\Local\Programs\Python\Python38-32\Scripts</span>
<span class="hljs-comment"># 3.è¿›å…¥ç¯å¢ƒé…ç½®ï¼Œç¼–è¾‘ç³»ç»Ÿå˜é‡é‡Œpathå˜é‡ï¼Œåœ¨æœ€åé¢åŠ ä¸ŠChromeçš„å®‰è£…è·¯å¾„ï¼š</span>
<span class="hljs-comment"># C:\Program Files\Google\Chrome\Application</span>
</code></pre>
<p data-nodeid="721">â€œBaiduâ€è¿™ä¸ªæµ‹è¯•ç±»æˆ‘å†™å¾—éå¸¸ä¸ä¼˜é›…ï¼Œé¡¹ç›®é…ç½®ã€å…ƒç´ å®šä½ã€æµ‹è¯•æ•°æ®å…¨éƒ¨è€¦åˆåœ¨ä¸€å—å„¿ï¼Œç°åœ¨å…ˆä¸å»ç®¡å®ƒï¼Œæˆ‘ä¼šåœ¨åé¢çš„è¯¾æ—¶æ…¢æ…¢ä¼˜åŒ–å®ƒï¼Œå¸¦ä½ è®¤è¯†æ¡†æ¶è®¾è®¡çš„å…¨è¿‡ç¨‹ã€‚</p>
<p data-nodeid="722">3.main.py çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="lang-python" data-nodeid="723"><code data-language="python"><span class="hljs-comment"># coding=utf-8</span>

<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> unittest

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    suite = unittest.defaultTestLoader.discover(os.path.join(os.path.dirname(__file__), <span class="hljs-string">"tests"</span>),pattern=<span class="hljs-string">'*.py'</span>,top_level_dir=os.path.dirname(__file__))
    runner = unittest.TextTestRunner(verbosity=<span class="hljs-number">2</span>)
    runner.run(suite)
</code></pre>
<p data-nodeid="724">4.è¿è¡Œ main.pyï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä¸‹ç»“æœï¼š</p>
<pre class="lang-python" data-nodeid="725"><code data-language="python">test_baidu_search (tests.test_baidu.Baidu) ... ok
test_baidu_set (tests.test_baidu.Baidu) ... skipped <span class="hljs-string">'i want to skip'</span>

----------------------------------------------------------------------
Ran <span class="hljs-number">2</span> tests <span class="hljs-keyword">in</span> <span class="hljs-number">8.564</span>s

OK (skipped=<span class="hljs-number">1</span>)
</code></pre>
<p data-nodeid="726">å¯ä»¥çœ‹åˆ°è¿™ä¸ªæµ‹è¯•è¿è¡ŒæˆåŠŸäº†ã€‚ å‡è®¾æˆ‘ä»¬éœ€è¦è¿è¡Œæ›´å¤šçš„æµ‹è¯•ç”¨ä¾‹æ€ä¹ˆåŠï¼Ÿä»…ä»…éœ€è¦åœ¨ tests æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç±»å°±å¥½äº†ã€‚è¿™æ ·ï¼Œä¸€ä¸ªåŸºäº unittest çš„ Web ç«¯æµ‹è¯•æ¡†æ¶çš„é›å½¢å°±æ­å»ºæˆåŠŸäº†ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿ</p>
<h3 data-nodeid="727">å®è·µå‡ºçœŸçŸ¥â€”â€”ä¼˜åŒ– Web æµ‹è¯•æ¡†æ¶</h3>
<p data-nodeid="728">ç°åœ¨æˆ‘ä»¬çš„æ¡†æ¶è™½ç„¶å¯ä»¥æµ‹è¯•äº†ï¼Œä½†æœ‰ä¸€ä¸ªé—®é¢˜ï¼šæµ‹è¯•æŠ¥å‘Šç›´æ¥æ‰“å°åœ¨ Console é‡Œï¼Œä¸åˆ©äºæˆ‘ä»¬æŸ¥çœ‹æµ‹è¯•è¿è¡Œçš„å†å²ã€‚é‚£ä¹ˆèƒ½ä¸èƒ½æŠŠæµ‹è¯•æŠ¥å‘Šç»™æŒä¹…åŒ–å‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è§£å†³æ–¹æ¡ˆã€‚</p>
<h4 data-nodeid="729">1. ç›´æ¥å­˜å‚¨æµ‹è¯•è¿è¡Œç»“æœæŠ¥å‘Š</h4>
<p data-nodeid="730">æ–°æ·»åŠ ä¸€ä¸ªæµ‹è¯•æŠ¥å‘Šå¤„ç†æ–‡ä»¶ txtReport.py</p>
<pre class="lang-plain" data-nodeid="731"><code data-language="plain">|--lagouTest
    |--tests
        |--test_baidu.py
        |--__init__.py
    |--main.py
    |--__init__.py
    |--txtReport.py
</code></pre>
<p data-nodeid="732">å…¶ä¸­ï¼ŒtxtReport.py çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="lang-python" data-nodeid="733"><code data-language="python">__author__ = <span class="hljs-string">'iTesting'</span>
<span class="hljs-comment"># -*-coding=utf-8 -*-</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> re
<span class="hljs-keyword">import</span> time

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Test</span>(<span class="hljs-params">object</span>):</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>
        self.test_base = os.path.dirname(__file__)
        <span class="hljs-comment"># è·å–testsæ–‡ä»¶å¤¹æ‰€åœ¨è·¯å¾„</span>
        self.test_dir = os.path.join(self.test_base, <span class="hljs-string">'tests'</span>)
        <span class="hljs-comment"># åˆ—å‡ºæ‰€æœ‰å¾…æµ‹è¯•æ–‡ä»¶</span>
        self.test_list = os.listdir(self.test_dir)
        <span class="hljs-comment"># å®šä¹‰æ­£åˆ™åŒ¹é…è§„åˆ™ï¼Œè¿‡æ»¤__init__.pyå’Œ *.pycæ–‡ä»¶</span>
        self.pattern = re.compile(<span class="hljs-string">r'(__init__.py|.*.pyc)'</span>)
         <span class="hljs-comment"># æµ‹è¯•ç»“æœå†™æ–‡ä»¶</span>
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(os.path.join(self.test_base,<span class="hljs-string">"log.txt"</span>)):
            f = open(os.path.join(self.test_base,<span class="hljs-string">"log.txt"</span>),<span class="hljs-string">'a'</span>)
        <span class="hljs-keyword">else</span>:
            f = open(os.path.join(self.test_base,<span class="hljs-string">"log.txt"</span>),<span class="hljs-string">'w'</span>)
            f.flush()
        f.close()
    <span class="hljs-comment"># è¿è¡Œç¬¦åˆè¦æ±‚çš„æµ‹è¯•æ–‡ä»¶å¹¶å†™å…¥log.txt</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run_test</span>(<span class="hljs-params">self</span>):</span>
        <span class="hljs-keyword">for</span> py_file <span class="hljs-keyword">in</span> self.test_list:
            match = self.pattern.match(py_file)
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> match:
                os.system(<span class="hljs-string">'python %s 1&gt;&gt;%s 2&gt;&amp;1'</span> %(os.path.join(self.test_dir,py_file),os.path.join(self.test_base,<span class="hljs-string">"log.txt"</span>)))

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    test = Test()
    test.run_test()
</code></pre>
<p data-nodeid="734">åœ¨ Pycharm æˆ–è€…å‘½ä»¤è¡Œé‡Œæ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œä½ ä¼šå‘ç°æµ‹è¯•è¢«è¿è¡Œä¸”è¿è¡ŒæŠ¥å‘Š log.txt ç”Ÿæˆåœ¨æ ¹ç›®å½•ä¸‹ã€‚<br>
ä½†æ˜¯ä½ ä¼šå‘ç°ï¼Œè¿™ä¸ªæŠ¥å‘Šè¿˜ä¸å¤Ÿå¥½ï¼Œä»…ä»…æ˜¯æŠŠ Console é‡Œçš„å†…å®¹é‡å®šå‘åˆ°æ–‡ä»¶é‡Œç½¢äº†ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„æµ‹è¯•æŠ¥å‘Šéƒ½æ˜¯æ¯”è¾ƒç¾è§‚çš„ï¼Œæ¯”å¦‚è¯´ HTML æ ¼å¼ã€‚</p>
<h4 data-nodeid="735">2. ä½¿ç”¨æµ‹è¯•æŠ¥å‘Šæ¨¡å—ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š</h4>
<p data-nodeid="736">å¸¸ç”¨çš„æµ‹è¯•æŠ¥å‘Šæ¨¡å—æœ‰ HTMLTestRunner å’Œ allureã€‚ä¸‹é¢æˆ‘ä»¥ HTMLTestRunner ä¸ºä¾‹ï¼Œæ¥æ¼”ç¤ºä¸‹å¦‚ä½•ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚è€Œå¦‚ä½•ä½¿ç”¨ allure ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šï¼Œæˆ‘ä»¬æ”¾åœ¨ä¸‹èŠ‚ <strong data-nodeid="809">â€œ09 | ä½ çš„ç¬¬ä¸€ä¸ª API æµ‹è¯•æ¡†æ¶â€</strong> è®²ã€‚</p>
<p data-nodeid="737">é¦–å…ˆï¼Œæˆ‘ä»¬æ›´æ”¹ä¸‹é¡¹ç›®ç»“æ„ï¼Œåˆ›å»ºä¸€ä¸ªç”Ÿæˆæµ‹è¯•æŠ¥å‘Šçš„æ–‡ä»¶ html_reporter.pyã€‚æ›´æ–°åçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre class="lang-java" data-nodeid="738"><code data-language="java">|--lagouTest
    |--tests
        |--test_baidu.py
        |--__init__.py
    |--common
        |--html_reporter.py
        |--__init__.py
    |--HTMLTestRunner.py
    |--main.py
    |--__init__.py
    |--txtReport.py
</code></pre>
<p data-nodeid="739">html_reporter.py ä¸­çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="lang-python" data-nodeid="740"><code data-language="python">__author__ = <span class="hljs-string">'iTesting'</span>
<span class="hljs-keyword">import</span> os
<span class="hljs-keyword">import</span> time
<span class="hljs-keyword">import</span> HTMLTestRunner

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GenerateReport</span>():</span>
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">__init__</span>(<span class="hljs-params">self</span>):</span>
        now = time.strftime(<span class="hljs-string">'%Y-%m-%d-%H_%M'</span>, time.localtime(time.time()))
        self.report_name = <span class="hljs-string">"test_report_"</span> + now + <span class="hljs-string">".html"</span>
        self.test_base = os.path.dirname(os.path.dirname(__file__))
        <span class="hljs-keyword">if</span> os.path.exists(os.path.join(self.test_base, self.report_name)):
            os.remove(os.path.join(self.test_base, self.report_name))
        fp = open(os.path.join(self.test_base, self.report_name), <span class="hljs-string">"a"</span>)
        fp.close()
    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">generate_report</span>(<span class="hljs-params">self, test_suites</span>):</span>
        fp = open(os.path.join(self.test_base, self.report_name), <span class="hljs-string">"a"</span>)
        runner = HTMLTestRunner.HTMLTestRunner(stream=fp, title=<span class="hljs-string">"Test_Report_iTesting"</span>,
                                               description=<span class="hljs-string">"Below report show the results of auto run"</span>)
        runner.run(test_suites)
</code></pre>
<p data-nodeid="741">GenerateReport ç±»æœ‰ä¸€ä¸ªæ„é€ å‡½æ•°ç±» <strong data-nodeid="823">init</strong>.pyï¼Œé‡Œé¢å®ç°äº† test æ–‡ä»¶çš„å»ºç«‹ã€‚å¦å¤–å®šä¹‰äº†ä¸€ä¸ª generate_report çš„ç±»æ–¹æ³•ï¼Œæ¥è¿è¡Œå¹¶ç”Ÿæˆæµ‹è¯•æŠ¥å‘Šã€‚</p>
<p data-nodeid="742">å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ html_reporter.py ä¸­ï¼Œæˆ‘å¯¼å…¥äº† HTMLTestRunnerï¼Œé‚£ä¹ˆ HTMLTestRunner æ¨¡å—æ˜¯å¦‚ä½•å¯¼å…¥å‘¢ï¼Ÿä¸€èˆ¬æƒ…å†µä¸‹é€šè¿‡<a href="http://tungwaiyip.info/software/HTMLTestRunner.html" data-nodeid="829">tungwaiyip.info</a>ä¸‹è½½å³å¯ã€‚</p>
<p data-nodeid="743">ä½† HTMLTestRunner ä¸‹è½½åç›´æ¥åº”ç”¨äº Python 3 ä¼šå‡ºç°è¿è¡Œé”™è¯¯ï¼Œæ‰€ä»¥æˆ‘ç›´æ¥ç»™ä½ æä¾›ä¸€ä¸ªä¿®å¤é”™è¯¯åçš„å¯ç”¨ç‰ˆæœ¬ï¼Œä½ å¯ä»¥ç›´æ¥è¿›å…¥<a href="https://pan.baidu.com/s/1E4sPHHLOXwfxnY9cbNOyRA" data-nodeid="834">æ‹‰å‹¾æ•™è‚²ç™¾åº¦ç½‘ç›˜</a>ï¼ˆæå–ç : y3dwï¼‰ç›´æ¥ä¸‹è½½ã€‚</p>
<p data-nodeid="744">æœ€åï¼Œæˆ‘ä»¬éœ€è¦æ”¹åŠ¨ä¸‹ main.py çš„å†…å®¹ï¼Œä½¿ä¹‹åº”ç”¨ HTMLTestRunner è¿™ä¸ªæµ‹è¯•æŠ¥å‘Šã€‚æ›´æ”¹å main.py çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre class="lang-python" data-nodeid="745"><code data-language="python">__author__ = <span class="hljs-string">'iTesting'</span>
<span class="hljs-keyword">import</span> unittest,os
<span class="hljs-keyword">from</span> common.html_reporter <span class="hljs-keyword">import</span> GenerateReport

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    suite = unittest.defaultTestLoader.discover(os.path.join(os.path.dirname(__file__),<span class="hljs-string">"tests"</span>),\
                                                pattern=<span class="hljs-string">'*.py'</span>,top_level_dir=os.path.dirname(__file__))
    html_report = GenerateReport()
    html_report.generate_report(suite)
</code></pre>
<p data-nodeid="746">è¿è¡Œ main.py æ–‡ä»¶ï¼Œä½ å°†çœ‹åˆ°ä¸€ä¸ª html æ ¼å¼çš„æµ‹è¯•æŠ¥å‘Šæ–‡ä»¶è¢«ç”Ÿæˆäº†ï¼Œ å®ƒçš„è¯¦ç»†å†…å®¹å¦‚ä¸‹ï¼š</p>
<p data-nodeid="747"><img src="https://s0.lgstatic.com/i/image/M00/5A/32/CgqCHl90J2KARHGLAABWO-bepxA434.png" alt="image (7).png" data-nodeid="840"></p>
<p data-nodeid="748">è‡³æ­¤ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª Web è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å°±ä¼˜åŒ–å¾—å·®ä¸å¤šäº†ï¼Œä½†æ˜¯è¯·å†æ¬¡æŸ¥çœ‹ test_baidu.py è¿™ä¸ªæ–‡ä»¶ï¼Œæˆ‘ä»¬ä»¥è¿™ä¸ªæ–‡ä»¶é‡Œ test_baidu_search è¿™ä¸ªç±»æ–¹æ³•ä¸ºä¾‹ï¼š</p>
<pre class="lang-python" data-nodeid="749"><code data-language="python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">test_baidu_search</span>(<span class="hljs-params">self</span>):</span>
    driver = self.driver
    driver.get(self.base_url + <span class="hljs-string">"/"</span>)
    driver.find_element_by_id(<span class="hljs-string">"kw"</span>).send_keys(<span class="hljs-string">"iTesting"</span>)
    driver.find_element_by_id(<span class="hljs-string">"su"</span>).click()
    time.sleep(<span class="hljs-number">2</span>)
    search_results = driver.find_element_by_xpath(<span class="hljs-string">'//*[@id="1"]/h3/a'</span>).get_attribute(<span class="hljs-string">'innerHTML'</span>)
    self.assertEqual(<span class="hljs-string">'iTesting'</span> <span class="hljs-keyword">in</span> search_results, <span class="hljs-literal">True</span>)
</code></pre>
<p data-nodeid="750">çœ‹çœ‹è¿™ä¸ªæ–¹æ³•æœ‰å“ªäº›å¼Šç«¯ï¼š</p>
<ul data-nodeid="751">
<li data-nodeid="752">
<p data-nodeid="753">å¦‚æœæˆ‘å…ƒç´ å®šä½æ”¹å˜äº†ï¼ˆå¯¹åº”ä¾‹å­é‡Œæ˜¯â€œkwâ€æ”¹å˜ï¼‰ï¼Œé‚£ä¹ˆæˆ‘æ˜¯ä¸æ˜¯åªèƒ½åœ¨è¿™ä¸ªä»£ç æ–‡ä»¶é‡Œæ”¹å•Šï¼Ÿ å¦‚æœæˆ‘æœ‰å¤šä¸ªåœ°æ–¹å¼•ç”¨ï¼Œæˆ‘æ˜¯ä¸æ˜¯å°±è¦æ”¹å¤šéå‘¢ï¼Ÿ</p>
</li>
<li data-nodeid="754">
<p data-nodeid="755">çœ‹è¿™ä¸ªæ–¹æ³•ï¼Œå…ƒç´ å®šä½ã€å…ƒç´ æ“ä½œéƒ½æ˜¯è€¦åˆåœ¨ä¸€èµ·çš„ï¼Œæˆ‘æ˜¯ä¸æ˜¯æ— æ³•ä¸€çœ¼å°±çŸ¥é“ä½ åœ¨åšä»€ä¹ˆæ“ä½œå•Šï¼Ÿ</p>
</li>
<li data-nodeid="756">
<p data-nodeid="757">å¦‚æœæˆ‘æœ‰åˆ«çš„æµ‹è¯•è¦é‡ç”¨ä½ è¿™ä¸ªæ–¹æ³•æ€ä¹ˆåŠï¼Ÿ</p>
</li>
</ul>
<p data-nodeid="758">è¿™äº›é—®é¢˜ä¸€æŠ›å‡ºæ¥ï¼Œå¤§å®¶å°±çŸ¥é“ï¼Œæˆ‘ä»¬çš„æ¡†æ¶è¿˜æœ‰å¾…ä¼˜åŒ–çš„éƒ¨åˆ†ï¼Œä¹Ÿæœ‰éƒ¨åˆ†åŒå­¦ä¼šçŒœå‡ºï¼Œè¿™ä¸ªå°±å¿…é¡»è®²åˆ° Page Object äº†ï¼Œè€Œè¿™ä¸ª Page Object çš„è¯¦ç»†ç”¨æ³•ï¼Œæˆ‘å°†ä¼šåœ¨ <strong data-nodeid="859">â€œ10 | å¦‚ä½•ä½¿ç”¨ Page Object è®¾è®¡æ¨¡å‹ï¼Ÿâ€</strong> ä¸­ä¸ºä½ è¯¦ç»†è®²è§£ã€‚</p>
<p data-nodeid="759">å¦å¤–unittestæ¡†æ¶å…¶å®éå¸¸å¼ºå¤§ï¼Œå®ƒè¿˜å¯ä»¥åšMockï¼Œå…³äºMockçš„çŸ¥è¯†â€œä½¿ç”¨â€å’Œâ€œè‡ªä¸»å®ç°â€ï¼Œæˆ‘å°†åœ¨åç»­çš„ç« èŠ‚ <strong data-nodeid="867">â€œ20 | å‘Šåˆ«ä¾èµ–ï¼ŒMock Serverâ€</strong> å¿…æ€æŠ€ä¸­ä¸ºä½ è¯¦ç»†è®²è§£ã€‚</p>
<h3 data-nodeid="760">æ€»ç»“</h3>
<p data-nodeid="761">unittest æ˜¯ Python é‡Œéå¸¸ç»å…¸çš„æµ‹è¯•æ¡†æ¶ï¼Œå€ŸåŠ© unittestï¼Œä½ å¯ä»¥å®Œæˆä»»ä½•è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶çš„æ­å»ºã€‚æœ€è¿‘ä¸¤ä¸ªè¯¾æ—¶æˆ‘ä»¬è¯¦ç»†è®²è§£äº† unittest è¿™ä¸ªæ¡†æ¶ï¼Œä»¥åŠ Web æµ‹è¯•æ¡†æ¶çš„æ­å»ºè¿‡ç¨‹ã€‚</p>
<p data-nodeid="762">é€šè¿‡å­¦ä¹ ï¼Œä½ åº”è¯¥å¯¹ unittest çš„åŸç†ã€å„ä¸ªç»„æˆéƒ¨åˆ†ã€è¯¦ç»†è¯­æ³•ã€ç»å…¸ä½¿ç”¨æ–¹å¼éƒ½äº†ç„¶äºèƒ¸äº†ï¼Œå¹¶ä¸”ä½ åº”è¯¥èƒ½å¤ŸæŒ‰ç…§æˆ‘ç»™çš„æ­¥éª¤ï¼Œä½¿ç”¨ unittest ä¸€ æ­¥æ­¥æ­å»ºèµ·ä½ è‡ªå·±çš„ Web æµ‹è¯•æ¡†æ¶äº†ã€‚</p>
<p data-nodeid="763">æœ€åï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿå¤šå­¦å¤šç»ƒï¼ŒæŠŠæœ¬èŠ‚è¯¾çš„ä»£ç å®é™…æ“ç»ƒä¸€ç•ªï¼Œä¸ºä¸‹ä¸€è¯¾æ—¶ <strong data-nodeid="878">â€œ09 | ä½ çš„ç¬¬ä¸€ä¸ª API æµ‹è¯•æ¡†æ¶â€</strong> åšå‡†å¤‡ã€‚æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿ä½ åœ¨è¯„è®ºåŒºç•™è¨€è®¨è®ºã€‚</p>
<hr data-nodeid="764">
<p data-nodeid="765" class="">æƒ³è¦äº†è§£æ›´å¤šå…³äºæµ‹è¯•æ¡†æ¶çš„ä»‹ç»ï¼Œä½ å¯å…³æ³¨æˆ‘çš„å…¬ä¼—å·iTestingï¼Œå›å¤â€œæµ‹è¯•æ¡†æ¶â€æŸ¥çœ‹ã€‚</p>

---

### ç²¾é€‰è¯„è®º

##### **åï¼š
> è¯¾ç¨‹å±äºçº¯ç†è®ºï¼Œå»ºè®®ä¿®æ”¹æˆæ•²ä»£ç ä»£+ç°æœ‰å†…å®¹è¿™æ ·ä½“éªŒä¼šæ›´å¥½

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; è°¢è°¢å»ºè®®ï¼Œè¯·ç»§ç»­å¾€åå­¦ã€‚åé¢éƒ½æ˜¯é‡‡ç”¨å…ˆè®²å®ç°ï¼Œå†å†™ä»£ç çš„ã€‚

##### Williamï¼š
> è€å¸ˆï¼Œ å¸Œæœ›èƒ½å¤šè®²äº›å…³äºallure2 å‡ºæµ‹è¯•æŠ¥å‘Šçš„ä¾‹å­ï¼Œç°åœ¨å…¬å¸é‡Œé¢è²Œä¼¼å¾ˆæµè¡Œallure2 ã€‚

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; åœ¨ç¬¬9èŠ‚ä½ çš„ç¬¬ä¸€ä¸ªAPIè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ä¸­æœ‰è¯¦ç»†è®²è§£ã€‚åæœŸæˆ‘ä»¬è¿˜ä¼šè¯¦ç»†è§£æå…¶éƒ¨åˆ†ä»£ç å®ç°ã€‚

##### **å»ºï¼š
> é€šè¿‡å®ä¾‹è®²è§£æŒºå¥½çš„ğŸ˜€

##### *æ‹“ï¼š
> è€å¸ˆpip install HTMLTestRunner python 3.xç‰ˆæœ¬å®‰è£…å¤±è´¥ æ€ä¹ˆè§£å†³ï¼ŸERROR: Could not find a version 
that satisfies the requirement HTMLTestRunner (from versions: 
none)ERROR: No matching distribution found for HTMLTestRunnerC:\Users\array\PycharmProjects\untitled1\venv\Scripts\python.exe 
C:/Users/array/PycharmProjects/untitled1/main.pyTraceback (most recent 
call last): from common.html_report import GenerateReport import 
HTMLTestRunnerModuleNotFoundError: No module named 
'HTMLTestRunner'Process finished with exit code 1

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; HTML Test Runnerï¼Œæˆ‘æä¾›äº†ä¸€ä¸ªå®šåˆ¶ç‰ˆæœ¬çš„ï¼Œæ‹‰å‹¾ä¹ŸæŠŠå®ƒæ”¾è¿›äº†ç½‘ç›˜ï¼Œä½ ç›´æ¥ä¸‹è½½å°±å¯ä»¥ï¼Œä¸å¿…è¦å®‰è£…ã€‚ä¸‹è½½åœ°å€æ–‡ç« é‡Œæœ‰ã€‚

##### **åŒ–é©¬ï¼š
> è€å¸ˆï¼Œæ€ä¹ˆå¼•ç”¨ä¸Šä¸ªæµ‹è¯•å•Š

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; æ˜¯åœ¨è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹é‡Œå¼•ç”¨ä¸Šä¸ªæµ‹è¯•ç”¨ä¾‹çš„ç»“æœå—ï¼Ÿ è¿™ä¸ªæ˜¯Anti patternï¼Œ ä¸æ¨èã€‚ä¸€ä¸ªcaseæœ€å¥½æ˜¯ç‹¬ç«‹çš„ã€‚ å¦‚æœç¡®å®éœ€è¦ï¼Œå¯ä»¥è€ƒè™‘ç”¨æ¥å£å®ç°ã€‚ç„¶åæœ¬ç”¨ä¾‹ä¸­è°ƒç”¨æ¥å£ã€‚

##### **0967ï¼š
> å’¨è¯¢ä¸‹ï¼šç›´æ¥å­˜å‚¨æµ‹è¯•è¿è¡Œç»“æœæŠ¥å‘Šè¿™éƒ¨åˆ†ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥å°±èƒ½è¿è¡ŒæŒ‡å®šçš„æµ‹è¯•æ–¹æ³•å‘¢ï¼Œæ²¡æœ‰çœ‹åˆ°ç±»ä¼¼runneræ–¹æ³•è°ƒç”¨å‘€ã€‚

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; ä¸»è¦çœ‹è¿™ä¸€å¥os.system('python %s 1>>%s 2>&1'ï¼Œ å¦‚æœè¦äº†è§£å…¶åŸç†ï¼Œå¯ä»¥æœç´¢ä¸‹â€pythoné‡å®šå‘è¾“å‡ºâ€œ

##### éŸ©ï¼š
> è€å¸ˆï¼Œè¯·é—®ä¸‹ç”¨äº†æ‚¨ç»™çš„htmltestruneræ–‡ä»¶ï¼Œæˆ‘æ”¾åœ¨äº†libæ–‡ä»¶å¤¹ä¸‹é¢ï¼Œï¼Œç„¶åæ‰§è¡Œä¸€ç›´æŠ¥é”™AttributeError: module 'HTMLTestRunner' has no attribute 'HTMLTestRunner'ï¼Œï¼Œç½‘ä¸Šçš„åŠæ³•éƒ½è¯•è¿‡äº†ä¹Ÿæ²¡è§£å†³

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; ä¸è¦æ”¾åˆ°libé‡Œï¼Œæ”¾åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚ä½ çœ‹å’±ä»¬çš„æ–‡ç« é‡Œï¼Œæ¸…æ¥šçš„åˆ—å‡ºäº†å’±ä»¬é¡¹ç›®çš„æ–‡ä»¶å¤¹ç»“æ„çš„ ï¼šï¼‰ã€‚

##### **ä¸¹ï¼š
> ä»ç½‘ç›˜ä¸‹è½½HTMLTestRunnern.pyæ–‡ä»¶ï¼Œprint(x, file=sys.stderr) è¿™è¡ŒæŠ¥é”™äº†è€å¸ˆï¼Œå¯ä»¥å¸®å¿™çœ‹ä¸‹ä¸ºä»€ä¹ˆæŠ¥é”™äº†å—ï¼Ÿ

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; ä½ å¯ä»¥çœ‹çœ‹é”™è¯¯ä¿¡æ¯æ˜¯ä»€ä¹ˆï¼Ÿä»è¿™äº›é”™è¯¯ä¿¡æ¯é‡Œï¼Œèƒ½ä¸èƒ½å¾—å‡ºå‡ºé”™çš„åŸå› ï¼Ÿ è¿™æœ‰è¿™å¥è¯æˆ‘åˆ¤æ–­ä¸å‡ºé—®é¢˜æ˜¯å“ªé‡Œï¼ˆæˆ‘æœ¬åœ°è¿è¡Œè¿‡ï¼ŒæˆåŠŸçš„ï¼Œæ‰€ä»¥ä¹Ÿæ— æ³•è°ƒè¯•ï¼‰ã€‚

##### *è¿ªï¼š
> AttributeError: 'Baidu' object has no attribute 'driver'è€å¸ˆ ä¸ºä»€ä¹ˆä¼šæŠ¥è¿™ç§é”™å‘€ ï¼Œæ˜¯å“ªé‡Œå†™é”™äº†å—

 ###### &nbsp;&nbsp;&nbsp; è®²å¸ˆå›å¤ï¼š
> &nbsp;&nbsp;&nbsp; ä½ æµè§ˆå™¨çš„driveræ˜¯ä¸æ˜¯æ²¡æœ‰å®‰è£…ï¼Œæˆ–è€…æ¯ä¸€æ”¾åˆ°æ­£ç¡®çš„æ–‡ä»¶å¤¹ä¸‹ï¼Ÿçœ‹ä¸‹æ–‡ç« é‡Œæœ‰å…³è¿™éƒ¨åˆ†çš„é…ç½®ã€‚

##### **å®‰ï¼š
> è€å¸ˆï¼Œæœ‰æ›´æ·±å…¥çš„æµ‹è¯•å¹³å°è¯¾ç¨‹æ²¡ï¼Ÿ

 ###### &nbsp;&nbsp;&nbsp; ç¼–è¾‘å›å¤ï¼š
> &nbsp;&nbsp;&nbsp; æ›´å¤šæµ‹è¯•è¯¾ç¨‹ï¼Œç¼–è¾‘éƒ¨å’Œè€å¸ˆä»¬è¿˜åœ¨å¿«é©¬åŠ é­æ•™ç ”ä¸­å“¦ï½åŒå­¦ä»¬æ•¬è¯·æœŸå¾…ï½

